!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="08bc2261-c827-4ddc-b97c-158e719aa1ab",e._sentryDebugIdIdentifier="sentry-dbid-08bc2261-c827-4ddc-b97c-158e719aa1ab")}catch(e){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[51554],{27502:(e,t,s)=>{s.r(t),s.d(t,{default:()=>g});var a=s(79342),n=s(25859),l=s(23232),i=s(91102),r=s(88382),o=s(65146),c=s(39489),d=s(10953),u=s(61312),m=s(97225),h=s(16506),x=s(4295),f=s(39116),p=s(11750);function g(){let{t:e}=(0,o.Bd)("base"),t=(0,l._)(),{os:s}=(0,i.c)(),{APP_STORE_URL:g,GOOGLE_PLAY_URL:j}=(0,c.v)(),[y,b]=(0,r.useState)(!1),[w,k]=(0,r.useState)(!1),N=(0,f.useRouter)(),{resolvedTheme:I,setTheme:C}=(0,h.D)(),S=(0,x.c)();(0,r.useEffect)(()=>{"dark"!==I&&C("dark")},[]),(0,r.useEffect)(()=>{if("undetermined"!==s&&!y){b(!0);let{ios:e,android:t}=v(),a=document.createElement("iframe");"android"===s?a.src=t:a.src=e,a.style.display="none",a.height="0",a.width="0",document.body.appendChild(a),setTimeout(()=>{document.hasFocus()&&document.body.removeChild(a)},1e3)}},[s,y]);let E=(0,r.useCallback)(()=>{t("clicked_download_app",s,{location:"imagine-page",os:s}),"android"!==s?window.location.href=g:window.location.href=j},[t,s,g,j]),_=(0,r.useCallback)(()=>{let e=new URLSearchParams({return_to:location.pathname}).toString();t("sign_up_redirect",s,{location:"imagine-page",os:s}),N.push("/sign-up".concat(e?"?".concat(e):""))},[t,s,N]),z=(0,r.useCallback)(()=>{let e=new URLSearchParams({return_to:location.pathname}).toString();t("sign_in_redirect",s,{location:"imagine-page",os:s}),N.push("/sign-in".concat(e?"?".concat(e):""))},[t,s,N]),{setOpen:P}=(0,m.cL)(),M=(0,r.useRef)(null);return((0,r.useEffect)(()=>{function e(){let e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh","".concat(e,"px"))}return P(!1),e(),window.addEventListener("resize",e),window.addEventListener("scroll",e),()=>{window.removeEventListener("resize",e),window.removeEventListener("scroll",e)}},[]),"undetermined"===s)?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-background",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"}),(0,a.jsx)("p",{className:"mt-4 text-secondary",children:e("imagine.loading","Loading...")})]})}):(0,a.jsxs)("div",{className:(0,u.cn)("dark min-w-full flex items-center justify-center px-4","relative overflow-hidden"),style:{height:"calc(var(--vh, 1vh) * 100)"},onClick:()=>{var e;null==(e=M.current)||e.play()},children:[(0,a.jsx)("div",{className:(0,u.cn)("absolute inset-0 bg-cover bg-center bg-no-repeat",'bg-[url("/backgrounds/grok-imagine-small.png")]','md:bg-[url("/backgrounds/grok-imagine-medium.png")]',"transition-opacity ease-in-out"),style:{opacity:+!w,transitionDuration:"2000ms",zIndex:1}}),(0,a.jsx)("video",{ref:M,autoPlay:!0,muted:!0,loop:!0,playsInline:!0,className:"absolute inset-0 w-full h-full object-cover",style:{zIndex:0,transform:"scale(1.2) translate(-10px, -180px)"},onLoadedData:()=>{var e;k(!0),null==(e=M.current)||e.play()},onError:()=>k(!1),children:(0,a.jsx)("source",{src:"https://storage.googleapis.com/grok-web-public/grok-imagine-horizontal-4k.mp4",type:"video/mp4"})}),(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-black/90 to-transparent pointer-events-none",style:{zIndex:2}}),(0,a.jsxs)("div",{className:"flex flex-col items-center text-center max-w-md mx-auto relative z-10",children:[(0,a.jsx)(d.$r,{className:"w-24 h-24 text-primary"}),(0,a.jsx)("h1",{className:"text-[56px] text-primary mt-3 leading-none tracking-[-2.5px] font-[550]",children:e("imagine.title","Grok Imagine")}),(0,a.jsx)("p",{className:"text-xl text-primary mt-6",children:e("imagine.subtitle","Introducing the fastest image and video generation experience")}),!S&&(0,a.jsxs)("div",{className:"flex flex-row gap-4 items-center mt-8",children:[(0,a.jsxs)(n.$n,{className:"font-semibold text-xl",variant:"primary",size:"xl",shape:"pill",onClick:_,children:[(0,a.jsx)(p.KJW,{size:18,strokeWidth:3}),e("Sign up","Sign up")]}),(0,a.jsx)(n.$n,{className:"font-semibold text-xl",variant:"secondary",size:"xl",shape:"pill",onClick:z,children:e("Sign in","Sign in")})]}),S&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.$n,{variant:"primary",size:"xl",shape:"pill",onClick:E,className:"mt-8 mb-10 text-xl font-semibold",children:e("imagine.download_button","Download Grok app")}),(0,a.jsx)("button",{type:"button",onClick:()=>{t("clicked_have_app",s,{location:"imagine-page",os:s});let{ios:e,android:a}=v();"android"!==s?window.location.href=e:window.location.href=a},className:"text-primary underline transition-colors text-base cursor-pointer bg-transparent border-0 p-0",children:e("imagine.app_link_2","I already have the app")})]})]})]})}function v(){let e=window.location.pathname,t=window.location.search,s=e.replace(/^\/imagine/,""),a="source=web";return t&&(a=t.substring(1)+"&"+a),{ios:"com.grokapp://imagine".concat(s,"?").concat(a),android:"intent://imagine".concat(s,"?").concat(a,"#Intent;scheme=grok;package=com.grokapp;end")}}},38245:(e,t,s)=>{s.r(t),s.d(t,{default:()=>o});var a=s(79342),n=s(28503),l=s(10953),i=s(84499),r=s(65146);function o(){let{t:e}=(0,r.Bd)("base");return(0,a.jsxs)("div",{className:"w-full min-h-dvh flex flex-col items-center justify-center pt-4",children:[(0,a.jsx)(i.N_,{route:{page:"main"},className:"block focus:outline-none focus-visible:ring-1 focus-visible:ring-ring rounded-lg",children:(0,a.jsx)(l.r1,{height:20,width:60,className:"opacity-80 hover:opacity-100 fill-black dark:fill-white"})}),(0,a.jsx)(n.J,{title:e("pages.404.title","Page not found"),description:e("pages.404.description","There was an error loading this page. Please verify that you are using a correct URL or contact one of the admins if the issue persists."),cta:e("pages.404.home","Return to home")})]})}},41405:(e,t,s)=>{s.d(t,{z:()=>a});function a(e){let t=["B","KB","MB","GB","TB"];if(0===e||e===BigInt(0))return"0.00 B";let s="bigint"==typeof e?Number(e):e;if("bigint"==typeof e&&e>BigInt(Number.MAX_SAFE_INTEGER)){let s=0,a=e;for(;a>=BigInt(1e3)&&s<t.length-1;)a/=BigInt(1e3),s++;return Number(a).toFixed(2)+" "+t[s]}let a=Math.floor(Math.log(s)/Math.log(1e3));return(s/Math.pow(1e3,a)).toFixed(2)+" "+t[a]}},51554:(e,t,s)=>{s.r(t),s.d(t,{default:()=>le});var a=s(79342),n=s(72170),l=s(38614),i=s(99983),r=s(28503),o=s(19093),c=s(61312),d=s(65146),u=s(82591),m=s(11750),h=s(56691),x=s(90210),f=s(88382),p=s(91631),g=s(52244),v=s(84969),j=s(23054),y=s(95158),b=s(56907),w=s(75500);let k=e=>{let t=(0,w.h)(),[s,a]=(0,f.useState)([]),n=(0,f.useMemo)(()=>null==e?void 0:e.filter(e=>!s.includes(e.ticker)&&e.ticker.length<=5),[e,s]);return(0,b.IT)({retry:!1,queryKey:["ticker_mini_summary",null==n?void 0:n.map(e=>{var t;return e.ticker.toLowerCase()+(null==(t=e.originalSuggestion)?void 0:t.label)})],queryFn:async()=>null==n||0===n.length||n.every(e=>""==e.ticker.trim())?null:await Promise.allSettled(n.map(async e=>[e.originalSuggestion,await y.rA.financeGetStockMiniSummary({ticker:e.ticker.trim()})])).then(e=>{let t=e.filter(e=>"fulfilled"===e.status).map(e=>e.value).filter(e=>null!=e).map(e=>({suggestion:e[0],data:e[1]})),s=n.map(e=>e.ticker.toLowerCase()).filter(e=>!t.map(e=>{var t;return null==(t=e.data.ticker)?void 0:t.toLowerCase()}).includes(e));return a(e=>[...e,...s]),t}),enabled:t.SHOW_FINANCE_SUGGESTIONS&&!!e&&e.every(e=>""!=e.ticker.trim())})};var N=s(10463);let I=e=>{let{className:t}=e;return(0,a.jsx)("div",{className:(0,c.cn)("bg-muted-foreground/10 relative overflow-hidden",t),children:(0,a.jsx)("div",{className:(0,c.cn)("shimmer-effect")})})};var C=s(84499),S=s(25859),E=s(82509),_=s(65258),z=s(17823);class P{constructor(e,t){this.set=e,this.get=t,this.financeItem="overview",this.stockFinancialItem="incomeStatements",this.stockTimeSpan="1D",this.stockFinancialTimeframe="quarterly",this.isChatOpen=!0,this.setFinanceItem=(0,_.kp)(this.set,"financeItem"),this.setStockFinancialItem=(0,_.kp)(this.set,"stockFinancialItem"),this.setStockTimeSpan=(0,_.kp)(this.set,"stockTimeSpan"),this.setStockFinancialTimeframe=(0,_.kp)(this.set,"stockFinancialTimeframe"),this.setIsChatOpen=(0,_.kp)(this.set,"isChatOpen")}}let M=(0,E.v)()((0,z.lt)((0,z.eh)((0,z.Zr)((e,t)=>new P(e,t),{name:"finance-preferences",partialize:e=>({stockFinancialItem:e.stockFinancialItem,financeItem:e.financeItem}),version:2})),{name:"useFinancePageStore"})),R=()=>{var e,t,s,n,l;let{t:i}=(0,d.Bd)("finance"),{route:r}=(0,C.wK)(),o="finance"===r.page?r.ticker:"",{data:c,isLoading:u}=k([{ticker:o}]),h=null==(e=(null!=c?c:[])[0])?void 0:e.data,{isChatOpen:x,setIsChatOpen:f}=M();if(u)return(0,a.jsx)("div",{className:"flex justify-center items-center h-header-height",children:(0,a.jsx)(I,{className:"w-full h-full rounded-md"})});let p=o in N.s?N.s[o]:null;return(0,a.jsx)("div",{className:"flex grow-0 shrink-0",children:(0,a.jsx)("header",{className:"px-4 flex-row items-center h-header-height flex justify-between w-full gap-2 relative z-30 flex-shrink-0",children:(0,a.jsxs)(v.N,{mode:"popLayout",children:[(0,a.jsx)(j.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{ease:"easeInOut"},className:"w-full overflow-hidden min-w-0 hidden sm:block",children:(0,a.jsxs)("div",{className:"text-lg flex flex-row items-center gap-2",children:[p&&(0,a.jsx)("img",{src:p,alt:o,className:"w-5 h-5"}),(0,a.jsx)("span",{className:"font-medium overflow-hidden text-ellipsis whitespace-nowrap",children:null!=(n=null==h||null==(t=h.stockOverview)?void 0:t.name)?n:o}),"\xb7",(0,a.jsx)("span",{className:"font-medium",children:null!=(l=null==h||null==(s=h.stockOverview)?void 0:s.exchange)?l:""})]})},o),!x&&(0,a.jsx)(S.gx,{tooltipContent:i("Open Chat","Open Chat"),tooltipContentProps:{className:"text-xs"},tooltipProps:{delayDuration:300},onClick:()=>f(!0),shape:"square",variant:"tertiary",size:"sm","aria-label":i("Open Chat","Open Chat"),children:(0,a.jsx)(m.PBN,{size:18})},"open-chat-button"),(0,a.jsx)(j.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{ease:"easeInOut"},children:(0,a.jsx)(g.w,{variant:"ghost",size:"iconMd",rounded:!0,conversationId:"",responseId:"a",iconProps:{size:20}})},"share")]})})})};var A=s(6132);A.z.enum(["overview","financials"]),A.z.enum(["incomeStatements","balanceSheets","cashFlows"]);let D=Object.values(A.z.enum(["quarterly","annual"]).enum),T=Object.values(A.z.enum(["1D","5D","1M","6M","YTD","1Y","5Y"]).enum),B="stock_chart_ticker",F="stock_financials_ticker";var L=s(74995);let G=e=>{let{itemKey:t,label:s,isSelected:n}=e,l=M(L.A("setFinanceItem")),{route:i}=(0,C.wK)(),r="finance"===i.page?i.ticker:"",{stockFinancialTimeframe:o}=M(),d=(0,b.jE)(),u=e=>{l(e)},m=(0,f.useCallback)(()=>{r&&o&&D.forEach(async e=>{await d.prefetchQuery({queryKey:[F,null==r?void 0:r.toLowerCase(),e],queryFn:()=>y.rA.financeGetStockFinancials({ticker:r,timeframe:e})})})},[d,r,o]);return(0,a.jsx)("div",{className:(0,c.cn)("flex flex-grow-0 py-4 text-muted-foreground cursor-pointer hover:text-primary",n?"border-b-2 border-primary text-foreground-primary":""),onClick:()=>u(t),onMouseEnter:()=>{r&&o&&"financials"===t&&m()},children:s},t)},O=()=>{let{t:e}=(0,d.Bd)("finance"),t=M(L.A("financeItem")),s={overview:{title:e("finance-selector.overview","Overview")},financials:{title:e("finance-selector.financials","Financials")}};return(0,a.jsx)("div",{className:"flex flex-row w-full h-[50px] pl-4 gap-4 overflow-x-scroll",children:Object.entries(s).map(e=>{let[s,n]=e;return(0,a.jsx)(G,{itemKey:s,label:n.title,isSelected:t===s},s)})})};var U=s(75036);function q(e){let t=new Date(e);if(isNaN(t.getTime()))throw Error("Invalid date format. Expected YYYY-MM-DD");let s=new Intl.DateTimeFormat("en-US",{month:"short"}),a=t.getFullYear().toString().slice(-2);return"".concat(s.format(t)," '").concat(a)}var W=s(76393);let K=e=>{let{financialReport:t}=e,{i18n:s}=(0,d.Bd)("finance"),n=(0,U.h)(!0,s.language),l=(0,f.useMemo)(()=>Object.values(t).sort((e,t)=>e.endDate.localeCompare(t.endDate)),[t]),i=(0,f.useMemo)(()=>l.map(e=>(0,a.jsx)("span",{children:q(e.endDate)},e.fiscalPeriod+e.fiscalYear)),[l]),r=Object.keys(l.at(0).report),o=(0,f.useMemo)(()=>r.map(e=>l.map(t=>t.report[e])),[r,l]);return(0,a.jsx)("div",{className:"grow-1 text-muted-foreground w-full",children:(0,a.jsxs)("table",{className:"table-auto w-full",children:[(0,a.jsx)("thead",{className:"table-header",children:(0,a.jsxs)("tr",{className:"w-full",children:[(0,a.jsx)("th",{className:"pb-2 text-left",children:""}),i.map((e,t)=>(0,a.jsx)("th",{className:"pb-2 px-2 font-semibold text-right text-nowrap",children:e},t))]},"headers")}),(0,a.jsx)("tbody",{className:"w-full",children:o.map((e,t)=>(0,a.jsxs)("tr",{className:(0,c.cn)("financial-table-row hover:bg-muted"),children:[(0,a.jsx)("td",{className:"table-cell py-2 pl-2 pr-4 ph-[30px] text-overflow-ellipsis",children:e.at(0).label}),e.map((e,s)=>{var l;return null==e?(0,a.jsx)("td",{className:"table-cell py-2px-2 text-center",children:"-"},"".concat(t,"-").concat(s)):(0,a.jsx)("td",{className:"table-cell py-2 px-2 text-right",children:(0,a.jsxs)("div",{className:"flex flex-col justify-end",children:[(0,a.jsx)("span",{className:"text-nowrap",children:n(e.value,(null==(l=e.unit)?void 0:l.length)<4?e.unit:void 0)}),(0,a.jsx)("span",{className:"text-nowrap text-fg-primary",children:null!=e.changePercent&&!Number.isNaN(e.changePercent)&&(0,a.jsx)(W.p,{value:e.changePercent,formatter:e=>"".concat(e.toFixed(2),"%")})})]})},"".concat(t,"-").concat(s))})]},t))})]})})},V=e=>{let{itemKey:t,label:s,isSelected:n}=e,l=M(L.A("setStockFinancialItem")),i=e=>{l(e)};return(0,a.jsx)(S.$n,{variant:"secondary",shape:"pill",size:"md",className:(0,c.cn)(n&&"bg-primary/10"),onClick:()=>i(t),children:s})},$=()=>{let{t:e}=(0,d.Bd)("finance"),t=M(L.A("stockFinancialItem")),s={incomeStatements:{label:e("finance-body-financials-selector.incomeStatements","Income Statement")},balanceSheets:{label:e("finance-body-financials-selector.balanceSheets","Balance Sheet")},cashFlows:{label:e("finance-body-financials-selector.cashFlows","Cash Flow")}};return(0,a.jsx)("div",{className:"flex flex-row h-[60px] w-full gap-2 pl-4 py-8 items-center overflow-hidden",children:Object.entries(s).map(e=>{let[s,n]=e;return(0,a.jsx)(V,{itemKey:s,label:n.label,isSelected:t===s},s)})})};var H=s(35632),Y=s(88997),Q=s(18614),X=s(45669),J=s(10490),Z=s(99e3),ee=s(35832),et=s(52427),es=s(80607);function ea(e){var t;let{active:s,payload:n}=e,{i18n:l}=(0,d.Bd)(),i=(0,U.h)(!0,l.language);if(!s||!n||0===n.length)return null;let r=n.map(e=>{var t;return{name:e.name,value:null!=(t=e.payload[e.dataKey])?t:void 0,formatter:e=>i(e)}}),o=null==(t=n.at(0))?void 0:t.payload.name,c=[...r].sort((e,t)=>{var s,a;return(null!=(s=t.value)?s:0)-(null!=(a=e.value)?a:0)});return(0,a.jsxs)("div",{className:"z-50 text-xs bg-surface-l3 border border-border-l1 shadow-sm rounded-lg px-2 py-1 flex flex-col gap-1",children:[(0,a.jsx)("span",{className:"text-secondary font-semibold",children:o}),c.map(e=>{var t,s;return(0,a.jsxs)("div",{className:"flex-1 flex-row items-center space-between text-muted-foreground w-full",children:[(0,a.jsx)("span",{className:"font-semibold pr-2",children:e.name}),(0,a.jsx)("span",{className:"text-right self-end",children:null==(t=e.formatter)?void 0:t.call(e,null!=(s=e.value)?s:0)})]},e.name)})]})}let en=["#9F9E9D","#3B3A39","#646362","#868584","#9F9E9D"],el=e=>{let{data:t,labels:s}=e,{i18n:n}=(0,d.Bd)(),l=(0,U.h)(!0,n.language);return(0,a.jsx)("div",{className:"flex-1 py-6 h-[300px]",children:(0,a.jsx)(H.u,{height:"100%",width:"100%",minWidth:50,minHeight:100,children:(0,a.jsxs)(Y.E,{data:t,margin:{top:5,right:20,left:20,bottom:10},children:[(0,a.jsx)(Q.d,{strokeDasharray:"1 0",vertical:!1,className:"stroke-black/10 dark:stroke-white/10"}),(0,a.jsx)(X.W,{dataKey:"name",tickLine:!1,axisLine:!1}),(0,a.jsx)(J.h,{orientation:"right",className:"stroke-black/20 dark:stroke-white/20",tickFormatter:e=>l(e),tickLine:!1,axisLine:!1}),(0,a.jsx)(Z.m,{content:(0,a.jsx)(ea,{}),cursor:!1,isAnimationActive:!1}),(0,a.jsx)(ee.s,{align:"left"}),(0,a.jsx)(et.e,{y:0,strokeWidth:1,className:"stroke-black/10 dark:stroke-white/10"}),Object.entries(s).map((e,t)=>{let[s,n]=e;return(0,a.jsx)(es.y,{dataKey:s,name:null!=n?n:"",fill:en[t],barSize:25,activeBar:!1,animationDuration:50},s)})]},"financial-bar-chart")})})},ei=e=>{let{itemKey:t,label:s,isSelected:n}=e,l=M(L.A("setStockFinancialTimeframe"));return(0,a.jsx)(S.$n,{variant:"secondary",shape:"pill",size:"md",className:(0,c.cn)(n&&"bg-primary/10"),onClick:()=>l(t),children:s})},er=()=>{let{t:e}=(0,d.Bd)("finance"),t=M(L.A("stockFinancialTimeframe")),s={quarterly:{label:e("finance-financials-timeframe-selector.quarterly","Quarterly")},annual:{label:e("finance-financials-timeframe-selector.annual","Annual")}};return(0,a.jsx)("div",{className:"flex flex-row h-[60px] w-full gap-2 pl-4 py-8 items-center overflow-hidden",children:Object.entries(s).map(e=>{let[s,n]=e;return(0,a.jsx)(ei,{itemKey:s,label:n.label,isSelected:t===s},s)})})},eo=(e,t)=>"incomeStatements"===t?{data:Object.values(e).sort((e,t)=>e.endDate.localeCompare(t.endDate)).map(e=>{var t,s,a,n;return{name:q(e.endDate),revenues:null!=(a=null==(t=e.report.revenues)?void 0:t.value)?a:0,net_income_loss:null!=(n=null==(s=e.report.net_income_loss)?void 0:s.value)?n:0}}),labels:{revenues:"Revenues",net_income_loss:"Net Income/Loss"}}:"balanceSheets"===t?{data:Object.values(e).sort((e,t)=>e.endDate.localeCompare(t.endDate)).map(e=>{var t,s,a,n;return{name:q(e.endDate),assets:null!=(a=null==(t=e.report.assets)?void 0:t.value)?a:0,liabilities:null!=(n=null==(s=e.report.liabilities)?void 0:s.value)?n:0}}),labels:{assets:"Assets",liabilities:"Liabilities"}}:"cashFlows"===t?{data:Object.values(e).sort((e,t)=>e.endDate.localeCompare(t.endDate)).map(e=>{var t,s,a,n,l,i;return{name:q(e.endDate),net_cash_flow_from_financing_activities:null!=(n=null==(t=e.report.net_cash_flow_from_financing_activities)?void 0:t.value)?n:0,net_cash_flow_from_investing_activities:null!=(l=null==(s=e.report.net_cash_flow_from_investing_activities)?void 0:s.value)?l:0,net_cash_flow_from_operating_activities:null!=(i=null==(a=e.report.net_cash_flow_from_operating_activities)?void 0:a.value)?i:0}}),labels:{net_cash_flow_from_financing_activities:"Financing",net_cash_flow_from_investing_activities:"Investing",net_cash_flow_from_operating_activities:"Operating"}}:void 0,ec=()=>{let{t:e}=(0,d.Bd)("finance"),t=M(L.A("stockFinancialItem")),s=M(L.A("stockFinancialTimeframe")),{route:n}=(0,C.wK)(),l="finance"===n.page?n.ticker:null,{data:i,isLoading:r}=(0,b.IT)({queryKey:[F,null==l?void 0:l.toLowerCase(),s],queryFn:()=>l?y.rA.financeGetStockFinancials({ticker:l,timeframe:s}):null,enabled:null!=l});if(r)return(0,a.jsx)(I,{className:"w-full h-full rounded-md p-4"});if(!l)return null;let o={incomeStatements:e("finance-body-financials-selector.incomeStatements","Income Statement"),balanceSheets:e("finance-body-financials-selector.balanceSheets","Balance Sheet"),cashFlows:e("finance-body-financials-selector.cashFlows","Cash Flow")},c=(null==i?void 0:i[t])!=null?null==i?void 0:i[t]:null;if(null==c)return null;let u=eo(c,t);return(0,a.jsxs)("div",{className:"flex flex-col grow-1 min-w-full h-full overflow-y-hidden",children:[(0,a.jsx)($,{}),(0,a.jsx)("div",{className:"flex flex-col items-center grow-1 p-4 min-w-full overflow-y-scroll",children:(0,a.jsxs)("div",{className:"flex-1 flex-col h-full min-w-full items-center",children:[(0,a.jsxs)("h1",{className:"flex flex-row text-muted-foreground pb-4 w-full justify-between items-center",children:[(0,a.jsx)("span",{className:"text-nowrap text-2xl font-bold ",children:o[t]}),(0,a.jsx)("div",{className:"self-end",children:(0,a.jsx)(er,{})})]}),u&&(0,a.jsx)("div",{className:"flex w-full justify-center",children:(0,a.jsx)(el,{data:null==u?void 0:u.data,labels:null==u?void 0:u.labels})}),(0,a.jsx)("div",{className:"flex w-full",children:(0,a.jsx)(K,{financialReport:c})})]})})]})};var ed=s(36828),eu=s(81210),em=s(46295),eh=s(38541),ex=s.n(eh);let ef=(e,t,s)=>["1D","5D","1M"].includes(e)?new Date(t).toLocaleTimeString(s.language,{day:"numeric",month:"short",year:"2-digit",hour12:!0,hour:"2-digit",minute:"2-digit"}):new Date(t).toLocaleDateString(s.language,{day:"numeric",month:"short",year:"2-digit"});function ep(e){var t,s;let{active:n,payload:l}=e,{t:i,i18n:r}=(0,d.Bd)("finance"),{stockTimeSpan:o}=M(),c=(0,U.h)(!0,r.language);if(!n||!l||0===l.length)return null;let u=null==(t=l.at(0))?void 0:t.payload;if(!u)return null;let m=ef(o,u.time,r),h=c(null!=(s=u.price)?s:0,u.unit),x=c(u.volume);return(0,a.jsxs)("div",{className:"z-50 text-xs bg-surface-l3 border border-border-l1 shadow-sm rounded-lg px-2 py-1 flex flex-col gap-1",children:[(0,a.jsx)("span",{className:"text-secondary font-semibold",children:m}),(0,a.jsxs)("span",{className:"text-secondary font-semibold",children:[i("chart.price","Price"),": ",h]}),(0,a.jsxs)("span",{className:"text-secondary font-semibold",children:[i("chart.volume","Volume"),": ",x]})]})}function eg(e){if(0===e)return 0;let t=Math.pow(10,2-Math.floor(Math.log10(Math.abs(e))));return Math.floor(e*t)/t}function ev(e,t){let s=60*new Date().getTimezoneOffset()*1e3,a=(e+s)/36e5;return 1e3*(t?12*Math.ceil(a/12):12*Math.floor(a/12))*3600-s}let ej=(e,t,s)=>{if("1D"===t){let t=new Date(e),s=t.getHours(),a=String(s%12),n=String(t.getMinutes()).padStart(2,"0");return"".concat(a,":").concat(n," ").concat(s>12?"PM":"AM")}if("5D"!==t)return new Date(e).toLocaleDateString(s.language,{day:"numeric",month:"numeric",year:"2-digit"});{let t=new Date(e),a=t.toLocaleDateString(s.language,{day:"numeric",month:"numeric",year:"2-digit"}),n=t.getHours(),l=String(n%12);return"".concat(a," ").concat(l," ").concat(n>12?"PM":"AM")}},ey=(e,t)=>{let s=e.map(e=>e.time),a=Math.min(...s),n=Math.max(...s);if("1D"===t){let e=function(e){let t=new Date(e),s=9-parseInt(t.toLocaleString("en-US",{timeZone:"America/New_York",hour:"numeric",hour12:!1}),10);return Math.floor(t.setHours(t.getHours()+s,30,0,0))}(a),t=Math.min(Math.ceil(e+414e5),n),s=36e5*Math.ceil(t/36e5),l=Math.min(t,n),i=ex().range(e+18e5,t,72e5);return{domain:[e,s],ticks:[...i,s],perc:eb(e,l)}}if("5D"===t){let e=Math.min(...s),t=ev(e,!0),a=Math.max(...s),n=ev(a,!1);return{domain:[e,a],ticks:[...ex().range(t,n,432e5),n],perc:100}}{let e=Math.min(...s)-36e5,t=Math.max(...s)+36e5,a=ex().range(e,t,(t-e)/5);return{domain:[e,t],ticks:[...a,t],perc:100}}},eb=(e,t)=>{let s=new Date(e);return(s.setHours(s.getHours()+7,0,0,0)-e)/(t-e)*100},ew=(e,t,s)=>{let a=e.filter(e=>e.time>=t[0]&&e.time<=t[1]).map(e=>e[s]);return function(e,t){let s=t-e,a=eg(e-.05*s),n=function(e){if(0===e)return 0;let t=Math.pow(10,2-Math.floor(Math.log10(Math.abs(e))));return Math.ceil(e*t)/t}(t+.05*s),l=ex().range(a,n,(n-a)/5).map(e=>eg(e));return{domain:[a,n],ticks:[...l,n]}}(Math.min(...a),Math.max(...a))},ek=(e,t)=>{var s,a;return t-(null!=(a=null==e||null==(s=e[0])?void 0:s.price)?a:0)>0?1:-1},eN=()=>null,eI=()=>{var e,t,s,n;let{route:l}=(0,C.wK)(),i="finance"===l.page?l.ticker:"",{stockTimeSpan:r}=M(),{i18n:o}=(0,d.Bd)(),c=(0,U.h)(!0,o.language),[u,m]=(0,f.useState)(null),[h,x]=(0,f.useState)(!0),{data:p,isLoading:g}=k([{ticker:i}]),v=null==(e=(null!=p?p:[])[0])?void 0:e.data,{data:j,isLoading:w}=(0,b.IT)({queryKey:[B,i,r],queryFn:()=>y.rA.financeGetStockChartData({ticker:i,timespan:r}),enabled:!!i});if(w||g)return(0,a.jsx)("div",{className:"flex-1 items-center justify-center h-full",children:(0,a.jsx)(I,{className:"w-full h-[416px] rounded-lg"})});let N=Object.values(null!=(s=null==j?void 0:j.chartData)?s:{}).map(e=>{var t;return{time:Number(e.timestamp),price:Number(e.average),volume:Number(e.volume),unit:null!=(t=null==j?void 0:j.unit)?t:""}}).filter(e=>e.price&&e.time&&e.volume),S=1===ek(N,null!=(n=null==v||null==(t=v.financeValue)?void 0:t.value)?n:0)?"#41b2b2":"#f5a5a7",{domain:E,ticks:_,perc:z}=ey(N,r),{domain:P,ticks:R}=ew(N,E,"price"),A=N.filter(e=>e.time>=E[0]&&e.time<=E[1]);return(0,a.jsxs)("div",{className:"flex-1 flex-col items-center justify-center w-full py-2",children:[(0,a.jsx)("div",{className:"flex-1 self-stretch self-bottom relative top-[25px]",children:(0,a.jsx)(H.u,{width:"100%",minWidth:50,minHeight:300,children:(0,a.jsxs)(ed.b,{width:500,height:300,data:A,margin:{top:5,right:0,left:20,bottom:0},syncId:"chart",onMouseMove:e=>{if(e.isTooltipActive){var t;m(null!=(t=e.activeTooltipIndex)?t:null),x(!1)}else m(null),x(!0)},children:[(0,a.jsx)("defs",{children:(0,a.jsxs)("linearGradient",{id:"colorUv",x1:"0",y1:"0",x2:"100%",y2:"0",children:[(0,a.jsx)("stop",{offset:"0%",stopColor:S}),(0,a.jsx)("stop",{offset:"".concat(z,"%"),stopColor:S}),(0,a.jsx)("stop",{offset:"".concat(z,"%"),stopColor:"#646362"}),(0,a.jsx)("stop",{offset:"100%",stopColor:"#646362"})]})}),(0,a.jsx)(Q.d,{horizontalValues:R,strokeDasharray:"1 0",vertical:!1,className:"stroke-black/10 dark:stroke-white/10"}),(0,a.jsx)(X.W,{dataKey:"time",domain:E,name:"Time",tick:!1,ticks:_,tickLine:!1,axisLine:!1,type:"1D"===r?"number":"category"}),(0,a.jsx)(J.h,{dataKey:"price",name:"Price",domain:P,tickFormatter:e=>c(e),ticks:R,tickLine:!1,axisLine:!1,type:"number",allowDataOverflow:!0,orientation:"right"}),(0,a.jsx)(eu.N,{type:"linear",dataKey:"price",stroke:"url(#colorUv)",activeDot:!1,dot:!1,strokeWidth:2,connectNulls:!0,animationDuration:50}),(0,a.jsx)(Z.m,{content:(0,a.jsx)(ep,{}),cursorStyle:{stroke:1},isAnimationActive:!1})]})})}),(0,a.jsx)("div",{children:(0,a.jsx)(H.u,{width:"100%",height:100,children:(0,a.jsxs)(Y.E,{data:A,margin:{top:0,right:0,left:20,bottom:5},syncId:"chart",onMouseMove:e=>{var t;m(null!=(t=e.activeTooltipIndex)?t:null),x(!1)},onMouseLeave:()=>{m(null),x(!0)},children:[(0,a.jsx)(X.W,{dataKey:"time",tickLine:!1,axisLine:!1,ticks:_,tickFormatter:e=>ej(e,r,o),domain:E,allowDataOverflow:!0,type:"1D"===r?"number":"category"}),(0,a.jsx)(J.h,{dataKey:"volume",tickLine:!1,axisLine:!1,domain:["auto","auto"],tick:!1,type:"number",allowDataOverflow:!0,orientation:"right"}),(0,a.jsx)(es.y,{dataKey:"volume",fill:S,animationDuration:50,children:A.map((e,t)=>(0,a.jsx)(em.f,{fill:u===t||h?"rgba(100, 99, 98, 1.0)":"rgba(100, 99, 98, 0.5)"},"cell-".concat(t)))}),(0,a.jsx)(Z.m,{content:(0,a.jsx)(eN,{}),cursorStyle:{stroke:1},cursor:!1})]})})})]})},eC=()=>{var e,t,s,n,l;let{route:i}=(0,C.wK)(),r="finance"===i.page?i.ticker:"",{data:o,isLoading:c}=k([{ticker:r}]),{i18n:u,t:m}=(0,d.Bd)("finance"),h=(0,U.h)(!0,u.language),{stockTimeSpan:x}=M(),f=null==(e=(null!=o?o:[])[0])?void 0:e.data,p=null!=(n=null==f||null==(t=f.financeValue)?void 0:t.value)?n:0,g=null!=(l=null==f||null==(s=f.financeValue)?void 0:s.unit)?l:"$",{data:v,isLoading:j}=(0,b.IT)({queryKey:[B,r,x],queryFn:()=>y.rA.financeGetStockChartData({ticker:r,timespan:x})});if(!f||!o)return null;let{change:w,changePercent:N}=function(e,t,s){var a,n,l,i,r,o,c,d,u,m,h,x;if("1D"===e)return{change:null!=(l=null==t||null==(a=t.financeValue)?void 0:a.change)?l:0,changePercent:null!=(i=null==t||null==(n=t.financeValue)?void 0:n.changePercent)?i:0};{let e=Math.min(...Object.keys(null!=(u=null==s?void 0:s.chartData)?u:[]).map(e=>parseInt(e,10))),a=null!=(m=null==s||null==(o=s.chartData)||null==(r=o[e.toString()])?void 0:r.close)?m:0;return{change:(null!=(h=null==t||null==(c=t.financeValue)?void 0:c.value)?h:0)-a,changePercent:0===a?null:((null!=(x=null==t||null==(d=t.financeValue)?void 0:d.value)?x:0)-a)/a*100}}}(x,f,v),S=f.timestamp?new Date(parseInt(f.timestamp.toString(),10)/1e6).toLocaleString(u.language,{day:"numeric",month:"short",year:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!0}):null,E=h(p,g);return(0,a.jsx)("div",{className:"flex",children:c?(0,a.jsx)(I,{className:"w-full h-[40px] rounded-md"}):(0,a.jsxs)("div",{className:"flex flex-row gap-2 px-2 pt-2 items-baseline",children:[(0,a.jsx)("span",{className:"text-2xl font-medium",children:E}),"1D"!==x&&j?(0,a.jsx)(I,{className:"w-full h-[40px] rounded-md"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(W.p,{value:w,formatter:e=>h(e,g),className:"text-lg"}),N&&(0,a.jsx)(W.p,{value:N,formatter:e=>"".concat(e.toFixed(2),"%"),className:"text-lg"}),S&&(0,a.jsx)("span",{className:"text-[10px] text-fg-secondary",children:m("price.updatedTimeIndicator","as of {{time}}",{time:S})})]})]})})},eS=()=>{var e,t,s,n,l,i,r,o,u,m,h,x,f,p,g,v,j,w,N,S,E,_,z,P,M,R;let{t:A,i18n:D}=(0,d.Bd)("finance"),{route:T}=(0,C.wK)(),B="finance"===T.page?T.ticker:"",{data:F,isLoading:L}=(0,b.IT)({queryKey:["stock_summary_ticker",B],queryFn:()=>y.rA.financeGetStockSummary({ticker:B})}),{data:G}=k([{ticker:B}]),O=null==(e=(null!=G?G:[])[0])?void 0:e.data,q=(0,U.h)(!0,D.language);if(L)return(0,a.jsx)(I,{className:"w-full h-[100px] rounded-md"});if(null==F)return null;let W=null==O||null==(t=O.financeValue)?void 0:t.unit,K=[{label:A("overview.prevClose","Previous close"),value:(null==(s=F.prevDay)?void 0:s.close)!=null?q(null==(n=F.prevDay)?void 0:n.close,W):"-"},{label:A("overview.open","Open"),value:(null==(l=F.currentDay)?void 0:l.open)!=null?q(null==(i=F.currentDay)?void 0:i.open,W):"-"},{label:A("overview.dayRange","Day's range"),value:"".concat(q(null!=(S=null==(r=F.currentDay)?void 0:r.low)?S:0,W)," - ").concat(q(null!=(E=null==(o=F.currentDay)?void 0:o.high)?E:0,W))},{label:A("overview.prevRange","Previous day's range"),value:"".concat(q(null!=(_=null==(u=F.prevDay)?void 0:u.low)?_:0,W)," - ").concat(q(null!=(z=null==(m=F.prevDay)?void 0:m.high)?z:0,W))},{label:A("overview.52WeekRange","52 Week's range"),value:"".concat(q(null!=(P=null==(h=F.oneYear)?void 0:h.low)?P:0,W)," - ").concat(q(null!=(M=null==(x=F.oneYear)?void 0:x.high)?M:0,W))},{label:A("overview.marketCap","Market cap"),value:null!=F.marketCap?q(F.marketCap,W):"-"},{label:A("overview.exDividendDate","Ex-Dividend Date"),value:(null==(f=F.dividend)?void 0:f.exDividendDate)!=null?new Date(null==(p=F.dividend)?void 0:p.exDividendDate).toLocaleDateString(D.language,{month:"short",day:"numeric",year:"2-digit"}):"-"},{label:A("overview.forwardDividend","Forward Dividend"),value:(null==(g=F.dividend)?void 0:g.cashAmount)!=null?q((null==(v=F.dividend)?void 0:v.cashAmount)*parseInt(null!=(R=null==(j=F.dividend)?void 0:j.frequency)?R:"1",10),W):"-"},{label:A("overview.dividendYield","Dividend Yield"),value:(null==(w=F.dividend)?void 0:w.dividendYield)!=null?"".concat(null==(N=F.dividend)?void 0:N.dividendYield.toFixed(3),"%"):"-"}];return(0,a.jsx)("div",{className:(0,c.cn)("grid grid-cols-[repeat(auto-fill,minmax(350px,2fr))] gap-y-1 gap-x-4 ps-2 pe-4","items-center text-sm text-fg-secondary"),children:K.map((e,t)=>(0,a.jsxs)("div",{className:"flex flex-row justify-between",children:[(0,a.jsx)("span",{className:"block text-wrap",children:e.label}),(0,a.jsx)("span",{className:"block text-right",children:e.value})]},t))})},eE=()=>{let{stockTimeSpan:e,setStockTimeSpan:t}=M();return(0,a.jsx)("div",{className:(0,c.cn)("flex grow-0 flex-row items-center text-muted-foreground w-fit","h-[40px] rounded-[20px] bg-muted"),children:T.map(s=>(0,a.jsx)("div",{className:(0,c.cn)("font-medium cursor-pointer","rounded-[20px] bg-muted px-4 py-2","hover:bg-muted-foreground/10",e===s&&"bg-muted-foreground/10 text-primary"),onClick:()=>t(s),children:s},s))})},e_=()=>{let{route:e}=(0,C.wK)(),t="finance"===e.page?e.ticker:"",s=(0,b.jE)();return(0,f.useEffect)(()=>{T.forEach(async e=>{await s.prefetchQuery({queryKey:[B,t,e],queryFn:()=>y.rA.financeGetStockChartData({ticker:t,timespan:e})})})},[s,t]),(0,a.jsxs)("div",{className:"flex flex-col gap-2 py-2",children:[(0,a.jsx)(eE,{}),(0,a.jsx)(eC,{}),(0,a.jsx)(eI,{}),(0,a.jsx)(eS,{})]})},ez=e=>{var t,s,n,l,i,r,o,u,m,h,x,f;let{tickerOverview:p}=e,{i18n:g}=(0,d.Bd)("finance"),v=(0,U.h)(!0,g.language),j=null!=(o=null==(t=p.ticker)?void 0:t.toUpperCase())?o:"",y=j in N.s?N.s[j]:null,{push:b}=(0,C.wK)(),w=null!=(u=null==(s=p.financeValue)?void 0:s.change)?u:0,k=null!=(m=null==(n=p.financeValue)?void 0:n.changePercent)?m:0;return(0,a.jsxs)("div",{className:(0,c.cn)("flex flex-col rounded-[16px] px-3 py-3 h-[90px] w-full text-sm text-fg-secondary","border hover:bg-muted/50 gap-1 cursor-pointer"),onClick:()=>{b({page:"finance",ticker:j})},children:[(0,a.jsxs)("div",{className:"flex flex-row gap-2 self-start w-full",children:[(0,a.jsx)("div",{className:"flex",children:y&&(0,a.jsx)("img",{src:y,alt:j,className:"w-10 h-10 rounded-md"})}),(0,a.jsxs)("div",{className:"flex-1 flex-col gap-1 overflow-hidden",children:[(0,a.jsx)("span",{className:"flex text-primary",children:p.ticker}),(0,a.jsx)("span",{className:"sm:block w-full text-ellipsis whitespace-nowrap overflow-hidden",children:null!=(h=null==(l=p.stockOverview)?void 0:l.name)?h:""})]})]}),(0,a.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,a.jsx)("span",{className:"text-primary",children:v(null!=(x=null==(i=p.financeValue)?void 0:i.value)?x:0,null!=(f=null==(r=p.financeValue)?void 0:r.unit)?f:"$")}),(0,a.jsx)(W.p,{value:w,formatter:e=>{var t,s;return v(e,null!=(s=null==(t=p.financeValue)?void 0:t.unit)?s:"$")}}),(0,a.jsx)(W.p,{value:k,formatter:e=>"".concat(e.toFixed(2),"%"),prefix:"(",suffix:")"})]})]})},eP=()=>{var e;let{route:t}=(0,C.wK)(),s="finance"===t.page?t.ticker:"",{t:n}=(0,d.Bd)("finance"),{data:l,isLoading:i}=(0,b.IT)({queryKey:["stock_related_tickers",s],queryFn:()=>y.rA.financeGetRelatedTickers({ticker:s}),enabled:!!s});return(0,a.jsxs)("div",{className:"flex flex-col gap-2 p-2",children:[(0,a.jsx)("h1",{children:n("title.relatedStocks","Related Stocks")}),(0,a.jsx)("div",{className:"grid grid-cols-[repeat(auto-fill,minmax(220px,1fr))] gap-4",children:i?(0,a.jsx)(I,{className:"w-full h-[200px] rounded-md"}):Object.entries(null!=(e=null==l?void 0:l.relatedTickers)?e:{}).map(e=>{let[t,s]=e;return(0,a.jsx)(ez,{tickerOverview:s},t)})})]})},eM=()=>(0,a.jsx)("div",{className:"flex flex-grow-1 flex-col h-full p-2 overflow-y-hidden gap-2",children:(0,a.jsxs)("div",{className:"flex flex-col gap-2 min-w-full overflow-y-scroll",children:[(0,a.jsx)(e_,{}),(0,a.jsx)(eP,{})]})}),eR=()=>{let e=M(L.A("financeItem"));return(0,a.jsxs)("div",{className:"flex flex-col grow-1 h-full w-full overflow-hidden ",children:[(0,a.jsx)(O,{}),"overview"===e&&(0,a.jsx)(eM,{}),"financials"===e&&(0,a.jsx)(ec,{})]})},eA=()=>(0,a.jsxs)("div",{className:"flex flex-col h-full min-h-full",children:[(0,a.jsx)(R,{}),(0,a.jsx)(eR,{})]});var eD=s(36401),eT=s(88261),eB=s(44465),eF=s(51459),eL=s(35181),eG=s(48992),eO=s(17703),eU=s(49972),eq=s(97960),eW=s(44347),eK=s(20337);let eV=(0,f.memo)(function(e){let{activeArtifact:t,onArtifactSelected:s,restrictedModel:n=!1}=e,{t:i}=(0,d.Bd)("finance"),r=(0,l.aP)(L.A("setShowStreamingIndicator")),o=(0,l.aP)(L.A("conversationId")),c=(0,l.aP)(L.A("setConversationId")),{route:u,push:m}=(0,C.wK)(),h="finance"===u.page?u.ticker:void 0,x="finance"===u.page?u.conversationId:void 0,p="finance"===u.page?u.query:void 0,g=null!=x?x:o,v=(0,eU.w1)(L.A("fetchGetConversation")),{data:j,isLoading:y,error:b}=(0,eL.v)(g?v(g):void 0);(0,f.useEffect)(()=>{c(null!=g?g:void 0),m({page:"finance",ticker:null!=h?h:"",conversationId:null!=g?g:void 0})},[g,m,h,c]),(0,f.useEffect)(()=>{let e=eq.A3.getState();(null==j?void 0:j.conversationId)&&e.loadInitialResponses(null==j?void 0:j.conversationId).then(e=>{var t;let s=l.aP.getState();if(s.conversationId===(null==(t=e[0])?void 0:t.conversationId)){let t=(0,eG.Mb)(e);if(!t)return void s.setLastMessageId(void 0);if("streaming"===t.state||"reconnecting"===t.state){s.setLastMessageId(t.parentResponseId),s.setStreamedMessageId(t.responseId);return}if("optimistic"===t.state){s.setLastMessageId(t.parentResponseId),s.setOptimisticMessageId(t.responseId);return}s.setLastMessageId(t.responseId)}})},[j]);let k=function(){let{client:e}=(0,eK.useStatsigClient)(),t=(0,l.aP)(L.A("establishNewConversation")),s=(0,eW.C$)(L.A("isIncognito")),a=(0,w.h)(),{route:n}=(0,C.wK)(),i="finance"===n.page?n.ticker:void 0,r=i?"You are a finance expert. User is looking at finance page for stock ticker for ".concat(i,", containing price, stock chart data and financial data. If user question is ambiguous, assume that their question is about the ").concat(i,"."):void 0;return(0,f.useCallback)(async n=>{let{query:l,webpageUrls:i,toolOverrides:o,isPreset:c,persona:d,disableMemory:u}=n;return!!l&&(e.logEvent("finance.start-convo"),!!await t({message:l,webpageUrls:i,toolOverrides:o,temporary:s,isPreset:c,persona:d,enableRetries:a.ENABLE_AUTO_STREAM_RETRY,responseMetadata:void 0,isFromGrokFiles:!1,ff:a,disableMemory:u,customInstructions:r}).catch(e=>{(0,eO.vV)("workspace:establishNewConversation",e)}))},[t,s,a,e,r])}();return((0,f.useEffect)(()=>(r(!0),()=>r(!1)),[r]),g||j)?g&&!j?null:(0,a.jsx)(eT.uI,{artifact:{onOpen:null!=s?s:()=>{},onClear:()=>{},active:t,isShowInlineOption:!1,isSidebar:!1},isShowFileAttachments:!1,lastMessageScrollPadding:100,children:(0,a.jsx)("div",{className:"relative h-full",children:(0,a.jsx)(eD.T,{conversationId:null!=g?g:"",conversation:j,isOptimisticConversation:!1,conversationIsLoading:y,conversationError:b,noTopBar:!0,hideFollowUps:!0,restrictedModel:n})})}):(0,a.jsx)("div",{className:"relative h-full",children:(0,a.jsxs)("div",{className:"flex flex-col justify-between h-full",children:[(0,a.jsx)("div",{className:"flex-1 flex flex-col justify-center items-center",children:(0,a.jsx)(e$,{onQuery:k})}),(0,a.jsx)("div",{className:"flex flex-col justify-end  pb-4 px-5",children:(0,a.jsx)(eF.s,{className:"",textAreaClassName:"min-h-14 pt-5 my-0 mb-5",placeholder:i("finance-query-placeholder","Start a conversation about {{ticker}}",{ticker:h}),initialValue:null!=p?p:void 0,onQuery:k,isIncognito:!1,onFrontPage:!1,expandable:!1,restrictedModel:n},"query-bar")})]})})}),e$=e=>{let{onQuery:t}=e,{t:s}=(0,d.Bd)("finance"),n=(0,f.useRef)([]);return((0,f.useEffect)(()=>{let e=[];e=[s("finance-query-placeholder-ask-about-stock","Tell me about the stock"),s("finance-query-placeholder-ask-about-company","Tell me about the company"),s("finance-query-placeholder-ask-about-industry","Tell me about the industry"),s("finance-query-placeholder-ask-about-market","Tell me about the market"),s("finance-query-placeholder-ask-about-economy","Tell me about the economy")],n.current=(0,eB.N)(e,Math.random()).slice(0,3)},[s]),0===n.current.length)?null:(0,a.jsxs)("div",{className:"flex flex-col gap-2 items-center justify-center",children:[(0,a.jsx)("span",{className:"text-sm text-secondary mb-1",children:s("workspace-query-try-placeholders","Try these")}),n.current.map(e=>(0,a.jsx)(h.$n,{variant:"outline",onClick:()=>t({query:e}),rounded:!0,children:e},e))]})};function eH(e){let{onRetryRequested:t,title:s,message:n}=e,{t:l}=(0,d.Bd)("finance");return(0,a.jsxs)("div",{className:(0,c.cn)("flex flex-col items-center justify-center h-full w-full p-4"),children:[(0,a.jsx)(m.hcu,{className:"mb-4",size:24}),(0,a.jsx)("h2",{className:"text-md font-semibold mb-2",children:s||l("finance-open-error.title","Could not load page")}),(0,a.jsx)("p",{className:"text-sm text-fg-secondary mb-4 text-center max-w-sm",children:n||l("finance-open-error.message","Something went wrong while trying to load the page.")}),t&&(0,a.jsxs)(h.$n,{variant:"outline",size:"md",onClick:t,className:"flex items-center gap-2",children:[(0,a.jsx)(m.e9t,{size:16,className:"text-fg-secondary"}),(0,a.jsx)("span",{className:"text-fg-primary font-semibold",children:l("file-open-error.retry","Retry")})]})]})}var eY=s(33231),eQ=s(5663),eX=s(23232);function eJ(){let{t:e}=(0,d.Bd)("finance"),{isChatOpen:t,setIsChatOpen:s}=M(),n=(0,l.aP)(e=>e.setConversationId),{push:i,route:r}=(0,C.wK)(),o=(0,eX._)(),c="finance"===r.page?r.ticker:void 0,f="finance"===r.page&&!r.conversationId;return(0,eY.v)(eQ.Ib,e=>{e.preventDefault(),e.stopPropagation(),i({page:"finance",ticker:null!=c?c:""}),o("pressed_cmd_j",void 0,{location:"finance-page:useHotkeys"})},[o,i]),(0,a.jsxs)(p.YZ,{direction:"horizontal",autoSaveId:"finance-workbench",className:"bg-surface-l1 dark:bg-surface-inset",children:[(0,a.jsx)(p.Zk,{order:1,minSize:50,defaultSize:100,className:"flex flex-col max-h-[100vh] h-[100vh]",children:(0,a.jsx)("div",{className:"flex flex-col h-full max-h-full",children:(0,a.jsx)("div",{className:"flex-1 relative overflow-hidden",children:(0,a.jsx)("div",{className:"w-full max-w-full relative h-full max-h-full",children:(0,a.jsx)(u.t,{fallbackRender:()=>(0,a.jsx)(eH,{}),children:(0,a.jsx)(eA,{})})})})})}),(0,a.jsx)(x.X,{className:"my-10 border-transparent"}),(0,a.jsxs)(eZ,{isOpen:t,minSize:36,defaultSize:36,children:[(0,a.jsxs)("header",{className:"px-4 flex items-center justify-between gap-2 h-header-height h-full",children:[(0,a.jsx)("div",{className:"font-semibold select-none px-1",children:e("finance-tab-conversation-header","Finance Chat")}),(0,a.jsxs)("div",{className:"flex gap-1",children:[(0,a.jsx)(h.gx,{tooltipContent:e("New Chat","New Chat"),tooltipContentProps:{className:"text-xs"},tooltipProps:{delayDuration:300},variant:"ghost",size:"iconSm",disabled:f,className:"rounded-full no-a11y-check text-secondary",onClick:()=>{i({page:"finance",ticker:null!=c?c:"",conversationId:null}),n(void 0)},children:(0,a.jsx)(m.cJ,{size:18})}),(0,a.jsx)(h.gx,{tooltipContent:e("Close Chat","Close Chat"),tooltipContentProps:{className:"text-xs"},tooltipProps:{delayDuration:300},variant:"ghost",size:"iconSm",className:"rounded-full no-a11y-check text-secondary",onClick:()=>s(!1),children:(0,a.jsx)(m.uv5,{size:18})})]})]}),(0,a.jsx)("section",{className:"flex-1 overflow-hidden [&_.chat-input-backdrop]:bg-background dark:[&_.chat-input-backdrop]:bg-surface-l1",children:(0,a.jsx)(eV,{})})]})]})}let eZ=e=>{let{isOpen:t,minSize:s,defaultSize:n,children:l}=e,i=(0,f.useRef)(!1);return(0,f.useEffect)(()=>{let e=setTimeout(()=>{i.current=!0},1e3);return()=>clearTimeout(e)},[]),(0,a.jsx)(p.Zk,{order:2,minSize:s,defaultSize:n,className:(0,c.cn)("h-[100vh] right-0",i.current?"transition-all duration-300":void 0,t?"max-w-full w-full opacity-100":"w-0 max-w-0 opacity-0 py-0 pr-0"),children:(0,a.jsx)("div",{className:"dark:bg-surface-l1 bg-background h-full flex flex-col justify-between overflow-hidden border-l border-border-l1 flex-1",children:l})})};function e0(){let{t:e}=(0,d.Bd)("finance"),{user:t}=(0,o.useSession)();return t?(0,a.jsx)("main",{className:(0,c.cn)("w-full relative flex flex-col items-center h-full w-full"),children:(0,a.jsx)(eJ,{})}):(0,a.jsx)("main",{className:(0,c.cn)("w-screen h-dvh relative"),children:(0,a.jsx)(r.J,{title:e("Error","Error"),description:e("finance-page.error.anonymous-user","You must be logged in to access this page"),cta:e("finance-page-error.cta","Return home")})})}var e1=s(27502),e2=s(81541),e5=s(26144),e4=s(3575),e3=s(67169),e6=s(35169),e8=s(58271),e9=s(2280),e7=s(98585),te=s(59886),tt=s(16506);function ts(e){let{post:t,index:s,numImages:n,sizePx:l,isHovered:i}=e,[r]=(0,f.useState)(!0);return(0,a.jsx)("div",{className:(0,c.cn)("absolute top-0 left-0 w-[".concat(l,"px] h-[").concat(l,"px]"),"transition-transform duration-[".concat(i?200:300,"ms] ease-out")),style:{transform:"rotate(".concat(r?(-(3*n)+12*s)*(i?1.5:1):0,"deg) translateX(").concat(i?7*(s-1):3*(s-1),"px) scale(").concat(i?1.1:1,")")},children:(0,a.jsx)("img",{src:t.blobSrc||t.mediaUrl,alt:t.id,className:(0,c.cn)("w-full h-full object-cover rounded-xl",s===n-1&&"border-2  border-inner border-white")})})}function ta(e){let{sizePx:t=100}=e,s=(0,e3.B)(e=>e.fetchListMediaPosts),n=(0,e3.B)(e=>e.globalVideoProgress),l=(0,e3.B)(e=>e.favoritesList).slice(0,3).reverse(),i=l.length,[r,o]=(0,f.useState)(!1);return(0,f.useEffect)(()=>{s({source:"MEDIA_POST_SOURCE_LIKED"}).catch((0,eO.HX)("imagine-fav-pile"))},[s]),(0,a.jsxs)("div",{className:"relative w-[".concat(t,"px] h-[").concat(t,"px]"),onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),children:[l.map((e,s)=>(0,a.jsx)(ts,{post:e,index:s,numImages:i,sizePx:t,isHovered:r},e.id)),n.numberOfVideosInProgress>0&&n.progress<100&&(0,a.jsx)(tn,{sizePx:t,progress:n.progress,numInProgress:n.numberOfVideosInProgress})]})}function tn(e){let{sizePx:t=100,progress:s=0,numInProgress:n=0}=e,{resolvedTheme:l}=(0,tt.D)(),i="dark"===l;return(0,a.jsxs)("div",{className:"absolute top-2 right-0",children:[(0,a.jsx)("div",{className:"absolute -translate-x-1/2 -translate-y-1/2",children:(0,a.jsx)(te.t,{progressPercentage:s,size:.55*t,trackClassName:(0,c.cn)(i?"stroke-white/20":"stroke-black/10"),progressClassName:(0,c.cn)(i?"stroke-white":"stroke-black/70"),thickness:3,offsetDegrees:0})}),(0,a.jsx)("div",{className:"absolute -translate-x-1/2 -translate-y-1/2",children:(0,a.jsx)(tl,{sizePx:t,count:n})})]})}function tl(e){let{sizePx:t=100,count:s=0}=e;return(0,a.jsxs)("div",{className:"w-[${sizePx * 0.4}px] h-[${sizePx * 0.4}px]",children:[(0,a.jsx)("svg",{width:.4*t,height:.4*t,children:(0,a.jsx)("circle",{cx:.2*t,cy:.2*t,r:.2*t,fill:"#5D7BE2"})}),(0,a.jsx)("div",{className:"w-full h-full flex items-center justify-center absolute top-0 left-0 ",children:(0,a.jsx)("span",{className:"text-white text-sm font-semibold",children:s})})]})}var ti=s(86822),tr=s(39489),to=s(82767),tc=s(63278),td=s(4295);let tu=(0,f.memo)(function(e){let{setQuery:t,showFavorites:s,navigateOnQuery:n=!0,disableInput:l=!1}=e,{t:i}=(0,d.Bd)("imagine"),{push:r}=(0,C.wK)(),o=(0,ti.d)(e=>e.fetchGetAsset),u=(0,tr.v)(),m=(0,tc.S)(),[h,x]=(0,f.useState)(!1),p=(0,f.useCallback)(async e=>{var s;if((null==(s=e.fileAttachmentIds)?void 0:s.length)&&"string"==typeof e.fileAttachmentIds[0]){let t=await o({assetId:e.fileAttachmentIds[0]}),s="".concat(u.ASSET_SERVER_URL,"/").concat(t.key);await m(s)}else n&&r({page:"imagine"}),t(e.query||"");return!0},[n,t,o,m,r,u]),g=(0,f.useCallback)(()=>{x(!0)},[]);(0,f.useEffect)(()=>{h&&e3.B.getState().connectWebSocket()},[h]);let v=(0,td.c)();return(0,a.jsxs)("div",{className:(0,c.cn)("flex flex-row items-center gap-2 justify-center",v&&"mb-5"),children:[(0,a.jsx)(eF.s,{disabled:l,onChange:g,className:(0,c.cn)(to.Q,l&&"opacity-25 pointer-events-none"),expandable:!1,onFrontPage:!1,restrictedModel:!0,placeholder:l?"":i("imagine-query-bar-placeholder","Type to imagine"),onQuery:p}),s&&(0,a.jsx)(S.gx,{className:"h-full me-4",tooltipContent:i("imagine-favorites-button-label","Favorites"),variant:"none",size:"md",shape:"rectangle",onClick:()=>r({page:"imagine-favorites"}),children:(0,a.jsx)(ta,{sizePx:50})})]})});var tm=s(38362),th=s(80226),tx=s(4878),tf=s(80354);function tp(e,t){(0,eO.iu)(e,void 0,{location:"imagine-grid-card",...t})}function tg(e){var t,s,n;let{data:l,width:i}=e,{t:r}=(0,d.Bd)("imagine"),{push:o,route:u}=(0,C.wK)(),{ASSET_SERVER_URL:h}=(0,tr.v)(),x=(0,f.useRef)(null),p=(0,e3.B)(e=>e.byId[l.id||""]||e.favoritesById[l.id||""])||l,g=(0,e3.B)(e=>e.setImageDimensions),v=(0,e3.B)(e=>{var t;return(null!=(t=e.videoByMediaId[p.id])?t:[]).findLast(e=>(null==e?void 0:e.progress)===100)}),j=(null==(t=l.mimeType)?void 0:t.startsWith("video"))&&(null==(s=l.originalPost)?void 0:s.mediaUrl)||l.blobSrc||l.mediaUrl,y=i/(l.width||832),[b,w]=(0,f.useState)(j?[j]:[]),[k,N]=(0,f.useState)(null),[I,S]=(0,f.useState)({}),[E,_]=(0,f.useState)(!1),z=(null==v?void 0:v.videoUrl)||(null==v?void 0:v.mediaUrl),[P,M]=(0,f.useState)(!1),R=(0,f.useMemo)(()=>ex().debounce(M,200),[]),A=(0,f.useMemo)(()=>z&&P?(0,tx.kt)(h,z):null,[z,P,h]),D=p.moderated,T=(0,f.useMemo)(()=>{var e;return E&&!D&&(!!A||!l.isGenerated||l.isGenerated&&(null!=(e=l.progress)?e:0)>=100)},[l.isGenerated,l.progress,A,E,D]);(0,f.useEffect)(()=>{let e=x.current;if(!e||!z)return;let t=new IntersectionObserver(e=>R(e.some(e=>e.isIntersecting)),{root:null,rootMargin:"0px",threshold:.1});return t.observe(e),()=>{e&&t.unobserve(e),t.disconnect(),R.cancel()}},[x,z]),(0,f.useEffect)(()=>{j&&w(e=>e.includes(j)?e:[...e,j])},[j]),(0,f.useEffect)(()=>{k&&w(e=>{let t=e.indexOf(k);return e.length>1&&-1!==t?e.slice(t):e})},[k,w]);let B=(0,e3.B)(e=>e.smoothedVideoProgress[p.id]||e.smoothedVideoProgress[p.mediaPostId||""]),F=y*(l.height||1248);l.width&&l.height&&(F=i/(l.width/l.height));let L=(null==(n=p.userInteractionStatus)?void 0:n.likeStatus)===!0,G="number"==typeof B,O=G&&B<100,U=!!z||!!O,q=!!(G&&(O||!A));return(0,a.jsxs)("div",{ref:x,className:(0,c.cn)("relative group/media-post-masonry-card",E&&"hover:scale-[1.02] transition-transform duration-300 pointer-events-auto"),onClick:()=>{var e;if(!l.isGenerated||!((null!=(e=l.progress)?e:0)<100))tp("image_feed_image_selected",{source:{"imagine-feed":"feed","imagine-post":"rabbithole","imagine-favorites":"favorites"}[u.page]||"unknown"}),o({page:"imagine-post",postId:l.id})},children:[(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:(0,c.cn)(!E&&"hidden"),children:[b.map((e,t)=>(0,a.jsx)("img",{className:(0,c.cn)("opacity-".concat(I[e]||0," transition-opacity duration-500 ease-out rounded-2xl"),t>0&&"absolute top-0 left-0"),style:{width:i,height:F},onLoad:t=>{let s=t.target;g(l.id,s.width,s.height),_(!0),S(t=>({...t,[e]:1})),setTimeout(()=>{N(e)},500)},src:e,alt:"Generated image"},e)),E&&A&&(0,a.jsx)("video",{src:A,muted:!0,autoPlay:!0,controls:!1,loop:!0,playsInline:!0,poster:b[b.length-1]||void 0,style:{width:i,height:F},className:(0,c.cn)("absolute top-0 left-0 col-start-1 row-start-1  object-cover rounded-2xl","pointer-events-none"),children:r("video-unsupported.label","Your browser does not support the video tag.")}),q&&(0,a.jsxs)("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-100 h-100",children:[(0,a.jsx)("svg",{className:"size-12 text-black/35 absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2",children:(0,a.jsx)("circle",{cx:"50%",cy:"50%",r:"50%",fill:"#5D7BE2",strokeWidth:"0"})}),(0,a.jsx)(te.t,{progressPercentage:null!=B?B:0,size:60,thickness:7,trackClassName:"stroke-black/15",progressClassName:"stroke-white/90"}),(0,a.jsx)(m.jGG,{fill:"currentColor",strokeWidth:0,className:"animate-pulse size-6 text-white absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2"})]},"progress")]}),(0,a.jsx)(th.E,{pulse:!!O,className:(0,c.cn)("rounded-2xl",E&&"hidden"),style:{width:i,height:F}})]}),(0,a.jsx)("div",{className:T?"":"invisible",children:(0,a.jsx)(tv,{hasVideo:U,isLiked:L,postId:l.id})})]})}let tv=(0,f.memo)(e=>{let{hasVideo:t,isLiked:s,postId:n}=e,l=(0,e3.B)(e=>e.like),i=(0,e3.B)(e=>e.unlike),r=(0,e3.B)(e=>e.generateVideoForImage),{t:o}=(0,d.Bd)("imagine");return(0,a.jsx)("div",{className:(0,c.cn)("absolute bottom-2 right-2","flex flex-row gap-2"),onClick:tf.Y,children:t?(0,a.jsx)(S.bJ,{tooltipContent:s?o("image-unlike-button.label","Unsave"):o("image-like-button.label","Save image"),className:(0,c.cn)("bg-black/25 hover:bg-white/10 border border-white/15 border-opacity-10","group-hover/media-post-masonry-card:opacity-100","opacity-0"),shape:"circle",size:"md",variant:"none",onClick:()=>s?i(n):l(n),children:(0,a.jsx)(m.C3E,{className:(0,c.cn)("size-4","text-white"),fill:s?"currentColor":"none",stroke:s?"none":"currentColor"})}):(0,a.jsx)(S.bJ,{tooltipContent:o("image-make-video-button.label","Make video"),className:"bg-black/25 hover:bg-white/10 border border-white/15 border-opacity-10",shape:"circle",size:"md",variant:"none",onClick:()=>{tp("image_feed_video_generation_started",{location:"imagine-grid-card",mode:"normal",source:"feed_video_button"}),r(n,"normal","imagine-grid-card").then(()=>tp("image_feed_video_generated",{location:"imagine-grid-card",mode:"normal"})).catch(e=>{let t,s="Unknown",a="Unknown",n="Unknown";e instanceof Error?(t=e.message,s=e.name,a=e.cause?String(e.cause):"",n=e.stack?e.stack:""):t="string"==typeof e?e:String(e),tp("image_feed_video_generation_error",{location:"imagine-grid-card",mode:"normal",message:t,error:s,cause:a,stack:n}),(0,eO.vV)("imagine-grid-card",e)})},children:(0,a.jsx)(m.jGG,{fill:"currentColor",strokeWidth:0,className:"size-4 text-white"})})})});var tj=s(56078),ty=s(12635),tb=s(14908),tw=s(58711);let tk=[];function tN(){let e=(0,e3.B)(e=>e.videoGenModerated),t=(0,e3.B)(e=>e.requestRateLimited),s=(0,e3.B)(e=>e.requestRejected),{t:n}=(0,d.Bd)("imagine");(0,f.useEffect)(()=>{if(e){let e=n("Content Moderated","Content Moderated. Try a different idea.");tb.oR.error((0,a.jsx)(tI,{text:e,upsell:!1}))}if(t){let e=n("Imagine Request Rate Limited","Image limit reached"),t=n("Imagine Request Rate Limited CTA","Upgrade to unlock more");tb.oR.error((0,a.jsx)(tI,{text:e,secondaryText:t,upsell:!0}),{duration:2e4})}if(s){let e=n("Imagine Request Rejected","Request Rejected.");tb.oR.error((0,a.jsx)(tI,{text:e,upsell:!1}))}},[e,n,t,s])}function tI(e){let{text:t,secondaryText:s,upsell:n}=e,l=(0,tw.e3)(L.A("setIsUpselling")),{t:i}=(0,d.Bd)("base");return(0,a.jsxs)("div",{className:"flex items-center gap-3 font-semibold",children:[(0,a.jsx)(m.hcu,{className:"h-5 w-5 flex-shrink-0"}),(0,a.jsxs)("span",{children:[t,s&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("br",{}),(0,a.jsx)("span",{className:"text-secondary font-medium",children:s})]})]}),n&&(0,a.jsx)(h.$n,{variant:"primary",className:"font-medium ms-4",onClick:()=>{l(!0)},children:i("Upgrade","Upgrade")})]})}function tC(e){let{prompt:t,scrollContainerRef:s,postId:a,freezeLoading:n,width:l,height:i,isInitial:r,positionerConfig:o}=e,{masonryRender:d}=function(e){var t,s;let{prompt:a,scrollContainerRef:n,postId:l,freezeLoading:i,width:r,height:o,isInitial:d,positionerConfig:u}=e,m=(0,f.useRef)(0),h=(0,f.useRef)(null),{items:x,maybeLoadMore:p}=function(e){var t,s;let a=!(arguments.length>1)||void 0===arguments[1]||arguments[1],n=arguments.length>2?arguments[2]:void 0,l=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,{ENABLE_IMAGINE_WEBSOCKET_CONSOLE_LOGGING:r}=(0,w.h)(),o=(0,e3.B)(e=>e.switchContext),c=(0,e3.B)(e=>e.fetchImageGen),d=(0,e3.B)(e=>e.fetchImageGenMore),u=(0,e3.B)(e=>e.setEnableWebSocketConsoleLogging),m=e+(n?"-".concat(n):""),h=(0,e3.B)(e=>e.firstFetchStatus[m]),x=null!=(s=(0,e3.B)(e=>e.byPrompt[m]))?s:tk,p=(0,f.useRef)(!1),g=(0,f.useRef)(a);g.current=a,(0,f.useEffect)(()=>{r&&u(!0)},[r,u]);let v=x&&(null==(t=x[0])?void 0:t.blobSrc)?x[0]:null,j=(0,f.useMemo)(()=>{var t,s;return null!=(s=null!=(t=null==v?void 0:v.prompt)?t:e)?s:""},[v,e]),y=(0,f.useCallback)((e,t)=>g.current||!t,[g]),b=(0,f.useCallback)(async()=>{j&&a&&await d(j,m,y)},[d,j,a,m,y]),k=function(e,t){let s=!(arguments.length>2)||void 0===arguments[2]||arguments[2],a=(0,f.useRef)(!1),n=(0,f.useRef)(!1),l=(0,f.useRef)(0),i=(0,f.useRef)(2),r=(0,f.useRef)(0),o=(0,f.useRef)(0);(0,f.useEffect)(()=>(n.current=!0,()=>{n.current=!1}),[]),r.current=Math.max(t,r.current);let c=(0,f.useCallback)(async(t,c)=>{if(c>-1&&(o.current=c),!a.current&&s){for(a.current=!0;n.current&&o.current+2>=r.current;){if(l.current>=i.current){await new Promise(e=>setTimeout(e,100));continue}r.current+=4,e().then(()=>{l.current--}).catch(e=>{l.current--,(0,eO.vV)("useInfiniteImagineLoader:fetchMoreFn",e)}),l.current++}a.current=!1}},[e,s]);return(0,f.useEffect)(()=>{s&&n.current&&o.current+2>=r.current&&c(-1,-1).catch(e=>{(0,eO.vV)("useInfiniteImagineLoader:fetcher",e)})},[s,c,n,o,r]),c}(b,x.length,"complete"===h);return(0,f.useEffect)(()=>{!p.current&&(p.current=!0,a&&("complete"===h?j&&o(j):e&&!h&&c(e,!!l,m,y).then(()=>{}).catch(e=>{(0,eO.vV)("useImageGenQuery:fetchImageGen",e)})))},[e,a,n,m,l,y,h,j]),{items:(0,f.useMemo)(()=>{let e=x;if(a){e=x;let t=i?x.length%i:0,s=i;t&&i&&(s=i-t),e=[...x,...Array(s).fill(null).map((e,t)=>({id:"placeholder-".concat(t),progress:0,mediaUrl:""}))]}else if(e=x.filter(e=>100===e.progress),i){let t=e.length%i;e.length=e.length-t}return e},[x,a,i]),fetchMore:b,maybeLoadMore:k,fullPrompt:j}}(a,!i,l,d,m.current);(0,f.useEffect)(()=>{setTimeout(()=>{n.current&&n.current.focus()},100)},[n]);let g=(0,f.useRef)(1),{offset:v}=(0,tj.Y)(h,[Math.random()]),{scrollTop:j,isScrolling:y}=(0,e8.a)(n,{offset:v-100});y&&(g.current=2);let b=tM("imagine-masonry-section-".concat(l),x.length,{width:r,...tS,...u},[]);m.current=b.columnCount;let k=(o||832)-Math.max(0,null!=(s=null==(t=h.current)?void 0:t.getBoundingClientRect().top)?s:0),N=(0,e5.w)(b);return{masonryRender:(0,e4.P)({className:(0,c.cn)("max-w-[646px] mx-auto min-h-[90vh]",i?"min-h-10":"min-h-[100vh]"),positioner:b,resizeObserver:N,scrollTop:j,isScrolling:y,height:k,overscanBy:g.current,itemHeightEstimate:650,containerRef:h,items:x,render:tg,onRender:i?void 0:p,role:"list"})}}({prompt:t,scrollContainerRef:s,postId:a,freezeLoading:n,width:l,height:i,isInitial:r,positionerConfig:o});return d}let tS={columnGutter:8,maxColumnCount:2};function tE(e){let{prompt:t,widthStyle:s="full",initExpanded:n=!1}=e,[l,i]=(0,f.useState)(n);return t?(0,a.jsx)("div",{onClick:()=>i(!0),className:(0,c.cn)("border-border-l2 border bg-surface-l1 rounded-full px-4 py-2","fit"===s&&"w-fit",!l&&"truncate rounded-full",l&&"rounded-3xl"),children:null!=t?t:"Nothing"}):null}let t_=e=>{let t=0;do t+=e.offsetTop||0,e=e.offsetParent;while(e);return t},tz=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!e||!t)return;let a=t.scrollTop,n=performance.now(),l=1/60,i=r=>{let o=(r-n)/1e3;n=r;let c=t_(e)-s,d=1-Math.pow(.9,o/l);t.scrollTop=a+=(c-a)*d,Math.abs(a-c)>2&&requestAnimationFrame(i)};requestAnimationFrame(i)},tP=(e,t)=>{(0,f.useEffect)(()=>{let s=e.current,a=()=>{var e;let a=null!=(e=null==s?void 0:s.scrollTop)?e:0;e3._.setState(e=>({...e,scrollPositionByPageId:{...e.scrollPositionByPageId,[t]:a}}))};if(s){let e=e3._.getState().getScrollPosition(t);e&&(s.scrollTop=e),s.addEventListener("scroll",a)}return()=>{s&&s.removeEventListener("scroll",a)}},[e,t])},tM=(e,t,s,a)=>{let{width:n,columnWidth:l=200,columnGutter:i=0,rowGutter:r,columnCount:o,maxColumnCount:c,maxColumnWidth:d}=s,[u,m]=tR(n,l,i,o,c,d),h=[e,n,u,m,i,r,...a].join("-"),x=(0,f.useRef)(h),p=e3._.getState().getPositioner(h,t);return p||(p=function(){let e=(0,ty.L)(m,u,i,r);return e3._.getState().setPositioner(h,e,t),x.current&&x.current!==h&&e3._.getState().setPositioner(x.current,void 0,t),x.current=h,e}()),p},tR=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,a=arguments.length>3?arguments[3]:void 0,n=arguments.length>4?arguments[4]:void 0,l=arguments.length>5?arguments[5]:void 0;a=a||Math.min(Math.floor((e+s)/(t+s)),n||1/0)||1;let i=Math.floor((e-s*(a-1))/a);return void 0!==l&&i>l&&(i=l),1===a&&(i=e),[i,a]};var tA=s(69643),tD=s(20301),tT=s(41320);function tB(e,t){(0,eO.iu)(e,void 0,{location:"imagine-feed",...t})}function tF(e){let{variant:t="default"}=e,s=(0,w.h)(),n=(0,e3.B)(e=>e.homeGenPrompts),l=(0,e3.B)(e=>e.pushHomeGenPrompt),i=(0,e3.B)(e=>e.resetImageGen),r=(0,e3.B)(e=>e.clearHomeGenPrompts),o="default"===t&&n.length>0,c=(0,f.useCallback)(e=>{o||i(),l(e)},[o,l,i]),d=n.length>0&&"default"===t?"query":t;return((0,f.useEffect)(()=>{let e=e=>{"Escape"===e.key&&("favorites"===d&&window.history.back(),"query"===d&&(i(),r()))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[r,i,d]),(0,f.useEffect)(()=>{"favorites"===d?tB("image_feed_gallery_opened"):"default"===d&&tB("image_feed_opened")},[d]),tN(),s.SHOW_IMAGINE)?(0,a.jsx)(tL,{variant:d,querys:n,setQuery:c},d):(0,a.jsx)(e1.default,{})}function tL(e){let{variant:t,querys:s,setQuery:n}=e,{t:l}=(0,d.Bd)("base"),i=(0,f.useRef)(null),r=(0,f.useRef)(null),u=(0,e9.tg)({ref:r}),{width:h,height:x}=(0,e6.X)(r),p=(0,e3.B)(e=>e.clearHomeGenPrompts),g=Math.min(h,"query"===t?1070:2290);tP(r,h>0?"imagine-page"+t:"");let{user:v}=(0,o.useSession)(),j=(0,f.useMemo)(()=>{let e="";return"favorites"===t&&(e=l("imagine-favorites-title","Favorites")),e&&(e=" / "+e),e},[t,l]),y=(0,tT.Di)();return(0,a.jsxs)("div",{className:"px-3 w-full relative",ref:i,children:[(0,a.jsx)(tm.g,{conversationId:void 0,containerRef:i,user:v,imageAttachmentsOnly:!0}),y&&(0,a.jsx)("div",{className:"-mx-3",children:(0,a.jsx)(tD.hx,{hideIncognito:!0,disableBackgroundGradient:!0})}),(0,a.jsxs)("div",{tabIndex:-1,className:"flex flex-col w-full h-dvh overflow-scroll items-center",ref:e=>{r.current=e},style:{outline:"none",scrollbarWidth:"none",...u},children:[(0,a.jsxs)("div",{className:(0,c.cn)("py-3 flex items-center gap-3 h-[4rem] w-full top-0",y&&"mt-14 px-2"),children:["favorites"===t||"query"===t?(0,a.jsx)(S.$n,{variant:"secondary",shape:"circle",size:"md","aria-label":l("imagine-back-button.label","Back"),onClick:"query"===t?p:()=>{window.history.back()},children:(0,a.jsx)(m.nkM,{className:"size-4"})}):null,(0,a.jsxs)("h1",{className:"text-lg font-semibold",children:[(0,a.jsx)("span",{className:"text-primary",children:l("imagine-title","Imagine")}),j&&(0,a.jsx)("span",{className:"text-secondary",children:j})]})]}),h>0&&(0,a.jsx)("div",{style:{maxWidth:"".concat(g,"px")},className:"w-full",children:"query"===t?(0,a.jsx)(tU,{queries:s,scrollContainerRef:r,postId:"home-grid",width:g,height:x}):(0,a.jsx)(tO,{containerRef:r,variant:t,width:g,height:x})})]}),(0,a.jsx)("div",{className:"absolute left-0 bottom-0 w-full p-3",children:(0,a.jsx)(tu,{setQuery:n,showFavorites:"favorites"!==t})})]})}function tG(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{width:e,columnWidth:250,maxColumnWidth:t?350:450,columnGutter:10,maxColumnCount:t?3:5}}function tO(e){let{containerRef:t,variant:s,width:a,height:n}=e,[l,i]=(0,tA.M)("visited-imagine",!1),r="favorites"===s?e7.ZW.MediaPostSourceLiked:e7.ZW.MediaPostSourcePublic,o=(0,e3.B)(e=>e.fetchListMediaPosts),c=(0,e2.H)(()=>o({source:r}),{});(0,f.useEffect)(()=>{setTimeout(()=>{window.dispatchEvent(new Event("resize")),i(!0)},100),d.length||o({source:r}).catch((0,eO.HX)("imagine-page"))},[]),(0,f.useEffect)(()=>{setTimeout(()=>{t.current&&t.current.focus()},100)},[t]);let d=(0,e3.B)(e=>"favorites"===s?e.favoritesList:e.list),u=tM("imagine-page-".concat(s),d.length,tG(a),[a]),m=(0,e5.w)(u),{scrollTop:h,isScrolling:x}=(0,e8.a)(t);return(0,e4.P)({positioner:u,resizeObserver:m,scrollTop:h,isScrolling:x,height:n||832,itemHeightEstimate:832,items:d,render:tg,onRender:c,overscanBy:"query"===s?1:2,itemKey:e=>e.id,role:"list"})}function tU(e){let{queries:t,scrollContainerRef:s,postId:n,width:l,height:i}=e,r=(0,f.useRef)(t.length);return(0,f.useEffect)(()=>{t.length<=1||r.current===t.length||setTimeout(()=>{let e="imagine-masonry-section-".concat(t.length-1),a=document.getElementById(e);a&&tz(a,s.current,80)},350)},[t.length,s,r]),(0,a.jsx)("div",{children:t.map((e,r)=>(0,a.jsxs)("div",{id:"imagine-masonry-section-".concat(r),className:"flex flex-col gap-3 mb-1",children:[(0,a.jsx)(tE,{prompt:e,widthStyle:"fit",initExpanded:!0}),(0,a.jsx)(tC,{prompt:e,scrollContainerRef:s,postId:n+"-"+r,width:l,height:i,positionerConfig:tG(l,!0),freezeLoading:r<t.length-1})]},"imagine-masonry-section-".concat(r)))})}var tq=s(28245),tW=s(73772),tK=s(12220),tV=s(77232),t$=s(40873),tH=s(94748),tY=s.n(tH);function tQ(e){let{value:t,onValueChange:s,className:n}=e,{t:l}=(0,d.Bd)("imagine"),i=(0,tT.Di)();return(0,a.jsxs)("div",{className:(0,c.cn)("flex p-0  rounded-full  bg-[#555]/75",{"gap-0":i},n),"aria-label":"Text alignment",onClick:e=>{e.stopPropagation(),s("video"===t?"image":"video")},children:[(0,a.jsxs)(S.$n,{shape:"circle",size:"md",variant:"video"===t?"secondary":"tertiary",className:(0,c.cn)("text-white border-0","video"===t?"bg-white/15  hover:bg-white/15":"bg-transparent hover:bg-white/10 text-white/50 hover:text-white"),onClick:e=>{e.stopPropagation(),s("video")},children:[(0,a.jsx)(m.Lc_,{className:"size-[20px]"}),(0,a.jsx)("span",{className:(0,c.cn)("font-semibold sr-only","video"===t?"text-primary":"text-secondary"),children:l("imagine-post-tab.video","Video")})]}),(0,a.jsxs)(S.$n,{shape:"circle",size:"md",variant:"image"===t?"secondary":"tertiary",className:(0,c.cn)(" text-white border-0","image"===t?"bg-white/15  hover:bg-white/15":"bg-transparent hover:bg-white/10 text-white/50 hover:text-white"),onClick:()=>s("image"),children:[(0,a.jsx)(m._V3,{className:"size-[20px]"}),(0,a.jsx)("span",{className:(0,c.cn)("font-semibold sr-only","image"===t?"text-primary":"text-secondary"),children:l("imagine-post-tab.image","Image")})]})]})}let tX=f.memo(function(e){let t,s,{mediaId:n,imageWidth:l,imageHeight:i,imageSrc:r,videoSrc:o,audioSrc:u,className:h,videoPlayingRef:x,firstTimeInteracted:p=!1}=e,{t:g}=(0,d.Bd)("imagine"),[v,j]=(0,f.useState)(o?"video":"image"),y=(0,f.useRef)(null),b=(0,f.useRef)(null),[w,k]=(0,tA.M)("imagine-mute-preference",!1),[N,I]=(0,f.useState)(!1),C=(0,f.useMemo)(()=>ex().debounce(I,500),[]),[E,_]=(0,f.useState)(!p),z=(0,f.useRef)(null);(0,f.useEffect)(()=>{let e=z.current;if(!e)return;let t=new IntersectionObserver(e=>C(e.some(e=>e.isIntersecting)),{root:null,rootMargin:"0px",threshold:.1});return t.observe(e),()=>{e&&t.unobserve(e),t.disconnect(),C.cancel()}},[z]);let P=w||!N||!E||"image"===v;(0,f.useEffect)(()=>{let e=y.current,t=b.current;e&&(e.muted=P),t&&(t.muted=P),!P&&t&&e&&(t.play(),t.currentTime=e.currentTime)},[P,E,o,u]),(0,f.useEffect)(()=>{x&&(x.current="video"===v)},[x,v]),(0,f.useEffect)(()=>{if(o){var e;j("video"),null==(e=y.current)||e.load()}},[o]),(0,f.useEffect)(()=>{y.current&&("image"===v?y.current.pause():"video"===v&&y.current.play())},[v]),(0,f.useEffect)(()=>{let e=y.current,t=b.current;if(!e||!t)return;let s=()=>{t.play(),t.currentTime=e.currentTime},a=()=>t.pause(),n=()=>{t.currentTime=e.currentTime},l=()=>{t.pause(),t.currentTime=0},i=()=>{t.currentTime=e.currentTime};return e.addEventListener("play",s),e.addEventListener("pause",a),e.addEventListener("seeking",n),e.addEventListener("ended",l),t.addEventListener("play",i),()=>{e.removeEventListener("play",s),e.removeEventListener("pause",a),e.removeEventListener("seeking",n),e.removeEventListener("ended",l),t.removeEventListener("play",i)}},[]);let M=(0,f.useCallback)(e=>{e.stopPropagation(),E?k(!w):(_(!0),k(!1))},[w,k,_,E]),R=w||!E,A=(0,e3.B)(e=>e.setImageDimensions),D=(0,f.useCallback)(e=>{let t=e.target;A(n,t.width,t.height)},[A,n]),T=(0,f.useMemo)(()=>(null!=l?l:832)/(null!=i?i:1248),[l,i]),B=window.innerHeight-160,{width:F}=(0,e6.X)(z);return T>F/B?(t=F,s=F/T):(s=B,t=B*T),(0,a.jsx)("div",{className:"w-full",ref:z,children:(0,a.jsxs)("div",{onClick:M,className:(0,c.cn)("relative mx-auto overflow-hidden rounded-2xl",h),style:{width:t,height:s},children:[(0,a.jsxs)("div",{className:"grid",children:[(0,a.jsx)("img",{onLoad:D,src:r,className:(0,c.cn)("col-start-1 row-start-1 w-full h-full object-cover","image"!==v&&"invisible pointer-events-none"),alt:g("generic-image-alt","Generated image")}),o&&(0,a.jsx)("video",{ref:y,src:o,playsInline:!0,muted:!0,autoPlay:!0,controls:!1,loop:!0,poster:r,className:(0,c.cn)("col-start-1 row-start-1 w-full h-full object-cover","video"!==v&&"invisible pointer-events-none"),children:g("video-unsupported.label","Your browser does not support the video tag.")})]}),o&&u&&(0,a.jsx)("audio",{ref:b,src:u,muted:!0,loop:!0,className:"hidden",children:g("audio-unsupported.label","Your browser does not support the audio tag.")}),(0,a.jsx)(tQ,{value:v,onValueChange:j,className:(0,c.cn)("absolute bottom-0 left-0 m-2",{hidden:!o})}),(0,a.jsxs)(S.$n,{shape:E?"circle":"pill",size:"md",variant:"secondary",className:(0,c.cn)("text-white absolute bottom-2 right-2 bg-[#555]/75   hover:bg-[#555]/100 border-0","video"!==v&&"hidden",!E&&" gap-4"),onClick:M,children:[R?(0,a.jsx)(m.ysl,{className:"size-[20px]"}):(0,a.jsx)(m.jIq,{className:"size-[20px]"}),(0,a.jsx)("span",{className:(0,c.cn)("font-semibold text-md",E&&"sr-only"),children:R?g("video-unmute-button.label","Unmute"):g("video-mute-button.label","Mute")})]})]})})}),tJ=[""];function tZ(e,t){(0,eO.iu)(e,void 0,{location:"imagine-rabbithole",...t})}let t0="linear-gradient(to bottom, black 85%, transparent 100%)",t1={maskImage:t0,WebkitMaskImage:t0,maskComposite:"add"},t2=!1,t5=!1;function t4(){let e=(0,w.h)(),{route:t}=(0,C.wK)(),s="imagine-post"===t.page?t.postId:(0,t$.Z)("only for imagine post page"),n=(0,e3.B)(e=>e.postPageSections[s])||tJ,l=(0,e3.B)(e=>e.pushPostPageSection),i=(0,td.c)(),r=(0,e3.B)(e=>!!(e.byId[s]||e.favoritesById[s])),[o,c]=(0,f.useState)(!1);r||function(){function e(e){("Space"===e.key||"Enter"===e.key)&&t()}function t(){setTimeout(()=>{t2=!1},500),document.removeEventListener("click",t,!0),document.removeEventListener("touchstart",t,!0),document.removeEventListener("touchend",t,!0),document.removeEventListener("mousedown",t,!0),document.removeEventListener("mouseup",t,!0),document.removeEventListener("dblclick",t,!0),document.removeEventListener("keydown",e,!0),document.removeEventListener("keyup",e,!0)}t5||(t5=!0,document.addEventListener("click",t,!0),document.addEventListener("touchstart",t,!0),document.addEventListener("touchend",t,!0),document.addEventListener("mousedown",t,!0),document.addEventListener("mouseup",t,!0),document.addEventListener("dblclick",t,!0),document.addEventListener("keydown",e,!0),document.addEventListener("keyup",e,!0),t2=!0)}();let d=i&&!r&&!e.DISABLE_IMAGINE_SHARE_APP_REDIRECT;return!e.SHOW_IMAGINE||d?(0,a.jsx)(e1.default,{}):(0,a.jsxs)("div",{className:"w-full relative",children:[(0,a.jsx)(t3,{queries:n,setDisableQueryBarInput:c}),(0,a.jsx)("div",{className:"absolute left-0 bottom-0 w-full p-3",children:(0,a.jsx)(tu,{setQuery:e=>l(s,e),showFavorites:!0,navigateOnQuery:!1,disableInput:o})})]},s)}function t3(e){var t,s,n,l,i,r,o,u,h;let{queries:x,setDisableQueryBarInput:p}=e,{ASSET_SERVER_URL:g}=(0,tr.v)(),{t:v}=(0,d.Bd)("imagine"),{route:j,push:y}=(0,C.wK)(),b="postId"in j?j.postId:"";tN();let w=(0,e3.B)(e=>e.fetchMediaPost),{isErrored:k,isLoading:N}=(0,eL.v)(w(b)),I=(0,e3.B)(e=>e.byId[b]||e.favoritesById[b]),E=(0,e3.B)(e=>{var t;return(null!=(t=e.videoByMediaId[b])?t:[]).findLast(e=>(null==e?void 0:e.progress)===100)});(null==I||null==(t=I.mimeType)?void 0:t.includes("video"))&&(E=I),(0,f.useEffect)(()=>{let e=e=>{"Escape"===e.key&&window.history.back()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[]);let _=(null==E?void 0:E.videoUrl)||(null==E?void 0:E.mediaUrl),z=null==E||null==(s=E.audioUrls)?void 0:s[0],P=null!=(o=null==E?void 0:E.id)?o:null==E?void 0:E.videoId,M=(0,f.useRef)(!1),R=(0,f.useRef)(null),A=(0,f.useRef)(null),{width:D}=(0,e6.X)(A),{height:T}=(0,e6.X)(R),B=(0,f.useRef)(x.length),F=(0,tT.Di)();tP(R,D>0?b:""),(0,f.useEffect)(()=>{if(x.length<=1||B.current===x.length)return;let e=setTimeout(()=>{let e="imagine-masonry-section-".concat(x.length-1),t=document.getElementById(e);t&&tz(t,R.current,80)},350);return()=>clearTimeout(e)},[B,x.length]),(0,f.useEffect)(()=>{setTimeout(()=>{window.dispatchEvent(new Event("resize"))},100)},[y,I]);let L=(null==I||null==(n=I.mimeType)?void 0:n.includes("video"))&&(null==I||null==(l=I.originalPost)?void 0:l.mediaUrl),G=L?null==I||null==(i=I.originalPost)?void 0:i.mediaUrl:null!=(u=null==I?void 0:I.blobSrc)?u:null==I?void 0:I.mediaUrl,O=L&&null!=(h=null==I||null==(r=I.originalPost)?void 0:r.prompt)?h:null==I?void 0:I.prompt,U=null==I?void 0:I.moderated;return((0,f.useEffect)(()=>{p(!O)},[O,p]),N&&!I)?"":I?(0,a.jsxs)("main",{tabIndex:-1,className:"w-full h-dvh relative overflow-y-auto",style:{outline:"none",scrollbarWidth:"none",...t1},ref:R,children:[(0,a.jsx)("div",{className:"h-0 sticky top-0 z-10 flex flex-row",children:(0,a.jsx)(S.$n,{variant:"secondary",shape:"circle",size:"md","aria-label":v("imagine-back-button.label","Back"),onClick:()=>window.history.back(),className:"sticky top-0 !bg-surface-l1 z-10 mt-2 mx-2",children:(0,a.jsx)(m.nkM,{className:"size-4"})})}),(0,a.jsxs)("article",{className:(0,c.cn)("max-w-[646px] my-4  mx-auto flex flex-col gap-4",F&&"my-0"),ref:A,children:[(0,a.jsx)("div",{children:(0,a.jsx)(tX,{firstTimeInteracted:t2,mediaId:I.id,imageWidth:I.width,imageHeight:I.height,imageSrc:G||"",videoSrc:(0,tx.kt)(g,_),audioSrc:(0,tx.kt)(g,z),videoPlayingRef:M})}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(t7,{post:I}),(0,a.jsx)(t9,{post:I,videoPlayingRef:M,videoUrl:_}),(0,a.jsx)(se,{post:I,videoPlayingRef:M,videoId:P})]}),!U&&(0,a.jsx)(t8,{post:I})]}),O&&D>0&&(0,a.jsx)(a.Fragment,{children:x.map((e,t)=>(0,a.jsxs)("div",{id:"imagine-masonry-section-".concat(t),className:"flex flex-col gap-4",children:[(0,a.jsx)(tE,{prompt:e||O,widthStyle:0===t?"full":"fit"}),(0,a.jsx)(tC,{isInitial:0===t,width:D,height:T,prompt:e||(null!=O?O:""),scrollContainerRef:R,postId:b+t,freezeLoading:t<x.length-1})]},"imagine-masonry-section-".concat(t)))})]})]}):""}let t6=A.z.object({display_name:A.z.string(),mode_name:A.z.string(),is_mature:A.z.boolean().optional()});function t8(e){let{post:t}=e,{t:s}=(0,d.Bd)("imagine"),{replace:n}=(0,C.wK)(),l=(0,e3.B)(e=>tY()(e.videoByMediaId[t.id])),i=(0,e3.B)(e=>e.fetchMediaPost),r=(0,e3.B)(e=>e.generateVideoForImage),o=(0,eW.C$)(e=>e.setShowAgeVerification),u=(0,eW.C$)(e=>e.setAgeVerificationCallback),h=(0,eW.C$)(e=>e.ageVerificationCallback),{stage:x}=(0,tq.S)(),p=function(){let e=(0,w.h)(),{stage:t}=(0,tq.S)();return(0,f.useMemo)(()=>{let s=[];for(let a of e.MEDIA_GEN_VIDEO_CONFIG.get("media_gen_video_prompt_available_modes",[])){let e=t6.safeParse(a);e.success&&("nopass"!==t||!e.data.is_mature)&&s.push(e.data)}return s},[e.MEDIA_GEN_VIDEO_CONFIG,t])}(),g=(0,e3.B)(e=>e.smoothedVideoProgress[t.id]||e.smoothedVideoProgress[t.mediaPostId||""]),v=e=>{let s=()=>{var s,a,l;tZ("image_feed_video_generation_started",{location:"imagine-post-page",mode:e.mode_name,source:"lightbox"});let o=null==(s=t.originalPost)?void 0:s.id;if(o)return void i(o).then(t=>{var s,a;r(null!=(a=null==(s=t.originalPost)?void 0:s.id)?a:t.id,e.mode_name,"imagine-post-page").then(()=>tZ("image_feed_video_generated",{location:"imagine-post-page",mode:e.mode_name})).catch(t=>{let s,a="Unknown",n="Unknown",l="Unknown";t instanceof Error?(s=t.message,a=t.name,n=t.cause?String(t.cause):"",l=t.stack?t.stack:""):s="string"==typeof t?t:String(t),tZ("image_feed_video_generation_error",{location:"imagine-post-page",message:s,mode:e.mode_name,error:a,cause:n,stack:l}),(0,eO.vV)("imagine-post-page",t)}),n({page:"imagine-post",postId:t.id})}).catch(e=>{tZ("image_feed_video_generation_error",{location:"imagine-post-page",message:"failed to fetch original post"}),(0,eO.vV)("imagine-post-page",e)});r(null!=(l=null==(a=t.originalPost)?void 0:a.id)?l:t.id,e.mode_name,"imagine-post-page").then(()=>tZ("image_feed_video_generated",{location:"imagine-post-page",mode:e.mode_name})).catch(t=>{let s,a="Unknown",n="Unknown",l="Unknown";t instanceof Error?(s=t.message,a=t.name,n=t.cause?String(t.cause):"",l=t.stack?t.stack:""):s="string"==typeof t?t:String(t),tZ("image_feed_video_generation_error",{location:"imagine-post-page",mode:e.mode_name,message:s,error:a,cause:n,stack:l}),(0,eO.vV)("imagine-post-page",t)})};if(!e.is_mature||"pass"===x)return void s();let a=()=>{s(),h===a&&u(void 0)};u(a),o(!0)};if("number"==typeof(null==l?void 0:l.progress)&&l.progress<100)return(0,a.jsxs)(S.$n,{shape:"pill",size:"md",variant:"secondary",className:(0,c.cn)(l&&"cursor-progress"),children:[(0,a.jsx)(m.jGG,{fill:"currentColor",strokeWidth:0,className:"size-4"}),(0,a.jsx)("span",{className:"w-[4ch]","aria-live":"polite",role:"status","aria-label":s("image-make-video-progres.aria","Video generation progress: {{progressValuePercentage}}%",{progressValuePercentage:l.progress}),children:s("image-make-video-progress.label","{{progressValuePercentage}}%",{progressValuePercentage:Math.round(null!=g?g:0)})})]});if(l)return(0,a.jsxs)(tW.rI,{children:[(0,a.jsx)(tW.ty,{asChild:!0,children:(0,a.jsxs)(S.$n,{shape:"pill",size:"md",variant:"secondary",className:"group",children:[(0,a.jsx)(m.jGG,{fill:"currentColor",strokeWidth:0,className:"size-4"}),s("video-redo-button.label","Redo"),(0,a.jsx)(m.yQN,{className:"size-4 group-data-[state=open]:rotate-180 transition-rotate duration-200"})]})}),(0,a.jsx)(tW.SQ,{align:"end",side:"bottom",children:p.map(e=>(0,a.jsx)(tW._2,{onSelect:()=>v(e),children:e.display_name},e.mode_name))})]});let j=p.find(e=>"normal"===e.mode_name)||p[0];return(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsxs)(S.$n,{shape:"pill",size:"md",variant:"secondary",onClick:()=>j&&v(j),className:"rounded-e-none border-r border-border-l2 pe-2",children:[(0,a.jsx)(m.jGG,{fill:"currentColor",strokeWidth:0,className:"size-4"}),s("image-make-video-button.label","Make video")]}),(0,a.jsxs)(tW.rI,{children:[(0,a.jsx)(tW.ty,{asChild:!0,children:(0,a.jsxs)(S.$n,{shape:"pill",size:"md",variant:"secondary",className:"group rounded-s-none border-s-0 ps-2 pe-3",children:[(0,a.jsx)(m.yQN,{className:"size-4 group-data-[state=open]:rotate-180 transition-rotate duration-200"}),(0,a.jsx)("span",{className:"sr-only",children:s("video-generation-model-selector.label","Pick style")})]})}),(0,a.jsx)(tW.SQ,{align:"end",side:"bottom",children:p.map(e=>(0,a.jsx)(tW._2,{onSelect:()=>v(e),children:e.display_name},e.mode_name))})]})]})}function t9(e){let{post:t,videoPlayingRef:s,videoUrl:n}=e,{t:l}=(0,d.Bd)("imagine"),{ASSET_SERVER_URL:i}=(0,tr.v)();return(0,a.jsxs)(S.$n,{shape:"circle",size:"md",variant:"secondary",onClick:()=>{tZ("image_feed_image_saved");let e=s.current?n:t.mediaUrl,a=(0,tx.kt)(i,e),l=s.current?"grok-video-".concat(t.id,".mp4"):"grok-image-".concat(t.id,".png");(0,tK.G)(a,l,!1).catch(e=>{(0,eO.vV)("imagine-post-page:downloadImage",e)})},children:[(0,a.jsx)(m.f5X,{className:"size-4"}),(0,a.jsx)("span",{className:"sr-only",children:l("image-download-button.label","Download image")})]})}function t7(e){var t;let{post:s}=e,{t:n}=(0,d.Bd)("imagine"),l=(0,e3.B)(e=>e.like),i=(0,e3.B)(e=>e.unlike),r=(null==(t=s.userInteractionStatus)?void 0:t.likeStatus)===!0;return(0,a.jsxs)(S.$n,{shape:"circle",size:"md",variant:"secondary",onClick:async()=>{r?await i(s.id):await l(s.id),r||tZ("image_feed_image_liked")},children:[(0,a.jsx)(m.C3E,{className:(0,c.cn)("size-4",r&&"text-red-400 dark:text-red-500"),fill:r?"currentColor":"none",stroke:r?"none":"currentColor"}),(0,a.jsx)("span",{className:"sr-only",children:r?n("image-unlike-button.label","Unsave"):n("image-like-button.label","Save image")})]})}function se(e){let{post:t,videoPlayingRef:s,videoId:n}=e,{t:l}=(0,d.Bd)("imagine"),i=(0,tT.Di)(),{route:r}=(0,C.wK)(),o=(0,e3.B)(e=>e.resolveMediaPostForMaybeGenerated),u=async()=>{var e;let a,i=(0,C.KQ)(r,window.location.origin),c=await o(t);if(s.current&&n){let e=new URL(i);e.pathname=e.pathname.replace(/\/post\/[^\/]+$/,"/post/".concat(n)),a=e.toString()}else if(c&&!i.includes(c.id)){let e=new URL(i);e.pathname=e.pathname.replace(/\/post\/[^\/]+$/,"/post/".concat(c.id)),a=e.toString()}else a=i;(0,tV.g)(a,l("image-share-copy-link-success","Public link copied")),tZ("image_feed_media_shared",{type:"copy_link",media:s.current?"video":"image",post_id:null!=(e=null==c?void 0:c.id)?e:t.id,post_link:a})};return(0,a.jsxs)(S.gx,{shape:i?"circle":"pill",size:"md",variant:"secondary",onClick:u,tooltipContent:l("image-share-button.public-warning","Anyone with the link can view this"),tooltipContentProps:{side:"bottom"},children:[(0,a.jsx)(m.SYj,{className:"size-4"}),(0,a.jsx)("span",{className:(0,c.cn)(i&&"sr-only"),children:l("image-share-button.label","Share")})]})}var st=s(38245),ss=s(13010),sa=s(42557),sn=s(35692),sl=s(43086),si=s(46748),sr=s(27636),so=s(73304),sc=s(35589),sd=s(39116);function su(e){let{children:t,numOfLines:s,...n}=e;return(0,a.jsx)("p",{style:{display:"-webkit-box",WebkitLineClamp:s,WebkitBoxOrient:"vertical",overflow:"hidden"},...n,children:t})}var sm=s(18921);function sh(e){let{task:t,onClick:s}=e,n=(0,eX._)(),{getScheduleLabel:l}=(0,sr.Ay)(),i=(0,so.d)(L.A("setCreateDialogIsOpen")),r=(0,so.d)(L.A("setTaskToEdit")),o=(0,f.useCallback)(()=>{n("task_preset_clicked",void 0,{location:"task-presets:handleClick"}),i(!0),r(t),null==s||s()},[s,i,r,n,t]),d=(0,sm.O$)(t),u=(0,f.useMemo)(()=>{var e,t;if(d)return l(d.cadence,d.timeOfDay,d.ianaTimezone,d.localDayOfWeek,d.localDayOfMonth,null!=(t=null==(e=d.localDayOfYear)?void 0:e.toISODate())?t:void 0)},[l,d]),{resolvedTheme:m}=(0,tt.D)();return(0,a.jsxs)("div",{className:(0,c.cn)("group h-40 grow w-full rounded-2xl pt-4 px-4 flex flex-col items-center gap-3 border cursor-pointer bg-surface-l1 hover:bg-surface-l2",{"hover:bg-surface-base":"light"===m}),onClick:o,children:[(0,a.jsx)("h1",{className:"font-semibold text-sm",children:t.cta||t.name}),(0,a.jsxs)("div",{className:"grow w-full rounded-t-xl border bg-surface-l2 overflow-hidden p-3 group-hover:bg-surface-l3",children:[(0,a.jsx)(su,{className:"text-xs text-fg-secondary font-normal mb-2",numOfLines:2,children:t.prompt}),(0,a.jsx)("p",{className:"text-xs font-normal",children:u})]})]})}var sx=s(62227);function sf(){let e=(0,sd.useRouter)(),{t}=(0,d.Bd)("base"),s=(0,eX._)(),n=new URLSearchParams({return_to:"".concat(location.pathname).concat(location.search).concat(location.hash)}).toString(),l=(0,f.useCallback)(()=>{s("sign_in_redirect",void 0,{location:"tasks-anon-page"}),e.push("/sign-in".concat(n?"?".concat(n):""))},[s,e,n]),i=(0,f.useCallback)(()=>{s("sign_up_redirect",void 0,{location:"tasks-anon-page"}),e.push("/sign-up".concat(n?"?".concat(n):""))},[s,e,n]);return(0,a.jsxs)("main",{className:"h-full flex flex-col justify-center",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold mb-4 text-center",children:"Unlock Automation with Grok Tasks"}),(0,a.jsxs)("p",{className:"mb-6 text-lg",children:["Discover ",(0,a.jsx)("strong",{children:"Tasks"}),"  your automation tool for scheduling recurring operations with Grok."]}),(0,a.jsx)(sp,{}),(0,a.jsxs)("p",{className:"font-semibold text-center mb-4",children:["Ready to get started? ",(0,a.jsx)("strong",{children:"Log in"})," to your Grok account now and create your first task today! If you don't have an account, signing up is quick and easy."]}),(0,a.jsxs)("div",{className:"flex justify-center gap-2",children:[(0,a.jsxs)(h.$n,{size:"pill",variant:"primary",className:"h-8 px-3 text-sm",onClick:i,children:[(0,a.jsx)(m.KJW,{size:16,strokeWidth:2}),(0,a.jsx)("div",{children:t("Sign up","Sign up")})]}),(0,a.jsx)(h.$n,{size:"pill",variant:"none",className:(0,c.cn)("hidden @sm:flex","h-8 px-3 text-sm text-primary bg-transparent ring-1 ring-inset ring-toggle-border","hover:bg-button-secondary-hover hover:border-text-secondary"),onClick:l,children:(0,a.jsx)("div",{children:t("Sign in","Sign in")})})]})]})}function sp(){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"What You Can Do with Tasks"}),(0,a.jsxs)("ul",{className:"list-disc pl-6 mb-6 space-y-2",children:[(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Create and Schedule"}),": Set up a new task in seconds. Define cron-like schedules and provide prompts to guide Grok's actions."]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Automated Operations"}),": Grok's LLM, with full internet access, executes your tasks on schedule  processing data, fetching information, and performing actions like sending emails or push notifications."]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Customize and Manage"}),": Tailor tasks to your needs, monitor executions, and edit schedules or prompts as required. Keep your automations organized and efficient."]})]}),(0,a.jsx)("p",{className:"mb-6",children:"Tasks are designed to make your Grok experience more automated, productive, and hands-off. Whether you're monitoring updates, sending reminders, or integrating workflows, Tasks handle it seamlessly."})]})}function sg(){return(0,sa.wV)().user?(0,a.jsx)(sv,{}):(0,a.jsxs)("div",{className:"h-dvh w-full relative selection:bg-highlight",children:[(0,a.jsx)(tD.hx,{hideIncognito:!0}),(0,a.jsx)("div",{className:"max-w-[50rem] px-2 pt-16 @sm:pt-18 mx-auto w-full flex-col h-full relative items-center",children:(0,a.jsx)(sf,{})}),(0,a.jsx)(ss.CommandMenu,{})]})}function sv(){let e=(0,w.h)(),{t}=(0,d.Bd)("tasks"),s=(0,eX._)(),n=(0,tT.Di)(),l=(0,so.d)(L.A("setSelectedTaskIdForSidePanel")),i=(0,so.d)(L.A("selectedTaskIdForSidePanel")),r=(0,so.d)(L.A("setTaskPageTabMode")),o=(0,so.d)(L.A("setCreateDialogIsOpen")),{route:u,replace:x}=(0,C.wK)(),p="tasks"===u.page&&u.taskId||null,g="tasks"===u.page&&u.tab||null;(0,f.useEffect)(()=>{p&&l(p),g&&r("active"===g?sm.RJ.ACTIVE:sm.RJ.ARCHIVED),x({page:"tasks",taskId:null,tab:null})},[p,g,l,r,x]);let[v,j]=(0,f.useState)({}),y=(0,so.d)(L.A("taskPageTabMode")),{taskPresets:b}=(0,sr.hB)(),k=(0,so.d)(L.A("userActiveTasks")),N=(0,so.d)(L.A("userInactiveTasks")),I=(0,so.d)(L.A("initialized")),S=(0,f.useCallback)((e,t)=>{j(s=>({...s,[e]:t}))},[j]);(0,f.useEffect)(()=>{let e=t("tasks-page-document-title","Tasks");document.title="".concat(e," - Grok")},[t]),(0,si.r)(t("tasks-page-document-title","Tasks")),(0,f.useEffect)(()=>{s("opened_tasks_page",void 0,{location:"tasks-page:useEffect"})},[s]);let E=!!(0,sa.wV)().user,_=e.ENABLE_GROK_TASKS&&E,z=(0,f.useRef)(null),[P,M]=(0,f.useState)(!0),[R,A]=(0,f.useState)(!1);(0,f.useEffect)(()=>{let e=()=>{if(z.current){let{scrollTop:e,scrollHeight:t,clientHeight:s}=z.current;0===e?M(!0):M(!1),e+s>=t-5?A(!0):A(!1)}},t=z.current;return t&&t.addEventListener("scroll",e),()=>{t&&t.removeEventListener("scroll",e)}},[z]);let D=(0,f.useCallback)(()=>{s("clicked_add_new_task",void 0,{location:"tasks-page"}),o(!0)},[o,s]),T=(0,f.useMemo)(()=>{if(y===sm.RJ.ACTIVE){var e;return e=k.filter(e=>{var t;return null==(t=e.task)?void 0:t.isActive}),e.sort((e,t)=>{var s,a,n,l;let i=v[null!=(n=null==(s=e.task)?void 0:s.taskId)?n:""],r=v[null!=(l=null==(a=t.task)?void 0:a.taskId)?l:""];return i&&r?sc.c9.fromISO(r).diff(sc.c9.fromISO(i)).toMillis():i?-1:1*!!r})}return y===sm.RJ.ARCHIVED?N.filter(e=>{var t;return!(null==(t=e.task)?void 0:t.isActive)}):[]},[y,k,v,N]),B=(0,f.useMemo)(()=>b.sort(()=>Math.random()-.5).slice(0,2),[b]);if(!_)return(0,sd.redirect)("/");let F=y===sm.RJ.ACTIVE&&T.length<=3;return(0,a.jsxs)("div",{className:(0,c.cn)("h-dvh w-full relative selection:bg-highlight",{"overflow-y-auto":n}),children:[!i&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(tD.hx,{hideIncognito:!0}),(0,a.jsx)(ss.CommandMenu,{})]}),(0,a.jsxs)("div",{className:(0,c.cn)("max-w-[50rem] px-5 pt-16 @sm:pt-18 mx-auto w-full flex flex-col h-full items-center pb-4","transition-all duration-300 spring"),style:R?{}:{maskImage:e9.pA,WebkitMaskImage:e9.pA},children:[(0,a.jsx)("div",{className:"flex justify-between align-center min-h-[42px] w-full",children:(0,a.jsxs)("div",{className:"flex justify-between items-center w-full",children:[(0,a.jsx)("div",{className:"flex items-center gap-2 group",children:(0,a.jsx)("h1",{className:"text-2xl flex gap-2 items-center font-semibold",children:t("tasks.page-title","Tasks")})}),(0,a.jsxs)(h.$n,{variant:"outline",onClick:D,size:"md",children:[(0,a.jsx)(m.FWt,{size:16}),(0,a.jsx)("span",{children:t("tasks.create","Add new")})]})]})}),I?(0,a.jsxs)("div",{className:"pt-6 w-full overflow-auto relative no-scrollbar",style:P?{}:{maskImage:e9.l1,WebkitMaskImage:e9.l1},ref:z,children:[0===T.length&&y===sm.RJ.ACTIVE&&(0,a.jsx)(sb,{onClick:D}),0===T.length&&y===sm.RJ.ARCHIVED&&(0,a.jsx)(sw,{}),(0,a.jsxs)("div",{className:(0,c.cn)("flex flex-col gap-4 pb-4 w-full "),children:[T.length>0&&T.filter(e=>!!e.task).map(e=>{if(e.task){var t;return(0,a.jsx)(sj,{task:e,updateTaskIdIsUnread:S},null==(t=e.task)?void 0:t.taskId)}}),F?(0,a.jsx)("div",{className:(0,c.cn)("pt-4 flex items-center pb-20",{"flex-col pb-8":n}),children:(0,a.jsx)("div",{className:(0,c.cn)("flex w-full gap-4",{"flex-col":n}),children:B.map((e,t)=>(0,a.jsx)(sh,{task:e},t))})}):null]})]}):(0,a.jsx)("div",{className:"grow shrink self-stretch flex items-center justify-center",children:(0,a.jsx)(sl.y,{size:"sm"})})]})]})}function sj(e){var t,s,n,l,i,r,o,u,x;let{task:p,updateTaskIdIsUnread:g}=e,{t:j}=(0,d.Bd)("tasks"),k=(0,eX._)(),{resolvedTheme:N}=(0,tt.D)(),I=(0,tT.Di)(),C=(0,so.d)(L.A("selectedTaskIdForSidePanel")),S=(0,so.d)(L.A("setSelectedTaskIdForSidePanel")),E=C===(null==(t=p.task)?void 0:t.taskId),[_,z]=(0,f.useState)(!1),P=(0,f.useCallback)(()=>{z(!0)},[z]),M=(0,f.useCallback)(()=>{z(!1)},[z]),R=(0,w.h)(),A=(0,f.useCallback)(()=>{var e;if(k("clicked_tasks_card",void 0,{location:"tasks-page:handleClick"}),E)return S(void 0);S(null==(e=p.task)?void 0:e.taskId)},[E,S,k,null==(s=p.task)?void 0:s.taskId]),D=null==(n=p.schedules)?void 0:n.at(0),{data:T}=(0,b.IT)({queryKey:["latest-task-result",null==(l=p.task)?void 0:l.taskId],queryFn:async()=>{var e;if(!(null==(e=p.task)?void 0:e.taskId))throw Error("TaskId is required");return y.Cs.grokTasksGetTaskResults({taskId:p.task.taskId,limit:1})},enabled:R.ENABLE_GROK_TASKS&&!!(null==(i=p.task)?void 0:i.taskId),staleTime:0,refetchOnMount:"always"}),B=null==T||null==(r=T.results)?void 0:r.at(0),F=!(null==(o=p.task)?void 0:o.isActive),G=!!(B&&!F),O=null==B?void 0:B.createTime;(0,f.useEffect)(()=>{var e,t;g(null!=(t=null==(e=p.task)?void 0:e.taskId)?t:"",O)},[g,null==(u=p.task)?void 0:u.taskId,O]);let U=!!((null==(x=p.task)?void 0:x.isActive)&&(null==D?void 0:D.isEnabled)),q=(0,so.d)(L.A("setTaskToEdit")),{pauseOrUnpauseTaskSchedule:W}=(0,sr.ek)(),K=(0,f.useCallback)(e=>{e.stopPropagation(),k("edit_task_clicked",void 0,{location:"tasks-side-panel:handleEditClick"}),q((0,sm.Yc)(p))},[q,p,k]),V=(0,f.useCallback)(e=>{e.stopPropagation(),k("pause_task_clicked",void 0,{location:"tasks-side-panel:handlePauseClick"}),W({enabled:!1,scheduleId:null==D?void 0:D.scheduleId})},[W,D,k]),$=(0,f.useCallback)(e=>{e.stopPropagation(),k("resume_task_clicked",void 0,{location:"tasks-side-panel:handleUnpauseClick"}),W({enabled:!0,scheduleId:null==D?void 0:D.scheduleId})},[W,D,k]);return p.task&&D?(0,a.jsxs)("div",{className:(0,c.cn)("w-full flex flex-col py-0 rounded-3xl border bg-surface-l1 hover:bg-surface-l2 cursor-pointer  relative",{"hover:bg-surface-base":"light"===N},{"bg-surface-l2 hover:bg-surface-l3":E},{"py-1":!(G&&B)},{"bg-surface-inset hover:bg-button-ghost-hover":E&&"light"===N}),onMouseEnter:P,onMouseLeave:M,onClick:A,children:[(0,a.jsxs)("div",{className:"flex flex-col px-5 py-3 gap-0.5",children:[(0,a.jsxs)("div",{className:"flex flex-row items-center justify-between",children:[(0,a.jsx)("h1",{className:(0,c.cn)("text-sm font-semibold line-clamp-1",{"text-xs":I}),children:p.task.name&&p.task.name.length>0?p.task.name:"Task"}),!I&&(0,a.jsx)("div",{children:_?(0,a.jsxs)("div",{className:"flex flow-row m-0 p-0 h-4 -mt-4 -mr-2",children:[(0,a.jsx)(h.$n,{className:"m-0 p-0",variant:"ghost",size:"iconSm",onClick:K,"aria-label":j("tasks-result.edit-label","Edit"),children:(0,a.jsx)(m.gHP,{size:12})}),U||F?(0,a.jsx)(h.$n,{variant:"ghost",size:"iconSm",onClick:V,"aria-label":j("tasks-result.pause-label","Pause"),children:(0,a.jsx)(m.vRz,{size:14})}):(0,a.jsx)(h.$n,{variant:"ghost",size:"iconSm",onClick:$,"aria-label":j("tasks-result.resume-label","Resume"),children:(0,a.jsx)(m.jGG,{size:14})})]}):(0,a.jsx)(sx.N,{task:D,isScheduled:U,iconPosition:"right"})})]}),I&&(0,a.jsx)(sx.N,{task:D,isScheduled:U})]}),(0,a.jsx)(v.N,{children:!I&&G&&B&&(0,a.jsx)("div",{className:"border-t-[0.5px]",children:(0,a.jsx)("div",{className:"w-full",children:(0,a.jsx)(sy,{taskResult:B})})})})]}):null}function sy(e){var t;let{taskResult:s}=e,{t:n}=(0,d.Bd)("tasks"),l=(0,tT.Di)(),i=(0,f.useMemo)(()=>{var e;if(!s.createTime)return null;let t=sc.c9.fromISO(s.createTime),a=sc.c9.now();return null!=(e=t.toRelative({base:a}))?e:n("just-now","Just now")},[n,s.createTime]);return(0,a.jsxs)("div",{className:"flex-nowrap px-5 pb-3 pt-2 flex items-center justify-between w-full text-sm h-full gap-0.5",children:[(0,a.jsxs)("div",{className:(0,c.cn)("flex items-center gap-1.5",{"justify-between w-full":l}),children:[!l&&(0,a.jsx)(m.oFn,{size:14,className:"text-fg-secondary "}),(0,a.jsx)("p",{className:"text-fg-secondary line-clamp-1",children:null!=(t=s.title)?t:n("new-task-result-label","New task result")}),l&&(0,a.jsx)(sn.x,{variant:"sm"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1 text-fg-secondary",children:[(0,a.jsx)("p",{className:(0,c.cn)("line-clamp-1",{"text-xs":l}),children:i}),!s.isRead&&(0,a.jsx)("div",{className:"w-[14px] h-full flex items-center justify-center",children:!l&&(0,a.jsx)(sn.x,{variant:"sm"})})]})]})}let sb=e=>{let{onClick:t}=e,{t:s}=(0,d.Bd)("tasks");return(0,a.jsxs)("div",{className:"w-full py-8 border rounded-xl flex flex-col items-center gap-4 px-4",children:[(0,a.jsx)(h.$n,{size:"iconMd",variant:"secondary",className:"rounded-full",onClick:t,"aria-label":s("tasks.create","Add new"),children:(0,a.jsx)(m.shx,{size:20})}),(0,a.jsxs)("div",{className:"flex flex-col items-center w-full gap-2 text-lg font-semibold",children:[(0,a.jsx)("h1",{children:s("no-tasks-banner.title","Get started by adding a task")}),(0,a.jsx)("p",{className:"text-xs font-normal text-fg-secondary text-center leading-1",children:s("no-tasks-banner.subtitle","Schedule a task to automate actions and get reminders when they complete.")})]})]})},sw=()=>{let{t:e}=(0,d.Bd)("tasks");return(0,a.jsxs)("div",{className:"w-full py-8 border rounded-xl flex flex-col items-center gap-4",children:[(0,a.jsx)("div",{className:"flex items-center justify-center rounded-full bg-surface-l1 p-4",children:(0,a.jsx)(m.Tde,{size:20})}),(0,a.jsxs)("div",{className:"flex flex-col items-center w-full gap-2 text-lg font-semibold",children:[(0,a.jsx)("h1",{children:e("no-archived-tasks-banner.title","No archived tasks")}),(0,a.jsx)("p",{className:"text-xs font-normal text-fg-secondary text-center leading-1",children:e("no-archived=tasks-banner.subtitle","Archived tasks will show up here")})]})]})};var sk=s(54344),sN=s(61349),sI=s(68332),sC=s(56115),sS=s(24734);let sE="soft-deleted-conversations",s_=()=>{let{data:e,fetchNextPage:t,hasNextPage:s,isFetchingNextPage:a,isLoading:n,error:l,refetch:i}=(0,b.qu)({queryKey:[sE],queryFn:async e=>{let{pageParam:t}=e;return await y.chatApi.chatListSoftDeletedConversations({pageSize:"100",pageToken:t})},getNextPageParam:e=>e.nextPageToken||void 0,initialPageParam:void 0,staleTime:0}),r=(null==e?void 0:e.pages.flatMap(e=>e.conversations||[]))||[],{loadMoreRef:o,historyContainerRef:c}=(0,sC.R)({hasNextPage:s,isFetchingNextPage:a,isLoading:n,fetchNextPage:()=>{t().catch(e=>(0,eO.vV)("soft-deleted-conversations-load-more",e))}});return{conversations:r,isLoading:n,error:l,loadMoreRef:o,historyContainerRef:c,refetch:i}},sz=()=>{let{t:e}=(0,d.Bd)(),t=(0,sN.SX)(),s=(0,sS.K)(),n=(0,eX._)(),{routeToConversation:l}=(0,sI.o)(),i=(0,eU.w1)(L.A("fetchGetConversation")),{mutate:r,isPending:o}=(0,b.n_)({mutationFn:async e=>{n("restore-conversation",void 0,{location:"restore-conversation:mutate",conversationId:e}),await y.chatApi.chatRestoreSoftDeletedConversation({body:{conversationId:e}})},onError:t=>{s("restore-conversation",t,e("deleted-conversations.restore.error","Failed to restore conversation")),(0,eO.vV)("restore-conversation",t)},onSuccess:(s,r)=>{t.invalidateQueries({queryKey:[sE]}),i(r).then(()=>{tb.oR.success(e("deleted-conversations.restore.success","Successfully restored conversation"),{action:(0,a.jsx)(h.$n,{variant:"filledSecondary",size:"sm",onClick:()=>{l(r),n("view-restored-conversation",void 0,{location:"restore-conversation:onSuccess",conversationId:r})},children:e("deleted-conversations.restore.view","View")})})}).catch(e=>{(0,eO.vV)("restore-conversation",e)})}});return{restoreConversation:r,isPending:o}},sP=()=>{let{t:e}=(0,d.Bd)(),t=(0,sN.SX)(),s=(0,sS.K)(),a=(0,eX._)(),n=(0,eU.w1)(L.A("fetchForceDeleteConversation")),{mutate:l,isPending:i}=(0,b.n_)({mutationFn:async e=>{await n(e),a("force-delete-conversation",void 0,{location:"force-delete-conversation:mutate",conversationId:e})},onError:t=>{s("force-delete-conversation",t,e("deleted-conversations.force-delete.error","Failed to force delete conversation")),(0,eO.vV)("force-delete-conversation",t)},onSuccess:()=>{t.invalidateQueries({queryKey:[sE]})}});return{forceDeleteConversation:l,isPending:i}},sM=e=>{var t;let{conversation:s,restore:n,forceDelete:l}=e,{t:i}=(0,d.Bd)("base");return(0,a.jsxs)(j.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},className:"flex justify-between items-center p-2 border rounded-xl bg-card",children:[(0,a.jsx)("span",{className:"truncate",children:null!=(t=s.title)?t:s.conversationId}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(h.$n,{onClick:()=>s.conversationId&&n(s.conversationId),variant:"outline",children:i("deleted-conversations.restore","Restore")}),(0,a.jsx)(h.$n,{onClick:()=>s.conversationId&&l(s.conversationId),variant:"destructive",children:i("deleted-conversations.force-delete","Force Delete")})]})]})};function sR(){let{t:e}=(0,d.Bd)("base"),{user:t}=(0,o.useSession)(),{conversations:s,isLoading:n,error:l,refetch:i,loadMoreRef:u,historyContainerRef:x}=s_(),{restoreConversation:f}=sz(),{forceDeleteConversation:p}=sP();return t?(0,a.jsxs)("main",{className:(0,c.cn)("h-dvh w-full relative flex flex-col items-center"),children:[(0,a.jsx)(tD.hx,{hideIncognito:!0}),(0,a.jsx)(ss.CommandMenu,{}),(0,a.jsxs)("div",{className:"max-w-[50rem] px-5 pt-16 pb-8 @sm:pt-18 mx-auto w-full flex flex-col h-full",ref:x,children:[(0,a.jsx)("h1",{className:"text-2xl flex gap-2 items-center",children:e("deleted-conversations.title","Deleted Conversations")}),(0,a.jsx)("div",{className:"flex flex-col w-full items-start text-xs text-muted-foreground pb-4",children:e("deleted-conversations.description","Conversations marked for deletion will be permanently deleted after 30 days.")}),(0,a.jsx)(sk.D,{children:(0,a.jsxs)(v.N,{children:[null==s?void 0:s.map(e=>(0,a.jsx)(sM,{conversation:e,restore:f,forceDelete:p},e.conversationId)),(null==s?void 0:s.length)===0&&!n&&(0,a.jsx)(j.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},children:(0,a.jsx)("div",{className:"text-center",children:e("deleted-conversations.no-conversations-found","No deleted conversations found")})},"no-conversations-found"),n&&(0,a.jsx)("div",{className:"flex justify-center items-center w-full h-full max-h-[150px]",children:(0,a.jsx)(j.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},children:(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)(m.krw,{className:"animate-spin"})})})},"deleted-conversations-loading"),l&&(0,a.jsxs)("div",{className:"flex justify-center items-center w-full h-full max-h-[150px] flex-col gap-4",children:[(0,a.jsx)("div",{className:"text-center",children:e("deleted-conversations.error.description","There was an issue loading your deleted conversations")}),(0,a.jsx)(h.$n,{variant:"filledSecondary",onClick:()=>i(),children:e("Retry","Retry")})]},"deleted-conversations-error"),(0,a.jsx)("div",{ref:u})]})})]})]}):(0,a.jsx)("main",{className:(0,c.cn)("w-screen h-dvh relative"),children:(0,a.jsx)(r.J,{title:e("deleted-conversations.error.title","Error"),description:e("deleted-conversations.error.anonymous-user","You must be logged in to access this page"),cta:e("deleted-conversation-page.cta","Return home")})})}var sA=s(5790),sD=s(32507),sT=s(69648);let sB=e=>{let{handlePersonalityClick:t}=e;return{"what-is-grok":{anchor:"what-is-grok",question:"What is Grok?",answer:(0,a.jsx)("p",{children:"Grok is a conversational generative AI powered by xAI's state-of-the-art Large Language Models. It's built to assist with a wide range of tasks while being helpful, entertaining, and truthful. Grok aims to answer questions about the universe, help with deep work, and provide real-time insights, all with a touch of humor and personality."})},"key-features":{anchor:"key-features",question:"What are Grok's key features?",answer:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{children:"Grok offers a variety of powerful features, including:"}),(0,a.jsxs)("ul",{children:[(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Natural Language Processing and Question Answering"}),": Handles text and voice queries for accurate, context-aware responses."]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Real-Time Search and Information Retrieval"}),": Searches public X posts (formerly Twitter) and the web in real-time for up-to-date information."]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Creative Writing and Content Generation"}),": Assists with writing stories, articles, or other creative content."]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Image Generation and Editing"}),": Creates and edits images based on your descriptions."]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Image and Video Understanding"}),": Analyzes uploaded images or videos to provide insights or descriptions."]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Coding Assistance"}),": Helps write, debug, and explain code."]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Document Analysis"}),": Upload documents for summarization, analysis, or extraction of key information."]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Personas and Customization"}),": Choose fun personas (e.g., witty, unhinged, or role-playing like a wizard) to customize Grok's tone and style."]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Native Tool Use"}),": Integrates tools like code interpreters and internet access to query missing context and adjust responses dynamically."]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Multilingual Capabilities"}),": Supports multiple languages with high precision."]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Private Chat Mode"}),": Activate for conversations that aren't saved long-term, ensuring privacy for sensitive discussions."]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Conversation History"}),": View and manage past chats for continuity."]})]}),(0,a.jsx)("p",{children:'Grok stands out for its real-time capabilities, reasoning agents, and focus on being a "trusted assistant for deep work."'})]})},models:{anchor:"models",question:"What models power Grok, and what are their features?",answer:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{children:"Grok is powered by advanced models from xAI, each with unique strengths:"}),(0,a.jsxs)("ul",{children:[(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Grok 4"}),": The most intelligent model in the world, featuring native tool use, real-time search integration, and superior reasoning. Available to SuperGrok and Premium+ subscribers."]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Grok 4 Heavy"}),": The most powerful version of Grok 4, offering enhanced performance and higher rate limits. Accessible through the SuperGrok Heavy subscription tier."]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Grok 3"}),": Fast model that combines reasoning with extensive pretraining knowledge. It includes code interpreters, internet access, and the ability to dynamically adjust approaches for complex tasks."]})]})]})},"creative-tasks":{anchor:"creative-tasks",question:"Can Grok handle creative or specialized tasks?",answer:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{children:"Yes! Grok excels at:"}),(0,a.jsxs)("ul",{children:[(0,a.jsxs)("li",{children:[(0,a.jsx)(C.N_,{route:{page:"files"},children:"Generating rich documents, stories, or reports"}),"."]}),(0,a.jsx)("li",{children:"Writing and debugging code in various languages."}),(0,a.jsxs)("li",{children:[(0,a.jsx)(C.N_,{route:{page:"files",emptyView:"image"},children:'Creating/editing images (e.g., via prompts like "generate a cosmic landscape")'}),"."]}),(0,a.jsx)("li",{children:"Analyzing images for descriptions, insights, or edits."}),(0,a.jsx)("li",{children:'Role-playing or adopting personas for fun interactions (e.g., "Respond as a pirate captain").'})]})]})},"real-time-search":{anchor:"real-time-search",question:"Does Grok have real-time search and how does it work?",answer:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{children:"Yes, Grok has the most advanced real-time search capabilities. It can:"}),(0,a.jsxs)("ul",{children:[(0,a.jsx)("li",{children:"Search public X posts for the latest discussions."}),(0,a.jsx)("li",{children:"Perform web searches for current information."}),(0,a.jsx)("li",{children:"Integrate results into responses for up-to-date, accurate answers."})]}),(0,a.jsx)("p",{children:"This is powered by models like Grok 4, ensuring responses are timely and relevant."})]})},"customize-responses":{anchor:"customize-responses",question:"Can I customize Grok's responses?",answer:(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("p",{children:["Absolutely. You can choose one of predefined styles or write your own instructions in"," ",(0,a.jsx)("a",{onClick:t,className:"cursor-pointer",children:"settings"}),"."]})})},"mistakes-inaccuracies":{anchor:"mistakes-inaccuracies",question:"How does Grok handle mistakes or inaccuracies?",answer:(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("p",{children:'Like all AIs, Grok may occasionally "hallucinate" or provide incorrect info based on its training data. It encourages users to verify facts, and you can provide feedback to help improve it. Grok\'s design prioritizes truthfulness to minimize this.'})})},"share-links":{anchor:"share-links",question:"How do shared links work?",answer:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"bg-yellow-100/10 dark:bg-yellow-900/10 border border-yellow-200/50 dark:border-yellow-800/50 rounded-lg px-4 py-2 mb-4 flex flex-row items-center gap-3",children:[(0,a.jsx)(m.hcu,{className:"text-yellow-200 dark:text-yellow-100 size-5"}),(0,a.jsx)("p",{className:"font-semibold",children:"Shared links can be viewed by anyone with the link."})]}),(0,a.jsx)("h4",{children:"Can I share my Grok conversations?"}),(0,a.jsx)("p",{children:"Yes, you control what you choose to share. You can share your Grok conversations with others:"}),(0,a.jsxs)("ul",{children:[(0,a.jsx)("li",{children:'On grok.com by clicking "Share" in the top right corner of your browser or the share icon below your conversation to create and copy a share link'}),(0,a.jsx)("li",{children:"On the Grok Apps by tapping the share icon under your conversation to create a share link"})]}),(0,a.jsx)("p",{children:"From there, you also control where you share your Grok conversation."}),(0,a.jsx)("h4",{children:"What happens when you share"}),(0,a.jsx)("p",{children:"When you create a share link, anyone with the link can view your entire conversationincluding messages, uploads, and generated content. No Grok account required."}),(0,a.jsx)("p",{children:"Note: Any share link you generate will be accessible to anyone you choose to share the link with. For example, if you share the link publicly on a social media platform, it may be subject to indexing by a search engine (e.g., Google) just like any other publicly shared content."}),(0,a.jsx)("h4",{children:"Can I revoke access to my shared Grok conversations?"}),(0,a.jsx)("p",{children:"Yes, you control what you share and how long it is shared. You can revoke access to any or all of your Grok conversation shared links by:"}),(0,a.jsxs)("ul",{children:[(0,a.jsxs)("li",{children:["Logging into grok.com, navigating to"," ",(0,a.jsx)(C.N_,{route:{page:"share-links"},children:"grok.com/share-links"}),', and clicking "Remove" next to the share link you no longer wish to share']}),(0,a.jsx)("li",{children:"Using the menu in your chat"}),(0,a.jsx)("li",{children:"Clicking Unshare on the shared conversation page"})]}),(0,a.jsx)("h4",{children:"Before you share"}),(0,a.jsxs)("ul",{children:[(0,a.jsx)("li",{children:"Review your entire conversation"}),(0,a.jsx)("li",{children:"Remove any personal or sensitive information"}),(0,a.jsx)("li",{children:"Remember that recipients can save or download content"})]}),(0,a.jsx)("p",{className:"mt-4",children:"Tip: Use Private Chat Mode for sensitive conversations that shouldn't be shared."})]})}}},sF=e=>{let{anchor:t,children:s}=e;return(0,a.jsx)(C.N_,{route:{page:"faq",anchor:t},children:(0,a.jsx)(h.$n,{variant:"ghost",size:"lg","aria-label":"View answer",className:"my-1",asChild:!0,children:(0,a.jsxs)("div",{className:"flex justify-between w-full items-center",id:t,children:[(0,a.jsx)("span",{className:"text-lg overflow-hidden text-ellipsis",children:s}),(0,a.jsx)(m.vKP,{className:"w-4 h-4"})]})})})},sL=(0,f.memo)(function(){var e,t,s;let n=(0,sD.XO)(e=>e.route),l="faq"===n.page?n:(0,t$.Z)("only for /faq"),i=(0,sA.iV)(e=>e.setTab),r=(0,sA.iV)(e=>e.toggleOpen),o=(0,f.useCallback)(e=>{e.preventDefault(),r(),i("personality")},[r,i]),c=(0,f.useMemo)(()=>sB({handlePersonalityClick:o}),[o]);return(0,a.jsxs)("div",{className:"h-dvh flex-1 overflow-auto relative",children:[(0,a.jsx)("div",{className:"sm:hidden mt-2",children:(0,a.jsx)(tD.n9,{shared:!1})}),(0,a.jsx)("div",{className:"prose pb-8 px-4 mt-8 mx-auto pt-2 sm:pt-8",children:l.anchor&&c[l.anchor]?(0,a.jsxs)("section",{children:[(0,a.jsx)("nav",{"aria-label":"Breadcrumb",children:(0,a.jsxs)("ol",{className:"flex items-center m-0 p-0 gap-4",children:[(0,a.jsx)("li",{className:"flex items-center list-none",children:(0,a.jsx)(C.N_,{route:{page:"faq",anchor:null},children:(0,a.jsx)(h.$n,{variant:"link","aria-label":"FAQ",className:"text-muted-foreground p-0",asChild:!0,children:(0,a.jsx)("span",{children:"FAQ"})})})}),(0,a.jsx)("span",{className:"text-muted-foreground",children:(0,a.jsx)(m.vKP,{className:"w-4 h-4"})}),(0,a.jsx)("li",{className:"list-none m-0 p-0",children:(0,a.jsx)("span",{className:"text-muted-foreground",id:l.anchor,children:null==(e=c[l.anchor])?void 0:e.question})})]})}),(0,a.jsxs)("header",{className:"flex flex-col my-4",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:null==(t=c[l.anchor])?void 0:t.question}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"Updated on Aug 13, 2025"})]}),(0,a.jsx)(sT.w,{className:"my-8"}),(0,a.jsx)("div",{children:null==(s=c[l.anchor])?void 0:s.answer})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("header",{children:[(0,a.jsx)(C.N_,{route:{page:"faq",anchor:null},children:(0,a.jsx)("h1",{children:"Grok Web FAQ"})}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground mb-8",children:"Updated on Aug 13, 2025"})]}),(0,a.jsxs)("main",{children:[(0,a.jsxs)("p",{children:["Welcome to the Grok Web FAQ page! Grok is designed to be a helpful, witty, and maximally truthful assistant, inspired by the Hitchhiker's Guide to the Galaxy and JARVIS from Iron Man. This FAQ focuses on Grok's Web features, capabilities, and how to make the most of them. For legal terms, privacy, or account issues, visit"," ",(0,a.jsx)("a",{href:"https://x.ai/legal",target:"_blank",rel:"noreferrer noopener",children:"x.ai/legal"}),"."]}),(0,a.jsxs)("p",{children:["If your question isn't covered here, feel free to"," ",(0,a.jsx)(C.N_,{route:{page:"main"},children:"ask Grok directly"}),"."]}),(0,a.jsx)(sT.w,{className:"my-8"}),Object.values(c).map((e,t)=>{let{anchor:s,question:n}=e;return(0,a.jsx)(sF,{anchor:s,children:n},t)}),(0,a.jsx)(sT.w,{className:"my-8"}),(0,a.jsxs)("p",{children:["If you have more questions,"," ",(0,a.jsx)(C.N_,{route:{page:"main"},children:"chat with Grok now! \uD83D\uDE80"})]})]})]})})]})}),sG=()=>[{anchor:"sep-05-2025",title:"Sep 05",date:new Date("2025-09-05"),content:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h4",{children:"New Features"}),(0,a.jsxs)("ul",{children:[(0,a.jsx)("li",{children:"Calculator, unit conversion tools"}),(0,a.jsx)("li",{children:"Improved typeaheads"}),(0,a.jsx)("li",{children:"Improved code highlighting, performance, and styles"}),(0,a.jsx)("li",{children:"Tool calling for fast mode"}),(0,a.jsx)("li",{children:"Generate Imagine videos from chat generated images"}),(0,a.jsx)("li",{children:"Imagine audio mute preference persistence"}),(0,a.jsx)("li",{children:"Faster video loading for generated videos"}),(0,a.jsx)("li",{children:"Textbox option for chat surveys"}),(0,a.jsx)("li",{children:"Ctrl + Shift + M to switch model mode"})]}),(0,a.jsx)("h4",{children:"Bug Fixes"}),(0,a.jsxs)("ul",{children:[(0,a.jsx)("li",{children:'Fix "Export to PDF" black background'}),(0,a.jsx)("li",{children:"Fix web results not showing in voice mode"}),(0,a.jsx)("li",{children:"Fix double Finished Thinking notification"}),(0,a.jsx)("li",{children:"Fix text direction in side panel and typeaheads for RTL languages"})]})]})},{anchor:"aug-29-2025",title:"Aug 29",date:new Date("2025-08-29"),content:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h4",{children:"New Features"}),(0,a.jsxs)("ul",{children:[(0,a.jsx)("li",{children:"Imagine"}),(0,a.jsx)("li",{children:"Grok 4 for anonymous users"}),(0,a.jsx)("li",{children:"Improved typeaheads"}),(0,a.jsx)("li",{children:"Cleaned up citation rendering"}),(0,a.jsx)("li",{children:"Better search results"})]}),(0,a.jsx)("h4",{children:"Bug Fixes"}),(0,a.jsxs)("ul",{children:[(0,a.jsx)("li",{children:"General chat stability under bad network conditions"}),(0,a.jsx)("li",{children:"Fixed bugs with creating new chats from shared links"})]})]})}],sO=e=>e.toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}),sU=(0,f.memo)(function(e){let{changeLogEntries:t}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("header",{children:[(0,a.jsx)(C.N_,{route:{page:"changelog",anchor:null},children:(0,a.jsx)("h1",{children:"Grok Changelog"})}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground mb-8",children:"Latest updates for Grok Web"})]}),(0,a.jsxs)("main",{children:[(0,a.jsx)("p",{children:"See what's new in Grok. Here you'll find information about all the latest updates, new features, improvements, and bug fixes."}),(0,a.jsx)(sT.w,{className:"my-8"}),t.map((e,s)=>(0,a.jsxs)("div",{children:[(0,a.jsx)(sW,{entry:e}),s!==t.length-1&&(0,a.jsx)(sT.w,{className:"my-8"})]},e.anchor)),(0,a.jsx)(sT.w,{className:"my-8"}),(0,a.jsxs)("p",{children:["Want to see what Grok can do with the latest features?"," ",(0,a.jsx)(C.N_,{route:{page:"main"},children:"Start a conversation now!"})]})]})]})}),sq=(0,f.memo)(function(e){let{entry:t}=e;return(0,a.jsxs)("section",{children:[(0,a.jsx)("nav",{"aria-label":"Breadcrumb",children:(0,a.jsxs)("ol",{className:"flex items-center m-0 p-0 gap-4",children:[(0,a.jsx)("li",{className:"flex items-center list-none",children:(0,a.jsx)(C.N_,{route:{page:"changelog",anchor:null},children:(0,a.jsx)(h.$n,{variant:"link","aria-label":"Changelog",className:"text-muted-foreground p-0",asChild:!0,children:(0,a.jsx)("span",{children:"Changelog"})})})}),(0,a.jsx)("span",{className:"text-muted-foreground",children:(0,a.jsx)(m.vKP,{className:"w-4 h-4"})}),(0,a.jsx)("li",{className:"list-none m-0 p-0",children:(0,a.jsx)("span",{className:"text-muted-foreground",children:t.title})})]})}),(0,a.jsxs)("header",{className:"flex flex-col my-4",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:t.title}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:sO(t.date)})]}),(0,a.jsx)(sT.w,{className:"my-8"}),(0,a.jsx)("div",{children:t.content})]})}),sW=(0,f.memo)(function(e){let{entry:t}=e;return(0,a.jsx)(C.N_,{route:{page:"changelog",anchor:t.anchor},className:"text-primary hover:text-primary",children:(0,a.jsx)("div",{className:"flex justify-between w-full items-center",id:t.anchor,children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row items-start gap-4",children:[(0,a.jsx)("div",{className:"text-sm text-muted-foreground w-32",children:sO(t.date)}),(0,a.jsxs)("div",{className:"flex flex-col items-start gap-4",children:[(0,a.jsx)("span",{className:"font-semibold",children:t.title}),(0,a.jsx)("div",{className:"flex flex-col prose",children:t.content})]})]})})})}),sK=(0,f.memo)(function(){let e=(0,sD.XO)(e=>e.route),t="changelog"===e.page?e:(0,t$.Z)("only for /changelog"),s=(0,f.useMemo)(()=>sG(),[]),n=(0,f.useMemo)(()=>s.find(e=>e.anchor===t.anchor),[s,t.anchor]);return(0,a.jsxs)("div",{className:"h-dvh flex-1 overflow-auto relative",children:[(0,a.jsx)("div",{className:"sm:hidden mt-2",children:(0,a.jsx)(tD.n9,{shared:!1})}),(0,a.jsx)("div",{className:"prose pb-8 px-4 mt-8 mx-auto pt-2 sm:pt-8",children:t.anchor&&n?(0,a.jsx)(sq,{entry:n}):(0,a.jsx)(sU,{changeLogEntries:s})})]})});var sV=s(51375),s$=s(37469),sH=s(65761),sY=s(41405),sQ=s(87891);let sX=(0,f.memo)(e=>{let{asset:t,isFileSelected:s}=e,{t:n}=(0,d.Bd)(),i=(0,eX._)(),r=(0,l.aP)(L.A("setSidePanelContent")),[o,u]=(0,f.useState)(!1),x=(0,sQ.R)(e=>e.deleteAsset),p=(0,f.useCallback)(()=>{if(s)return void r(void 0);r({type:"asset",data:(0,s$.B)(t),hideEdit:!0})},[t,s,r]),g=(0,f.useCallback)(e=>{var s,a;e.stopPropagation(),x(t.assetId),i("delete_asset","asset_row",{location:"asset-row",assetId:t.assetId,assetName:t.name,assetSize:null!=(a=null==(s=t.sizeBytes)?void 0:s.toString())?a:"unknown",assetType:t.mimeType})},[t,x,i]);return(0,a.jsxs)(j.P.div,{layout:!0,initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:(0,c.cn)("flex flex-shrink-0 items-center gap-4 p-2 border rounded-xl bg-card hover:bg-card-hover cursor-pointer focus:bg-card-hover focus:outline-none mb-2 overflow-x-hidden",s&&"bg-card-hover"),tabIndex:0,onClick:p,children:[(0,a.jsx)(sV.E,{metadata:(0,s$.B)(t),className:"rounded-lg w-12 h-12 ms-0 me-0 [&>img]:h-full [&>img]:w-full"}),(0,a.jsxs)("div",{className:"flex flex-col flex-1",children:[(0,a.jsx)("span",{className:"line-clamp-1 break-all",children:t.name}),(0,a.jsxs)("div",{className:"text-sm text-gray-500 line-clamp-1 break-all",children:[(0,a.jsx)("span",{children:t.sizeBytes?(0,sY.z)(t.sizeBytes):n("file-browser.unknown-size","Unknown")}),(0,a.jsx)("span",{children:"  "}),(0,a.jsx)("span",{children:t.createTime?(0,sH.P)(t.createTime):""}),(0,a.jsx)("span",{children:"  "}),(0,a.jsx)("span",{children:t.mimeType})]})]}),o?(0,a.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,a.jsx)(h.gx,{variant:"ghost",size:"sm",onClick:e=>{e.stopPropagation(),u(!1)},tooltipContent:n("Cancel","Cancel"),"aria-label":n("Cancel","Cancel"),className:"flex items-center gap-3 size-8 rounded-md",children:(0,a.jsx)(m.X,{size:16})}),(0,a.jsx)(h.gx,{variant:"ghost",size:"sm",btnColor:"danger",onClick:g,tooltipContent:n("Confirm","Confirm"),"aria-label":n("Confirm","Confirm"),className:"flex items-center gap-3 size-8 rounded-md",children:(0,a.jsx)(m.TBR,{size:16})})]}):(0,a.jsx)(h.gx,{variant:"ghost",size:"sm",onClick:e=>{e.stopPropagation(),u(!0)},tooltipContent:n("Delete","Delete"),"aria-label":n("Delete","Delete"),className:"flex items-center gap-3 size-8 rounded-md",children:(0,a.jsx)(m.TBR,{size:16})})]},t.assetId)});var sJ=s(74933),sZ=s(48589);let s0=()=>{let{route:e}=(0,C.wK)(),t=(0,sQ.R)(e=>e.loadFirstPage),s=(0,sQ.R)(e=>e.loadNextPage),a=(0,sQ.R)(e=>e.listPageToken),n=(0,sQ.R)(e=>e.listStatus),l=(0,sQ.Z0)(),i="files"===e.page?e.sort:"used",r="files"===e.page?e.search:void 0;(0,f.useEffect)(()=>{t({sort:i,search:r})},[t,i,r,e.page]);let{loadMoreRef:o,historyContainerRef:c}=(0,sC.R)({hasNextPage:!!a,isFetchingNextPage:"loading"===n,isLoading:"loading"===n,fetchNextPage:()=>{s().catch(e=>(0,eO.vV)("files-load-more",e))}});return{assets:l,isLoading:"loading"===n,hasError:"error"===n,refetch:t,loadMoreRef:o,historyContainerRef:c}},s1=[{label:(0,a.jsx)(d.x6,{ns:"base",i18nKey:"file-browser.sort.size",defaults:"Size"}),value:"size"},{label:(0,a.jsx)(d.x6,{ns:"base",i18nKey:"file-browser.sort.name",defaults:"Name"}),value:"name"},{label:(0,a.jsx)(d.x6,{ns:"base",i18nKey:"file-browser.sort.created-time",defaults:"Created Time"}),value:"created"},{label:(0,a.jsx)(d.x6,{ns:"base",i18nKey:"file-browser.sort.last-used-time",defaults:"Last Used Time"}),value:"used"}];function s2(){let{t:e}=(0,d.Bd)("base"),{user:t}=(0,o.useSession)(),{push:s,replace:n,route:i}=(0,C.wK)(),u="files"===i.page?i:(0,t$.Z)("only for /files"),[x,p]=(0,f.useState)(""),g=u.sort||"used",y=(0,tT.Di)(),b=(0,sZ.o)(x,500);(0,f.useEffect)(()=>{n({...u,search:b})},[b,n,u]);let w=e=>{s({...u,sort:e})},k=(0,l.aP)(e=>{var t;return(null==(t=e.sidePanelContent)?void 0:t.type)!=="asset"?null:e.sidePanelContent.data.fileMetadataId}),{assets:N,isLoading:I,hasError:S,refetch:E,loadMoreRef:_,historyContainerRef:z}=s0();return t?(0,a.jsxs)("main",{className:(0,c.cn)("h-dvh w-full relative flex flex-col items-center"),children:[(0,a.jsx)(tD.hx,{hideIncognito:!0}),(0,a.jsx)(ss.CommandMenu,{}),(0,a.jsxs)("div",{className:"max-w-[50rem] px-5 pt-16 pb-8 @sm:pt-18 mx-auto w-full flex flex-col h-full",ref:z,children:[(0,a.jsx)("h1",{className:(0,c.cn)("text-2xl flex gap-2 items-center pb-4 font-semibold",y&&"ps-3"),children:e("Files","Files")}),(0,a.jsxs)("div",{className:"flex gap-2 items-center justify-between w-full pb-2",children:[(0,a.jsx)(sJ.p,{value:x,onChange:e=>p(e.target.value),placeholder:e("file-browser.filter.placeholder","Search files..."),className:"text-primary bg-surface-l1 border-border-l1 h-10 rounded-xl"}),(0,a.jsxs)(tW.rI,{children:[(0,a.jsx)(tW.ty,{asChild:!0,children:(0,a.jsxs)(h.$n,{variant:"outline",className:"h-10 rounded-xl",children:[(0,a.jsx)(m.ufo,{size:15,className:"text-fg-secondary"}),e("files-sort-show-menu","Sort"),(0,a.jsx)(m.D3D,{className:"text-fg-secondary",size:14})]})}),(0,a.jsx)(tW.SQ,{children:s1.map(e=>(0,a.jsxs)(tW._2,{className:"gap-2",onSelect:()=>w(e.value),children:[e.label,g===e.value&&(0,a.jsx)("span",{className:"ms-auto text-xs text-primary",children:(0,a.jsx)(m.Srz,{size:16,className:"text-primary"})})]},e.value))})]})]}),(0,a.jsxs)(sk.D,{children:[(0,a.jsxs)(v.N,{children:[null==N?void 0:N.map(e=>(0,a.jsx)(sX,{isFileSelected:e.assetId===k,asset:e},e.assetId)),(null==N?void 0:N.length)===0&&!I&&(0,a.jsx)(j.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},children:(0,a.jsx)("div",{className:"text-center",children:e("file-browser.no-files-found","No files found")})},"no-files-found"),I&&(0,a.jsx)("div",{className:"flex justify-center items-center w-full h-full max-h-[150px]",children:(0,a.jsx)(j.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},children:(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)(m.krw,{className:"animate-spin"})})})},"files-loading"),S&&(0,a.jsxs)("div",{className:"flex justify-center items-center w-full h-full max-h-[150px] flex-col gap-4",children:[(0,a.jsx)("div",{className:"text-center",children:e("file-browser.error.description","There was an issue loading your files")}),(0,a.jsx)(h.$n,{variant:"filledSecondary",onClick:()=>E(),children:e("Retry","Retry")})]},"files-error")]}),(0,a.jsx)("div",{ref:_})]})]})]}):(0,a.jsx)("main",{className:(0,c.cn)("w-screen h-dvh relative"),children:(0,a.jsx)(r.J,{title:e("Error","Error"),description:e("file-browser.error.anonymous-user","You must be logged in to access this page"),cta:e("files-page-error.cta","Return home")})})}var s5=s(92437);function s4(e){let{className:t}=e,{t:s}=(0,d.Bd)("files"),n=(0,f.useRef)(null),l=(0,sQ.R)(e=>e.uploadAsset),{push:i}=(0,C.wK)(),r=(0,f.useCallback)((e,t)=>{let a=t.items;if(!a||0===a.length||!a[0]||!("webkitGetAsEntry"in a[0]))return void e.forEach(e=>l(e));let n=e=>{".DS_Store"!==e.name&&l(e,e=>i({page:"files",fileId:e}))},r=e=>{(0,eO.vV)("explorer-drop-zone:file-upload",e),tb.oR.error(s("files-extract-error","Error when processing file"))};for(let e=0;e<a.length;e++){let t=a[e];if(!t)continue;let s=t.webkitGetAsEntry();s&&function e(t,s,a){t.isFile?t.file(s,a):t.isDirectory&&t.createReader().readEntries(t=>{for(let n of t)e(n,s,a)},a)}(s,n,r)}},[s,l,i]),o=(0,s5.t)({ref:n,onDrop:r});return(0,a.jsx)(s5.u,{ref:n,dragState:o,title:s("explorer-dropzone.title","Drop files to upload"),className:t})}var s3=s(10953),s6=s(41284),s8=s(86565);let s9=(0,f.memo)(e=>{let{children:t}=e,{t:s}=(0,d.Bd)("files"),n=(0,sQ.R)(e=>e.createAsset),l=(0,eX._)(),{push:i}=(0,C.wK)(),r=(0,s8.KR)(),{ENABLE_IMAGE_EDITOR_IN_FILES:o,ENABLE_XLSX_EDITING:c}=(0,w.h)(),u=(0,f.useRef)(null),h=(0,sQ.R)(e=>e.uploadAsset),x=(0,f.useCallback)(e=>i({page:"files",fileId:e}),[i]),p=(0,f.useCallback)(e=>{n(e,x),l("files.create-file",e,{location:"AddFileButton:handleCreate"})},[n,x,l]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(tW.rI,{children:[(0,a.jsx)(tW.ty,{asChild:!0,children:t||(0,a.jsxs)(S.$n,{variant:"secondary",shape:"square",size:"sm",className:"flex-shrink-0",children:[(0,a.jsx)(m.FWt,{size:"18"}),(0,a.jsx)("span",{className:"sr-only",children:s("files-add-button.label","Add new file")})]})}),(0,a.jsxs)(tW.SQ,{align:"start",alignOffset:-8,sideOffset:8,className:"min-w-40",children:[(0,a.jsx)(s7,{fileTypeId:"markdown",onSelect:p}),c&&(0,a.jsxs)(tW._2,{onSelect:()=>{p(r.spreadsheet.newFileName)},children:[(0,f.createElement)(r.spreadsheet.Icon,{className:"me-2 text-secondary",size:16}),r.spreadsheet.name]}),o&&(0,a.jsxs)(tW._2,{onSelect:()=>i({page:"files",fileId:null,emptyView:"image"}),children:[(0,a.jsx)(m.XGR,{size:16,className:"me-2 text-secondary"}),s("files-add-image","Image")]}),(0,a.jsxs)(tW.lv,{children:[(0,a.jsxs)(tW.nV,{children:[(0,a.jsx)(m.bvm,{size:16,className:"me-2 text-secondary"}),s("files-add-code","Code")]}),(0,a.jsx)(tW.dc,{children:(0,a.jsx)(tW.M5,{sideOffset:12,alignOffset:-4,className:"min-w-36",children:s8.cC.map(e=>(0,a.jsx)(s7,{fileTypeId:e,disableIcons:!0,onSelect:p},e))})})]}),(0,a.jsx)(tW.mB,{className:"bg-border-l1 mx-2"}),(0,a.jsxs)(tW._2,{onSelect:()=>{u.current&&u.current.click()},children:[(0,a.jsx)(m.sjq,{size:16,className:"me-2 text-secondary"}),s("files-menu-upload.label","Upload Files")]})]})]}),(0,a.jsx)("input",{type:"file",ref:u,className:"hidden",onChange:e=>{e.target.files&&(Array.from(e.target.files).forEach(e=>{h(e,x)}),e.target.value="")},multiple:!0})]})});function s7(e){let{fileTypeId:t,onSelect:s,disableIcons:n}=e,{Icon:l,name:i,newFileName:r}=(0,s8.KR)()[t];return(0,a.jsxs)(tW._2,{onSelect:()=>s(r),children:[n?null:(0,a.jsx)(l,{size:16,className:"me-2 text-secondary"}),i]})}function ae(e){let{className:t,onClose:s,onBlur:n,...l}=e,{t:i}=(0,d.Bd)("files"),r=(0,c.cn)("rounded-full shadow-none border border-border ps-9 h-8 focus:ring-0",t),o=(0,f.useCallback)(e=>{null==n||n(e),""===e.target.value&&(null==s||s())},[n,s]);return(0,a.jsxs)("div",{className:"relative flex flex-1",children:[(0,a.jsx)(m.vji,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground",size:16}),(0,a.jsx)(sJ.p,{placeholder:i("files-search-input.placeholder","Search"),className:r,onBlur:o,...l})]})}function at(){var e,t;let{t:s}=(0,d.Bd)("files"),n=(0,C.wK)(),{push:l,replace:i}=n,r="files"===n.route.page?n.route:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";throw Error(e)}("Only use Header in /files"),o=(0,sa.wV)(),[u,h]=(0,f.useState)(null!=(e=r.search)?e:""),[x,p]=(0,f.useState)(null!=(t=r.search)&&t),[g,y]=(0,f.useState)(!1),b=(0,sZ.o)(u,500);(0,f.useEffect)(()=>{i({page:"files",search:b})},[b,i]),(0,f.useEffect)(()=>{r.search||(y(!1),h(""))},[r.search]);let w=e=>{e.stopPropagation(),e.preventDefault(),y(!1),h(""),l({page:"files",sort:null,createdBy:null,fileType:null,search:""})},k="files"===r.page&&r.sort||null,N=e=>{l({page:"files",sort:e})},I="files"===r.page&&r.createdBy||null,E=e=>{l({page:"files",createdBy:e})},_="files"===r.page&&r.fileType||null,z=e=>{l({page:"files",fileType:e})},P=()=>{h(""),p(!1)},M=(0,f.useMemo)(()=>[{label:(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(s6.e,{className:"w-6 h-6",textClassName:"!text-[10px]",user:o.user}),(0,a.jsx)(d.x6,{ns:"base",i18nKey:"file-browser.sort.creator-human",defaults:"Me"})]}),value:"user"},{label:(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(s3.$r,{className:"w-6 h-6"}),(0,a.jsx)(d.x6,{ns:"base",i18nKey:"file-browser.sort.creator-grok",defaults:"Grok"})]}),value:"grok"}],[o.user]),R=[{value:"image",label:s("files-filter-images","Images"),icon:m.xfq},{value:"document",label:s("files-filter-documents","Documents"),icon:m.pyG},{value:"spreadsheet",label:s("files-filter-spreadsheets","Spreadsheets"),icon:m.KbA},{value:"code",label:s("files-filter-code","Code"),icon:m.loI},{value:"pdf",label:s("files-filter-pdf","PDF"),icon:m.yTC}];return(0,a.jsxs)("header",{className:"flex flex-col gap-px @container px-4",children:[(0,a.jsxs)("div",{className:"flex gap-2 h-header-height items-center",children:[(0,a.jsx)("div",{className:"flex-1 relative min-h-[32px]",children:(0,a.jsx)(v.N,{mode:"sync",children:x?(0,a.jsx)(j.P.div,{initial:{width:"32px",height:"32px",opacity:0},animate:{width:"100%",height:"auto",opacity:1},exit:{width:"32px",height:"32px",opacity:0},transition:{duration:.1,ease:"easeOut"},className:"flex justify-end items-center gap-2 absolute top-0 end-0",children:(0,a.jsx)(ae,{value:u,onChange:e=>{h(e.target.value)},autoFocus:!0,className:"flex-1",onKeyDown:e=>{"Escape"===e.key&&P()},onClose:P})},"search-input"):(0,a.jsxs)(j.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.1,ease:"easeOut"},className:"flex justify-between",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold flex items-center justify-start",children:(0,a.jsx)(C.N_,{route:{page:"files",fileId:null},children:s("files-explorer-header","Files")})}),(0,a.jsxs)("div",{className:"flex gap-1",children:[(0,a.jsx)(S.$n,{variant:"tertiary",shape:"square",size:"sm","aria-label":s("files-explorer-collapse-button","Collapse"),onClick:()=>sQ.R.getState().setIsFileExplorerCollapsed(!0),children:(0,a.jsx)(m.KD8,{size:18,className:"text-fg-secondary"})}),(0,a.jsxs)(S.$n,{variant:"tertiary",shape:"square",size:"sm",onClick:()=>p(!0),children:[(0,a.jsx)(m.WIv,{size:18,className:"text-fg-secondary"}),(0,a.jsx)("span",{className:"sr-only",children:s("files-search-open-button.label","Show search input")})]})]})]},"title-and-button")})}),(0,a.jsx)(s9,{})]}),(0,a.jsxs)("div",{className:"flex gap-2 overflow-x-auto no-scrollbar h-subheader-height items-center",children:[(0,a.jsxs)(tW.rI,{open:g,onOpenChange:y,children:[(0,a.jsxs)("div",{className:(0,c.cn)("flex items-center rounded-full border gap-0.5 border-border-l2 h-8 overflow-hidden flex-shrink-0 focus-visible:bg-button-ghost-hover hover:bg-button-ghost-hover",(_||I)&&"bg-button-ghost-hover border-secondary pr-0"),children:[(0,a.jsx)(tW.ty,{asChild:!0,children:(0,a.jsxs)(S.$n,{variant:"secondary",size:"sm",shape:"rectangle",className:(0,c.cn)("border flex-shrink-0 border-transparent hover:bg-transparent",(_||I)&&"pr-0 hover:bg-transparent"),style:{boxShadow:"none"},children:[(0,a.jsx)(m.YGH,{size:16,className:"text-fg-secondary"}),(0,a.jsx)("span",{className:"sr-only",children:s("files-filter-open-button.label","Show filters")}),(0,a.jsx)("span",{className:"hidden @[160px]:inline-block",children:s("files-filter-show-menu","Filter")})]})}),_||I?(0,a.jsxs)(S.$n,{variant:"tertiary",size:"sm",onClick:w,shape:"circle",children:[(0,a.jsx)(m.uv5,{size:16}),(0,a.jsx)("span",{className:"sr-only",children:s("files-filter-clear","Clear all filters")})]}):null]}),(0,a.jsxs)(tW.SQ,{side:"bottom",align:"start",sideOffset:6,className:"no-a11y-check rounded-2xl",children:[(0,a.jsxs)("div",{className:"min-w-40 flex flex-col gap-1",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs text-secondary ms-3 my-2 min-w-32",children:s("files-filter-by-creator","Created By")}),M.map(e=>(0,a.jsxs)(tW._2,{onSelect:()=>E(e.value),className:"flex items-center gap-2",children:[e.label,I===e.value&&(0,a.jsx)("span",{className:"ms-auto text-xs text-primary",children:(0,a.jsx)(m.Srz,{size:16,className:"text-primary"})})]},"CREATOR_OPTIONS"+e.value.toString()))]}),(0,a.jsx)(tW.mB,{}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs text-secondary ms-3 my-2",children:s("files-filter-by-type","File Type")}),R.map(e=>{let t=e.icon;return(0,a.jsxs)(tW._2,{onSelect:()=>z(e.value),className:"flex items-center gap-2",children:[(0,a.jsx)(t,{size:16,className:"text-fg-secondary"}),e.label,_===e.value&&(0,a.jsx)("span",{className:"ms-auto text-xs text-primary",children:(0,a.jsx)(m.Srz,{size:16,className:"text-primary"})})]},e.value||"all")})]})]}),(u||_||I)&&(0,a.jsx)(S.$n,{variant:"secondary",size:"md",shape:"rectangle",onClick:w,className:"w-full mt-4 rounded-xl",children:s("files-filter-reset","Reset filters")})]})]}),(0,a.jsxs)(tW.rI,{children:[(0,a.jsx)(tW.ty,{asChild:!0,children:(0,a.jsxs)(S.$n,{variant:"secondary",size:"sm",shape:"pill",className:" flex-shrink-0",children:[(0,a.jsx)(m.ufo,{size:15,className:"text-fg-secondary"}),(0,a.jsx)("span",{className:"sr-only",children:s("files-sort-show-menu","Show sorting menu")}),(0,a.jsx)("span",{className:"hidden @[160px]:inline-block",children:s("files-sort-show-menu","Sort")})]})}),(0,a.jsx)(tW.SQ,{side:"bottom",align:"start",sideOffset:6,className:"min-w-36",children:s1.map(e=>(0,a.jsxs)(tW._2,{onSelect:()=>N(e.value),className:"flex items-center gap-2",children:[e.label,k===e.value&&(0,a.jsx)("span",{className:"ms-auto text-xs text-primary",children:(0,a.jsx)(m.Srz,{size:16,className:"text-primary"})})]},e.value))})]}),(0,a.jsx)(as,{})]})]})}let as=(0,f.memo)(function(){let e=(0,sQ.R)(e=>"loading"===e.listStatus);return(0,a.jsx)(v.N,{children:e&&(0,a.jsx)(j.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15,ease:"easeOut"},className:"flex-1 flex justify-end items-center",children:(0,a.jsx)(sl.y,{size:"xs",className:"border-b-secondary"})})})});var aa=s(83638),an=s(48429),al=s(51182);function ai(e){let{onRetry:t}=e,{t:s}=(0,d.Bd)("files");return(0,a.jsxs)("div",{className:"border border-l1 bg-surface-l1 rounded-2xl p-4 flex flex-col items-center justify-center text-center",children:[(0,a.jsx)("h3",{className:"text-sm font-semibold mb-2",children:s("files-list-loading-error.title","Could not load files")}),(0,a.jsx)("p",{className:"text-xs text-fg-secondary mb-4",children:s("files-list-loading-error.message","Something went wrong while loading your files")}),(0,a.jsxs)(h.$n,{variant:"outline",size:"md",onClick:t,children:[(0,a.jsx)(m.e9t,{className:"h-4 w-4 text-secondary"}),s("files-list-loading-error.retry","Retry")]})]})}function ar(e){let{onFiltersClear:t}=e,{t:s}=(0,d.Bd)("files");return(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center h-full gap-4 overflow-hidden",children:[(0,a.jsx)("p",{className:"text-muted-foreground truncate",children:s("files-no-results.label","No results")}),t&&(0,a.jsxs)(h.$n,{variant:"outline",size:"md",onClick:()=>{t()},children:[(0,a.jsx)(m.uv5,{size:16}),(0,a.jsx)("span",{className:"truncate",children:s("files-clear-filters.label","Clear filters")})]})]})}var ao=s(93038);function ac(e){var t;let{asset:s,stack:n,className:l}=e,i=(0,f.useRef)(!n.length);return n.length?(0,a.jsx)("div",{className:(0,c.cn)("relative",l),children:(0,a.jsxs)(v.N,{initial:i.current,children:[(0,a.jsx)(j.P.div,{animate:{x:-2,y:2,rotate:-8},transition:{delay:.2,duration:1},children:(0,a.jsx)(sV.E,{metadata:(0,s$.B)(s),className:"rounded-md w-6 h-6 ms-0 me-0 [&>img]:h-full [&>img]:w-full bg-surface-l1 border border-white"})},s.assetId),(0,a.jsx)(j.P.div,{animate:{x:2,y:-2,rotate:8},transition:{duration:2},className:"absolute inset-0 -z-10",children:(0,a.jsx)(sV.E,{metadata:(0,s$.B)(n[0]),className:"rounded-md w-6 h-6 ms-0 me-0 [&>img]:h-full [&>img]:w-full bg-surface-l1 border border-white"})},null==(t=n[0])?void 0:t.assetId)]})}):(0,a.jsx)(sV.E,{metadata:(0,s$.B)(s),className:"rounded-md w-6 h-6 ms-0 me-0 [&>img]:h-full [&>img]:w-full bg-surface-l1 border border-white"})}function ad(e){let{okLabel:t,onOk:s,cancelLabel:n,onCancel:l}=e;return(0,a.jsxs)("div",{className:(0,c.cn)("flex","items-center justify-end gap-0.5"),children:[(0,a.jsxs)(S.gx,{variant:"tertiary",size:"sm",shape:"square",onClick:l,tooltipContent:n,tooltipContentProps:{hideWhenDetached:!0},children:[(0,a.jsx)(m.uv5,{size:16,className:"text-fg-primary"}),(0,a.jsx)("span",{className:"sr-only",children:n})]}),(0,a.jsxs)(S.gx,{variant:"tertiary",size:"sm",shape:"square",onClick:s,tooltipContent:t,tooltipContentProps:{hideWhenDetached:!0},children:[(0,a.jsx)(m.Srz,{size:16,className:"text-fg-primary"}),(0,a.jsx)("span",{className:"sr-only",children:n})]})]})}let au=(0,f.memo)(function(e){let{value:t,onSubmit:s,onCancel:n,state:l,suffix:i,className:r}=e,{t:o}=(0,d.Bd)("files"),[u,m]=(0,f.useState)(t),h=(0,f.useRef)(null);(0,f.useEffect)(()=>{m(t)},[t]),(0,f.useEffect)(()=>{"edit"===l&&h.current&&(h.current.focus(),h.current.setSelectionRange(0,h.current.value.lastIndexOf(".")))},[l]);let x=()=>{s(u.trim())},p=e=>{e.preventDefault(),e.stopPropagation(),x()};if("edit"===l)return(0,a.jsxs)("div",{className:"flex flex-1",onClick:tf.Y,children:[(0,a.jsx)("input",{ref:h,className:"w-full bg-transparent focus-visible:outline-none",value:u,onKeyDown:e=>{"Enter"===e.key?x():"Escape"===e.key&&n()},onChange:e=>m(e.target.value),"aria-label":o("filename-edit-input.label","Edit file name")}),(0,a.jsx)(ad,{onCancel:e=>{e.preventDefault(),e.stopPropagation(),n()},cancelLabel:o("Cancel","Cancel"),onOk:e=>{e.preventDefault(),e.stopPropagation(),p(e)},okLabel:o("Save","Save")})]});let g=(0,c.cn)("flex-1 select-none text-nowrap max-w-full overflow-hidden inline-block",r);return(0,a.jsxs)("span",{className:g,style:{maskImage:e9.uU,WebkitMaskImage:e9.uU},children:[t,i&&(0,a.jsx)("span",{className:"text-fg-tertiary",children:i})]})}),am=e=>(0,a.jsx)("span",{className:"font-bold",children:e}),ah=e=>{let{text:t,pattern:s,renderMatch:n=am}=e,l=(0,f.useMemo)(()=>{let e=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),a=RegExp("(".concat(e,")"),"gi");return t.split(a)},[t,s]);return(0,a.jsx)(a.Fragment,{children:l.map((e,t)=>e.toLowerCase()===s.toLowerCase()&&n?(0,a.jsx)(f.Fragment,{children:n(e)},t):(0,a.jsx)(f.Fragment,{children:e},t))})};function ax(e){let{assetId:t}=e,s=(0,sQ.R)(e=>e.debouncedSearchQuery),n=(0,sQ.R)(e=>{var a,n;return null!=(n=null==(a=e.searchHighlight[s])?void 0:a[t])?n:""});return n&&s?(0,a.jsx)("div",{className:"px-3 mb-2 text-xs text-fg-secondary text-start max-w-full text-wrap line-clamp-3 leading-normal max-h-[4.5em]",children:(0,a.jsx)(ah,{text:n,pattern:s,renderMatch:af})}):null}let af=e=>(0,a.jsx)("span",{className:"text-fg-primary font-semibold",children:e});var ap=s(93154);let ag=(0,f.memo)(function(e){var t,s,n,l,i,r,o;let{asset:u,stackedAssets:h,action:x,onActionChange:p,className:g,isActive:v=!1}=e,{push:j,route:y}=(0,C.wK)(),{t:b}=(0,d.Bd)("base"),w=(0,sQ.R)((0,al.k)(e=>e.assetsById)),k=(0,eX._)(),[,N]=(0,ap.s)(null!=(s=u.name)?s:""),I=null!=(l=null!=N?N:(0,ao.extension)(null!=(n=u.mimeType)?n:""))?l:"",E=(null==x?void 0:x.type)==="edit"&&(null==x?void 0:x.assetId)===u.assetId,_=(null==x?void 0:x.type)==="delete"&&(null==x?void 0:x.assetId)===u.assetId,z=(0,sQ.R)(e=>e.renameAsset),P=(0,f.useMemo)(()=>h.map(e=>{var t;return null==(t=w[e])?void 0:t.data}).filter(Boolean).sort((e,t)=>new Date((null==e?void 0:e.createTime)||"").getTime()-new Date((null==t?void 0:t.createTime)||"").getTime())||[],[h,w]),M=(0,f.useCallback)(()=>{p(null)},[p]),R=(0,f.useCallback)(e=>{var t,s,a,n;let l=null==(s=w[u.rootAssetId||u.assetId])||null==(t=s.data)?void 0:t.sourceConversationId,i=null!=(n=null!=(a=u.rootAssetSourceConversationId)?a:l)?n:u.sourceConversationId;i&&(e.stopPropagation(),e.preventDefault(),j({page:"chat",conversationId:i,temporary:!1}))},[u.rootAssetSourceConversationId,u.rootAssetId,u.assetId,u.sourceConversationId,w,j]),A=(0,f.useCallback)(e=>{e.stopPropagation(),e.preventDefault(),p({type:"delete",assetId:u.assetId})},[u.assetId,p]),D=(0,f.useCallback)(e=>{e.stopPropagation(),e.preventDefault(),M()},[M]),T=(0,sQ.R)(e=>e.deleteAsset),B=async e=>{var t;e.stopPropagation(),e.preventDefault(),p(null),await T(null!=(t=u.assetId)?t:""),k("files.delete",u.assetId,{location:"FileRow:handleDelete"}),(null==h?void 0:h.length)&&await Promise.all(h.map(e=>(k("files.delete",e,{location:"FileRow:handleDelete"}),T(e)))),"files"===y.page&&(y.fileId===u.rootAssetId||y.fileId===u.assetId)&&j({page:"files",fileId:null})},F=(0,c.cn)("flex py-0 gap-1 relat justify-start items-center w-full overflow-hidden group/file hover:bg-button-ghost-hover min-h-10 h-auto items-stretch",{"bg-button-ghost-active":v},g);return(0,a.jsx)(S.$n,{variant:"tertiary",size:"sm",shape:"rectangle",className:F,asChild:!0,children:(0,a.jsxs)(C.N_,{route:{page:"files",fileId:null!=(r=null!=(i=u.rootAssetId)?i:u.assetId)?r:null},className:(0,c.cn)("group/file text-sm","w-full flex flex-col justify-center !gap-0 text-primary ps-0 pe-1"),children:[(0,a.jsxs)("div",{className:"w-full flex flex-row gap-2 text-primary ps-2 items-center min-h-10",children:[(null==(t=u.mimeType)?void 0:t.startsWith("image/"))?(0,a.jsx)(ac,{asset:u,stack:P,className:"w-fit h-fit"}):(0,a.jsx)(sV.E,{metadata:(0,s$.B)(u),className:"rounded-md w-6 h-6 ms-0 me-0 [&>img]:h-full [&>img]:w-full bg-transparent"}),(0,a.jsx)(au,{value:null!=(o=u.name)?o:"",onCancel:M,onSubmit:e=>{var t;p(null),""!==e&&(z(null!=(t=u.assetId)?t:"",e).catch((0,eO.HX)("FileRow")),k("files.rename",e,{location:"FileRow:save"}))},state:E?"edit":"view"}),E?null:_?(0,a.jsx)(ad,{onCancel:D,cancelLabel:b("Cancel","Cancel"),onOk:B,okLabel:b("Delete","Delete")}):(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:(0,c.cn)("hidden group-hover/file:hidden group-focus-visible/file:hidden","text-fg-secondary"),children:I}),(0,a.jsxs)("div",{className:(0,c.cn)("flex items-center justify-end"),children:[(0,a.jsxs)(tW.rI,{children:[(0,a.jsx)(tW.ty,{asChild:!0,children:(0,a.jsxs)(S.gx,{tabIndex:-1,className:(0,c.cn)("text-fg-secondary",u.isRootAssetCreatedByModel?"w-8":"w-0","group-hover/file:w-8 group-focus-visible/file:w-8 group-hover/file:flex group-focus-visible/file:flex"),variant:"tertiary",size:"sm",shape:"square",style:{boxShadow:u.isRootAssetCreatedByModel?"none":void 0},tooltipContent:b("files-more-options.label","Options"),tooltipContentProps:{hideWhenDetached:!0,side:"bottom"},children:[u.isRootAssetCreatedByModel?(0,a.jsx)(s3.$r,{className:(0,c.cn)("opacity-20 group-hover/file:hidden group-focus-visible/file:hidden size-4")}):null,(0,a.jsx)(m.YbC,{size:16,className:"hidden group-hover/file:block group-focus-visible/file:block"}),(0,a.jsx)("span",{className:"sr-only",children:b("files-more-options.label","Options")})]})}),(0,a.jsxs)(tW.SQ,{side:"bottom",align:"end",className:"min-w-36",children:[(0,a.jsxs)(tW._2,{onSelect:e=>{e.preventDefault(),p({type:"edit",assetId:u.assetId})},className:"flex items-center gap-2",children:[(0,a.jsx)(m.rZj,{size:16,className:"text-fg-secondary"}),b("files.rename","Rename")]}),u.isRootAssetCreatedByModel&&(0,a.jsxs)(tW._2,{onSelect:e=>{R(e)},className:"flex items-center gap-2",children:[(0,a.jsx)(m.PBN,{size:16,className:"text-fg-secondary"}),b("files.open-conversation","Open Conversation")]})]})]}),(0,a.jsxs)(S.gx,{tabIndex:-1,className:(0,c.cn)("text-fg-secondary","hidden group-hover/file:flex group-focus-visible/file:flex"),onClick:A,variant:"tertiary",size:"sm",shape:"square",tooltipContent:b("files-list-delete.tooltip","Delete file"),tooltipContentProps:{hideWhenDetached:!0},children:[(0,a.jsx)(m.TBR,{size:16}),(0,a.jsx)("span",{className:"sr-only",children:b("files-list-delete","Delete file")})]})]})]})]}),(0,a.jsx)(ax,{assetId:u.assetId})]})})});var av=s(69358);function aj(){return(0,a.jsx)(av.P,{delayMs:300,children:(0,a.jsxs)("div",{className:"flex flex-col gap-4 p-3","aria-busy":"true",children:[(0,a.jsx)(ay,{className:"w-1/5"}),(0,a.jsx)(ay,{className:"w-3/5"}),(0,a.jsx)(ay,{className:"w-2/5"}),(0,a.jsx)(ay,{className:"w-1/5"}),(0,a.jsx)(ay,{className:"w-2/3"})]})})}let ay=e=>{let{className:t}=e;return(0,a.jsxs)("div",{className:"flex w-full gap-3 items-center",children:[(0,a.jsx)(th.E,{className:"w-6 h-6 rounded-md"}),(0,a.jsx)(th.E,{className:(0,c.cn)("w-full rounded-xl h-4",t)})]})};function ab(){let{t:e}=(0,d.Bd)("files");return(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center h-full gap-4 overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,a.jsx)("h2",{className:"text-md font-semibold text-center text-fg-primary truncate",children:e("files-empty.title","No Files")}),(0,a.jsx)("p",{className:"text-center text-fg-secondary truncate text-sm",children:e("files-empty.subtitle","Upload files or ask Grok to create one.")})]}),(0,a.jsx)(s9,{children:(0,a.jsxs)(h.$n,{className:"flex-shrink-0",size:"md",variant:"filledSecondary",children:[(0,a.jsx)(m.FWt,{className:"size-4"}),e("files-empty.add-button","Add File")]})})]})}let aw=(0,f.memo)(e=>{let{className:t}=e,{t:s}=(0,d.Bd)("files"),n=(0,C.wK)(),l=n.push,i="files"===n.route.page?n.route:(0,t$.Z)("Files list only for /files"),[r,o]=(0,f.useState)(null),u=(0,sQ.R)(e=>e.loadFirstPage),m=(0,sQ.R)(e=>e.loadNextPage),h=(0,sQ.R)(e=>e.listPageToken),x=(0,eX._)(),{search:p,sort:g,fileType:y,createdBy:b}=i,w=(0,f.useCallback)(()=>{u({search:p,sort:g,fileType:y,createdBy:b}),p&&x("files.search","",{location:"files-list:reloadFilesList"}),g&&"used"!==g&&x("files.sort",g,{location:"files-list:reloadFilesList"}),(y||b)&&x("files.filter","",{location:"files-list:reloadFilesList"})},[u,p,g,y,b,x]);(0,f.useEffect)(()=>w(),[w]);let k=(0,sQ.R)(e=>!!(e.debouncedSearchQuery||e.searchFileType||e.source!==an.eK.SourceAny)),N=(0,sQ.R)((0,al.k)(e=>e.list)),I=(0,sQ.R)((0,al.k)(e=>e.listStatus)),S=(0,sQ.R)((0,al.k)(e=>e.assetsById)),E=(0,sQ.R)((0,al.k)(e=>e.currentVersion)),_=(0,f.useMemo)(()=>N.map(e=>{var t;return null==(t=S[e])?void 0:t.data}).filter(t$.O),[N,S]),z=(0,f.useMemo)(()=>{let e=_.reduce((e,t)=>{var s,a;return(null==(s=t.mimeType)?void 0:s.startsWith("image/"))&&t.sourceConversationId&&(e[t.sourceConversationId]||(e[t.sourceConversationId]=[]),null==(a=e[t.sourceConversationId])||a.push(t.assetId)),e},{});return _.map(t=>{var s;let a=[];if((null==(s=t.mimeType)?void 0:s.startsWith("image/"))&&t.currentConversationId){let s=e[t.currentConversationId];s&&a.push(...s)}return{rootAsset:t,children:a}})},[_]),P=(0,f.useMemo)(()=>{let e=new Set(z.flatMap(e=>e.children.filter(t=>t!==e.rootAsset.assetId)));return N.filter(t=>!e.has(t))},[N,z]),M=(0,sQ.R)(e=>e.creationRequests),R=(0,f.useCallback)(()=>{h&&"loading"!==I&&m()},[I,m,h]),A=(0,aa.B)(R),D=null;if("loading"===I&&!h&&0===N.length)return(0,a.jsx)(aj,{});"ready"===I?0===N.length?D=k?(0,a.jsx)(ar,{onFiltersClear:()=>{l({...i,sort:void 0,createdBy:void 0,fileType:void 0,search:""})}}):(0,a.jsx)(ab,{}):h&&(D=(0,a.jsx)("div",{ref:A,className:"text-center mt-8 text-sm text-fg-secondary",children:s("files-scrollto.label","Scroll to load more")})):"loading"===I?h&&(D=(0,a.jsx)(aj,{})):"error"===I&&(D=(0,a.jsx)(ai,{onRetry:u}));let T=(0,c.cn)("gap-0 py-1.5",t);return(0,a.jsxs)(sk.D,{className:T,fadeSize:"md","aria-busy":"loading"===I,children:[(0,a.jsx)("ol",{children:M.filter(e=>!e.assetId||!S[e.assetId]).map(e=>(0,a.jsx)(j.P.li,{initial:{height:0,scaleY:0,opacity:0},animate:{height:"auto",scaleY:1,opacity:1},transition:{duration:.15},children:(0,a.jsx)(ak,{request:e})},e.name))}),(0,a.jsx)("ol",{children:(0,a.jsx)(v.N,{children:P.map(e=>{var t,s;let n=E[e];if(!n)return null;let l=null==(t=S[n])?void 0:t.data;return l?(0,a.jsx)(j.P.li,{initial:{height:"auto",scaleY:1,opacity:1},exit:{height:0,scaleY:0,opacity:0},transition:{duration:.15},children:(0,a.jsx)(ag,{asset:l,stackedAssets:(null==(s=z.find(t=>t.rootAsset.assetId===e))?void 0:s.children)||[],action:r,onActionChange:o,isActive:i.fileId===e||M.some(t=>t.assetId===e)})},e):null})})}),D]})});function ak(e){var t;let{request:s}=e,[n,l]=(0,ap.s)(null!=(t=s.name)?t:"");return(0,a.jsxs)("div",{className:"h-[42px] rounded-xl px-3.5 text-sm p-4 flex items-center bg-button-ghost-active",children:[(0,a.jsx)(sl.y,{size:"xs",className:"me-[11px]"}),(0,a.jsx)("span",{children:n}),l&&(0,a.jsxs)("span",{className:"text-fg-secondary",children:[".",l]})]})}function aN(e){let{className:t}=e;return(0,a.jsxs)("div",{className:(0,c.cn)("flex flex-col",t),children:[(0,a.jsx)(at,{}),(0,a.jsxs)("div",{className:"flex-1 overflow-hidden relative",children:[(0,a.jsx)(aw,{className:"h-full px-2"}),(0,a.jsx)(s4,{className:"m-2"})]})]})}var aI=s(48175),aC=s(5828);function aS(e){let{className:t,buttonText:s,multiple:n=!0}=e,{t:l}=(0,d.Bd)("files"),i=(0,f.useRef)(null),r=(0,c.cn)("flex items-center @xs:flex-col @xs:items-start @xs:justify-between h-auto p-3 rounded-2xl min-w-32 bg-surface-l1 border-border-l1",t),o=(0,sQ.R)(e=>e.uploadAsset),{push:u}=(0,C.wK)(),x=(0,f.useCallback)(e=>u({page:"files",fileId:e}),[u]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h.$n,{variant:"outline",className:r,onClick:()=>{i.current&&i.current.click()},disabled:!1,children:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(m.sjq,{className:"w-6 h-6 stroke-[1.5] text-secondary"}),(0,a.jsx)("span",{children:s||l("file-upload-button.label","Upload Files")})]})}),(0,a.jsx)("input",{type:"file",ref:i,style:{display:"none"},onChange:e=>{e.target.files&&(Array.from(e.target.files).forEach(e=>{o(e,x)}),e.target.value="")},multiple:n})]})}let aE="w-6 h-6 text-secondary stroke-[1.5]",a_=(0,f.memo)(e=>{let{className:t}=e,{ENABLE_IMAGE_EDITOR_IN_FILES:s,ENABLE_XLSX_EDITING:n}=(0,w.h)(),{t:l}=(0,d.Bd)("files"),{push:i}=(0,C.wK)(),r=(0,s8.KR)(),o=(0,eX._)(),u=(0,sQ.R)(e=>e.createAsset),h=(0,f.useCallback)((e,t)=>{u(e,t),o("files.create-file",e,{location:"Empty:handleCreate"})},[u,o]),x=e=>i({page:"files",fileId:e});return(0,a.jsxs)("div",{className:"h-full relative",children:[(0,a.jsx)(aC.e,{className:"absolute top-3 left-3 z-10",variant:"tertiary",size:"sm",shape:"square"}),(0,a.jsxs)(j.P.div,{initial:{opacity:0},animate:{opacity:1},className:(0,c.cn)("flex flex-col items-center justify-center h-full p-4 @container",t),children:[(0,a.jsx)(s3.$r,{className:"w-20 h-20 text-muted-foreground"}),(0,a.jsx)("p",{className:"mt-4 text-md text-muted-foreground text-center",children:l("empty.create-something-new","Create something new")}),(0,a.jsxs)("div",{className:"w-full max-w-xl gap-3 mt-6 overflow-wrap items-stretch flex flex-col @xs:items-center @xs:flex-row flex-wrap justify-center ",children:[(0,a.jsx)(az,{icon:(0,a.jsx)(m.pyG,{className:aE}),text:l("empty.document","Document"),onClick:()=>void h(r.markdown.newFileName,x)}),n&&(0,a.jsx)(az,{icon:(0,f.createElement)(r.spreadsheet.Icon,{className:aE}),text:l("empty.spreadsheet","Spreadsheet"),onClick:()=>void h(r.spreadsheet.newFileName,x)}),(0,a.jsxs)(tW.rI,{children:[(0,a.jsx)(tW.ty,{asChild:!0,children:(0,a.jsx)(az,{icon:(0,a.jsx)(m.loI,{className:aE}),text:l("empty.code","Code")})}),(0,a.jsx)(tW.SQ,{className:"min-w-36",side:"right",sideOffset:12,children:s8.cC.map(e=>(0,a.jsx)(aP,{fileTypeId:e,disableIcons:!0,onSelect:e=>void h(e,x)},e))})]}),s&&(0,a.jsx)(az,{icon:(0,a.jsx)(m.XGR,{className:aE}),text:l("empty.image","Image"),onClick:()=>{i({page:"files",fileId:null,emptyView:"image"})}}),(0,a.jsx)(aS,{})]}),(0,a.jsx)(s4,{className:"m-4"})]})]})});function az(e){let{icon:t,text:s,...n}=e;return(0,a.jsxs)(h.$n,{variant:"outline",className:"flex @xs:flex-col items-center justify-center @xs:items-start @xs:justify-between h-auto p-3 rounded-2xl min-w-32 @xs:bg-surface-l1 border-0  @xs:border-border-l1 @xs:border transition-none @xs:transition-colors",...n,children:[t,(0,a.jsx)("span",{children:s})]})}function aP(e){let{fileTypeId:t,onSelect:s,disableIcons:n}=e,{Icon:l,name:i,newFileName:r}=(0,s8.KR)()[t];return(0,a.jsxs)(tW._2,{onSelect:()=>s(r),children:[n?null:(0,a.jsx)(l,{size:16,className:"me-2"}),i]})}var aM=s(15041),aR=s(28951),aA=s(93220);let aD=e=>{let{selectedImage:t,isPeekingParent:s,isFinalImageLoaded:n,setIsFinalImageLoaded:l,isParentImageLoaded:i,setIsParentImageLoaded:r}=e,[o,d]=(0,f.useState)([]),[u,m]=(0,f.useState)(!0),h=(0,f.useMemo)(()=>"streaming"===t.state,[t.state]),x=(0,f.useMemo)(()=>!!(t.generatedImageHeight&&t.generatedImageWidth),[t.generatedImageHeight,t.generatedImageWidth]),p=(0,f.useMemo)(()=>t.generatedImageHeight&&t.generatedImageWidth?t.generatedImageWidth/t.generatedImageHeight:4/3,[t.generatedImageHeight,t.generatedImageWidth]);return(0,f.useEffect)(()=>{(h||!u)&&(null==t?void 0:t.progressMap)?d(t.progressMap):!h&&(null==t?void 0:t.url)?d(e=>[...e,{progress:1,imageUrl:t.url||""}]):d([])},[h,null==t?void 0:t.url,null==t?void 0:t.progressMap,u]),(0,f.useEffect)(()=>{h&&u&&m(!1),h||!n||u||m(!0)},[h,n,u]),(0,a.jsx)("figure",{className:(0,c.cn)("relative group/image w-full max-w-5xl 2xl:max-w-6xl overflow-hidden rounded-lg"),children:(0,a.jsx)(v.N,{mode:"wait",children:h||!u?x?(0,a.jsx)(j.P.div,{initial:{opacity:0,filter:"blur(4px)"},animate:{opacity:1,filter:"blur(0px)"},exit:{opacity:1,filter:"blur(0px)",transition:{delay:1.5}},transition:{ease:"easeInOut"},className:"h-full mx-auto",style:{aspectRatio:p,maxHeight:t.generatedImageHeight},children:(0,a.jsx)(aR.L,{status:"streaming",intermediateResults:o,isModerated:t.isModerated,aspectRatio:p})},"streaming-image"):(0,a.jsx)(aA.$,{}):(0,a.jsxs)("div",{className:"flex relative items-center justify-center w-full h-full",children:[t.url&&(0,a.jsxs)(a.Fragment,{children:[!n&&(0,a.jsx)(aA.$,{className:"absolute z-20 inset-0"}),(0,a.jsx)(j.P.img,{variants:{hidden:{opacity:0,filter:"blur(4px)"},visible:{opacity:1,filter:"blur(0px)"}},exit:"hidden",animate:t&&s||!n?"hidden":"visible",transition:{ease:"easeInOut"},src:t.url,alt:"active-image",className:"max-h-full aspect-auto rounded-lg",onLoad:()=>l(!0)},"finished-image")]}),(0,a.jsx)(v.N,{children:!h&&t&&s&&(0,a.jsxs)(j.P.div,{variants:{hidden:{opacity:0,filter:"blur(4px)"},visible:{opacity:1,filter:"blur(0px)"}},initial:"hidden",exit:"hidden",animate:"visible",transition:{ease:"easeInOut"},className:"absolute z-10 w-full h-full flex items-center overflow-hidden",children:[!i&&(0,a.jsx)(aA.$,{className:"absolute z-20 inset-0"}),(0,a.jsx)(j.P.img,{variants:{hidden:{opacity:0,filter:"blur(4px)"},visible:{opacity:1,filter:"blur(0px)"}},animate:i?"visible":"hidden",src:t.parentImageUrl,alt:"parent-image",className:"max-h-full aspect-auto mx-auto rounded-lg",onLoad:()=>r(!0)},"parent-image")]},"parent-image-container")})]})})})};var aT=s(70888),aB=s(59996);let aF=e=>{let{children:t,onUploadImage:s}=e,{t:n}=(0,d.Bd)("base"),i=(0,aT.x)(L.A("fetchUploadFile")),r=(0,aT.x)(L.A("removeByConversationId")),o=(0,l.aP)(L.A("conversationId")),c=(0,sS.K)(),u=(0,f.useRef)(null),[x,p]=(0,f.useState)(!1),[g,y]=(0,f.useState)(!1),[b,w]=(0,f.useState)(!1),k=(0,f.useCallback)(()=>{var e;null==(e=u.current)||e.click()},[]),N=(0,f.useCallback)(async(e,t)=>{let a;if(1!==e.length||!e[0])return void tb.oR.error(n("image-editor.one-upload-allowed","Only a single image file is allowed"));if(!["image/png","image/jpeg","image/jpg","image/webp"].includes(e[0].type))return void tb.oR.error(n("image-editor.images-only-allowed","Only image files are allowed"));y(!0);try{let t=i(e[0],o||"no_conversation_id");a=await t.metadataPromise}catch(e){c("image-editor-upload:uploadFile",e)}a instanceof Error&&c("image-editor-upload:uploadFile",a,n("image-editor.failed-to-upload","Failed to upload file")),y(!1),r(o||"no_conversation_id"),!a||a instanceof Error||s({image:a,type:t})},[n,i,o,s,r,c]),I=(0,f.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),g||p(!0)},[g]),C=(0,f.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),p(!1)},[]),S=(0,f.useCallback)(e=>{if(e.preventDefault(),e.stopPropagation(),p(!1),!g)return N(Array.from(e.dataTransfer.files),"upload")},[N,g]),E=(0,f.useCallback)(e=>{if(e.target.files)return N(Array.from(e.target.files),"upload").finally(()=>{u.current&&(u.current.value="")})},[N]),_=(0,f.useCallback)(async e=>N([e],"draw").finally(()=>{w(!1)}),[N]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(j.P.div,{initial:{opacity:0},animate:{opacity:1},onDragOver:I,onDragLeave:C,onDrop:S,className:"border resize transition-colors w-full h-full flex justify-center items-center border-border-l1 rounded-2xl p-8 mb-3 text-center ".concat(x&&!g&&"bg-surface-l1 border-border-l1"),children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-4 w-full",children:[(0,a.jsx)("div",{className:"p-4 rounded-full text-fg-secondary transition-colors bg-surface-l1",children:(0,a.jsx)(v.N,{mode:"popLayout",children:x&&!g?(0,a.jsx)(j.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:(0,a.jsx)(m.sv7,{className:"size-6"})},"files"):(0,a.jsx)(j.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:(0,a.jsx)(m.XGR,{className:"size-6"})},"image-plus")})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-primary",children:n("image-editor.empty.title","Ask Grok to create an image")}),(0,a.jsx)(v.N,{mode:"popLayout",children:g?(0,a.jsx)(j.P.p,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"text-sm text-fg-secondary whitespace-nowrap",children:n("image-editor.empty.uploading-image","Uploading image")},"uploading"):x?(0,a.jsx)(j.P.p,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"text-sm text-fg-secondary whitespace-nowrap",children:n("image-editor.empty.drop-image","Drop image here")},"dragging"):(0,a.jsx)(j.P.p,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"text-sm text-fg-secondary whitespace-nowrap",children:n("image-editor.empty.description","You can also upload an image or draw instead.")},"not-dragging")})]}),t,(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsxs)(h.$n,{variant:"outline",className:"text-fg-primary hover:bg-button-ghost-hover rounded-2xl transition-all py-2.5 px-4 h-auto *:hover:text-fg-primary *:hover:transition-colors",disabled:g,onClick:k,children:[g?(0,a.jsx)(sl.y,{size:"xxs"}):(0,a.jsx)(m._OO,{className:"size-4 text-fg-secondary"}),n("image-editor.empty.upload","Upload")]}),(0,a.jsxs)(h.$n,{variant:"outline",className:"text-fg-primary hover:bg-button-ghost-hover rounded-2xl transition-all py-2.5 px-4 h-auto *:hover:text-fg-primary *:hover:transition-colors",disabled:g,onClick:()=>{w(!0)},children:[(0,a.jsx)(m.qHZ,{className:"size-4 text-fg-secondary"}),n("image-editor.empty.draw","Draw")]})]}),(0,a.jsx)("input",{ref:u,className:"hidden",type:"file",accept:"image/png,image/jpeg,image/jpg,image/webp",onChange:E,multiple:!1,"data-testid":"file-input"})]})}),(0,a.jsx)(aB.A,{open:b,setOpen:w,onAttach:_})]})};var aL=s(47127);let aG=e=>{let{selectedImage:t,title:s,isSending:n=!1,onRegenerate:i,onClose:r}=e,{t:o}=(0,d.Bd)("base"),[c,u]=(0,f.useState)(!1),x=(0,l.aP)(e=>e.conversationId),p=(0,l.aP)(e=>e.lastMessageId),y=(0,f.useCallback)(()=>{var e;!c&&(null==t?void 0:t.url)&&(u(!0),(0,tK.G)(t.url,null==(e=t.url)?void 0:e.split("/").pop()).catch((0,eO.HX)("image-editor:handleDownload")).finally(()=>u(!1)))},[c,t]);return(0,a.jsx)("header",{className:"flex justify-between w-full items-start h-10 gap-3  relative z-30 flex-shrink-0",children:(0,a.jsxs)(v.N,{mode:"popLayout",children:[s&&(0,a.jsx)(j.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{ease:"easeInOut"},className:"w-full overflow-hidden min-w-0 hidden sm:block",children:s},JSON.stringify(s)),(0,a.jsxs)("div",{className:"flex gap-2 ml-auto shrink-0",children:[(null==t?void 0:t.state)&&["streaming","error","completed"].includes(t.state)&&(null==t?void 0:t.regenResponseId)&&(0,a.jsx)(j.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{ease:"easeInOut"},children:(0,a.jsx)(h.gx,{size:"iconMd",variant:"ghost",rounded:!0,"aria-label":o("image-editor.regenerate","Regenerate Image"),tooltipContent:o("image-editor.regenerate","Regenerate Image"),tooltipContentProps:{side:"bottom"},asChild:!0,disabled:"streaming"===t.state||n,onClick:i,children:(0,a.jsx)(j.P.button,{whileTap:(null==t?void 0:t.state)==="streaming"||n?void 0:{scale:.9},children:(0,a.jsx)(m.V$7,{className:"size-5"})})})},"regenerate"),t&&(0,a.jsx)(j.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{ease:"easeInOut"},children:(0,a.jsx)(h.gx,{variant:"ghost",size:"iconMd",rounded:!0,"aria-label":o("image-editor.download-image","Download Image"),tooltipContent:o("image-editor.download-image","Download Image"),tooltipContentProps:{side:"bottom"},disabled:"streaming"===t.state||!t.url||c,onClick:y,children:(0,a.jsx)(aL.p,{children:c?(0,a.jsx)(sl.y,{size:"xs"}):(0,a.jsx)(m.KXi,{className:"size-5"})},c?"is-downloading":"download-icon")})},"download"),x&&p&&(0,a.jsx)(j.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{ease:"easeInOut"},children:(0,a.jsx)(g.w,{variant:"ghost",size:"iconMd",rounded:!0,conversationId:x,responseId:p,iconProps:{size:20}})},"share"),r&&(0,a.jsx)(h.$n,{"aria-label":o("iamge-editor.close","Close Image Editor"),variant:"ghostSecondary",size:"iconMd",rounded:!0,onClick:r,children:(0,a.jsx)(m.uv5,{size:20})})]})]})})},aO=e=>{let{images:t,selectedImageId:s,onSelect:n}=e,l=(0,f.useRef)(null),i=(0,f.useRef)(null),r=(0,f.useRef)(0),o=(e,t)=>{let s={left:t.scrollLeft,top:t.scrollTop,right:t.scrollLeft+t.clientWidth,bottom:t.scrollTop+t.clientHeight},a={left:e.offsetLeft,top:e.offsetTop,right:e.offsetLeft+e.offsetWidth,bottom:e.offsetTop+e.offsetHeight};return a.left>=s.left&&a.right<=s.right&&a.top>=s.top&&a.bottom<=s.bottom};return(0,f.useEffect)(()=>{if(t.length>0&&l.current&&s){let e=l.current,t=e.querySelector('[data-image-id="'.concat(s,'"]'));t&&!o(t,e)&&t.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})}},[t.length,s,t]),(0,f.useEffect)(()=>{let e=e=>{if(0===t.length||!s||document.activeElement&&("INPUT"===document.activeElement.tagName||"TEXTAREA"===document.activeElement.tagName||"DIV"===document.activeElement.tagName))return;let a=t.findIndex(e=>e.id===s);if(-1===a)return;let l=a;switch(e.key){case"ArrowLeft":case"ArrowUp":e.preventDefault(),l=a>0?a-1:t.length-1;break;case"ArrowRight":case"ArrowDown":e.preventDefault(),l=a<t.length-1?a+1:0;break;default:return}let o=Date.now();if(o-r.current>=150){r.current=o;let e=t[l];e&&n(e)}else i.current&&clearTimeout(i.current),i.current=setTimeout(()=>{r.current=Date.now();let e=t[l];e&&n(e)},150-(o-r.current))};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e),i.current&&clearTimeout(i.current)}},[t,s,n]),(0,a.jsx)(j.P.aside,{ref:l,className:"flex @lg:flex-col @lg:max-h-full @lg:w-auto w-fit max-w-full h-auto overflow-auto items-center justify-start gap-2 z-30 px-4 py-1 @lg:px-1 @lg:py-4",variants:{visible:{opacity:1},hidden:{opacity:0}},initial:"hidden",animate:"visible",exit:"hidden",children:(0,a.jsx)(v.N,{mode:"popLayout",children:t.map(e=>(0,a.jsx)(j.P.button,{"data-image-id":e.id,className:(0,c.cn)("size-20 shrink-0 relative rounded-xl border bg-background p-1 pointer-events-auto",{"ring-primary ring-2":e.id===s}),onClick:()=>n(e),whileTap:e.id!==s?{scale:.95}:{},variants:{visible:{opacity:1},hidden:{opacity:0},selected:{scale:1.05,opacity:1,transition:{duration:.15}}},initial:"hidden",animate:e.id===s?"selected":"visible",exit:"hidden",children:(0,a.jsx)("div",{className:"relative h-full w-full overflow-hidden rounded-lg",children:(0,a.jsx)("figure",{className:"absolute -translate-x-1/2 left-1/2 h-full aspect-[4/3] pointer-events-none",children:(0,a.jsx)(aR.L,{isModerated:e.isModerated,status:"streaming"===e.state?"streaming":"finished",iconSize:24,intermediateResults:"streaming"===e.state?e.progressMap:[{progress:1,imageUrl:e.url}]})})})},e.id))})},"image-editor-option-nav")};var aU=s(30693),aq=s(4423),aW=s(43035),aK=s(34500);let aV=e=>{let{selectedImage:t,isSending:s,isStreaming:n,onSend:l}=e,{editImagePresets:i}=(0,aU.F)(),r=(0,tT.Di)(),[o,c]=(0,f.useState)(null),[d,u]=(0,f.useState)(null),m=(0,f.useMemo)(()=>!t||n||s,[n,s,t]),x=(0,f.useCallback)(e=>{c(t=>t===e?null:e)},[c]),p=(0,f.useCallback)(e=>{if(t&&!n&&!s)return c(null),l(e.prompt,e.presetId)},[n,t,s,l]),g=(0,f.useCallback)(e=>{let t=document.querySelector('[data-preset-id="'.concat(e,'"]'));if(!t)return{};let s=t.getBoundingClientRect();return s.right+12+200>window.innerWidth?{left:s.left-200-12,top:s.top+(s.height-150)/2}:{left:s.right+12,top:s.top+(s.height-150)/2}},[]);return(0,f.useEffect)(()=>{if(!o||r)return void u(null);let e=()=>{let e=document.body.querySelector("[data-highlighted][data-preset-id]"),t=(null==e?void 0:e.getAttribute("data-preset-id"))||null;t&&u(t)};e();let t=new MutationObserver(e);return t.observe(document.body,{attributes:!0,attributeFilter:["data-highlighted"],subtree:!0}),()=>{t.disconnect()}},[o,r]),(0,a.jsx)("div",{className:"flex w-full xs:justify-center justify-start items-center overflow-x-auto xs:overflow-visible gap-2 xs:gap-3 relative z-30 no-scrollbar",children:i.map((e,t)=>(0,a.jsx)(j.P.div,{variants:{hidden:{opacity:0,y:10},visible:{opacity:1,y:0}},initial:"hidden",animate:"visible",transition:{duration:.15,ease:"easeInOut",delay:.06*t},className:"bg-surface-base rounded-full",children:r?(0,a.jsxs)(aK._s,{open:e.category===o,onOpenChange:t=>{t?c(e.category):c(null)},children:[(0,a.jsx)(aK.Uz,{disabled:m,asChild:!0,children:(0,a.jsx)(a$,{category:e,disabled:m})}),(0,a.jsxs)(aK.zj,{className:"max-h-[90dvh]",children:[(0,a.jsx)(aK.BE,{children:(0,a.jsxs)(aK.gk,{className:"flex items-center justify-center gap-2",children:[e.icon&&f.createElement(e.icon,{size:20,className:"text-secondary flex-shrink-0"}),e.label]})}),(0,a.jsx)("div",{className:"p-2 space-y-2 overflow-auto",children:e.presets.map(e=>(0,a.jsxs)(h.$n,{variant:"ghost",size:"lg",className:"w-full flex items-center justify-start gap-3 h-auto py-3",onClick:()=>p(e),children:[e.icon&&f.createElement(e.icon,{size:18,className:"text-secondary flex-shrink-0"}),(0,a.jsx)("span",{children:e.label})]},e.presetId))})]})]}):(0,a.jsxs)(tW.rI,{open:e.category===o,onOpenChange:()=>x(e.category),children:[(0,a.jsx)(tW.ty,{disabled:m,asChild:!0,children:(0,a.jsx)(a$,{category:e,disabled:m})}),(0,a.jsx)(tW.SQ,{hideWhenDetached:!0,side:"top",sideOffset:8,className:"min-w-60 space-y-0.5",onMouseLeave:()=>{u(null)},onWheel:e=>e.stopPropagation(),onKeyDown:e=>e.stopPropagation(),children:e.presets.map(t=>(0,a.jsxs)(tW._2,{"data-preset-id":t.presetId,className:"flex items-center gap-2",onSelect:()=>p(t),children:[t.icon&&f.createElement(t.icon,{size:16,className:"text-secondary flex-shrink-0"}),t.label,d===t.presetId&&(0,aW.createPortal)((0,a.jsxs)(j.P.div,{layoutId:"preset-preview",className:"fixed w-[200px] h-[150px] bg-surface-l4 border border-border-l1 rounded-2xl shadow-lg z-50 pointer-events-none flex items-center justify-center p-1.5",style:g(t.presetId),children:[(0,a.jsx)(aA.$,{className:"absolute inset-0"}),t.previewUrl&&(0,a.jsx)(aq.default,{src:t.previewUrl,alt:t.presetId,width:200,height:150,priority:!r&&o===e.category,className:"w-full h-full object-cover rounded-xl relative z-10"})]}),document.body)]},t.presetId))})]})},e.category))})},a$=f.forwardRef((e,t)=>{let{category:s,disabled:n,...l}=e;return(0,a.jsxs)(h.$n,{ref:t,size:"md",variant:"filledSecondary",rounded:!0,className:(0,c.cn)(!n&&"*:hover:text-primary transition-all"),disabled:n,...l,children:[s.icon&&f.createElement(s.icon,{size:16,className:"flex-shrink-0 text-secondary transition-colors"}),(0,a.jsx)("span",{children:s.label})]})});var aH=s(63174),aY=s(30388);let aQ=e=>{let{selectedImage:t,isSending:s,isStreaming:n,isWaitingForResponse:l,isAborting:i,inputValue:r,onInputValueChange:o,onSend:u,onAbort:h}=e,{t:x}=(0,d.Bd)("base"),p=(0,f.useRef)(null),g=(0,f.useRef)(null),y=(0,f.useMemo)(()=>n||s||l,[n,s,l]),b=(0,f.useMemo)(()=>!s&&!l&&!n&&!!r.trim(),[s,r,n,l]);(0,f.useEffect)(()=>{if(!y&&g.current){let e=setTimeout(()=>{var e;null==(e=g.current)||e.focus()},50);return()=>clearTimeout(e)}},[y]);let w=(0,f.useCallback)(e=>{var t;e.preventDefault(),!y&&r.trim()&&(u(r),null==(t=g.current)||t.focus())},[u,y,r]),k=(0,f.useCallback)(e=>{if(e.stopPropagation(),"Enter"===e.key&&!e.metaKey&&!e.ctrlKey&&!e.shiftKey&&!e.nativeEvent.isComposing){var t;e.preventDefault(),null==(t=p.current)||t.dispatchEvent(new Event("submit",{cancelable:!0,bubbles:!0}))}},[]);return(0,a.jsxs)("form",{className:(0,c.cn)("w-full rounded-[32px] p-3 bg-surface-l2 shadow shadow-input-border/10 flex gap-2 pl-5 items-end ring-1 ring-input-border ring-inset"),onSubmit:w,ref:p,children:[(0,a.jsx)(v.N,{children:y&&(0,a.jsx)(j.P.div,{initial:{opacity:0},animate:{opacity:1,transition:{duration:.1}},className:"pb-1.5 -ml-0.5",children:(0,a.jsx)(aY.d,{})},"loading-indicator")}),(0,a.jsx)(aH.A,{ref:g,className:(0,c.cn)("w-full @[480px]/input:px-3 bg-transparent focus:outline-none text-primary align-bottom resize-none pb-1.5 transition-all outline-transparent",y&&"animate-pulse"),onChange:e=>o(e.target.value),value:y?"":r,placeholder:y?x("image-editor.generating","Generating"):t?x("image-editor.describe-edits","Describe your edits"):x("image-editor.describe-image","Describe the image you want"),minRows:1,onKeyDown:k,disabled:y,name:"query",maxRows:5}),(0,a.jsx)("div",{className:(0,c.cn)("ml-auto flex flex-row items-end gap-1"),children:y?(0,a.jsx)(j.P.button,{whileTap:{scale:.95},initial:{scale:.95,opacity:1},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:.5,transition:{duration:.2}},className:(0,c.cn)("group flex flex-col justify-center rounded-full focus:outline-none focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring"),disabled:i,onClick:e=>{e.preventDefault(),h()},children:(0,a.jsx)("div",{className:(0,c.cn)("h-9","aspect-square flex flex-col items-center justify-center rounded-full","rounded-full ring-1 ring-inset","bg-primary text-background ring-button-outline-border"),children:(0,a.jsx)(m.M6A,{size:20})})}):(0,a.jsx)(j.P.button,{initial:{opacity:.5},animate:{opacity:1,transition:{duration:.1}},whileHover:t?{scale:1.1}:void 0,whileTap:t?{scale:.95}:void 0,className:(0,c.cn)("group flex flex-col justify-center rounded-full focus:outline-none focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring"),type:"submit","aria-label":x("image-editor.submit","Submit"),disabled:!b,children:(0,a.jsx)("div",{className:(0,c.cn)("h-9 relative","aspect-square flex flex-col items-center justify-center","rounded-full ring-1 ring-inset duration-100","before:absolute before:inset-0 before:rounded-full before:bg-primary before:ring-0 before:transition-all duration-500",b?"bg-primary text-background ring-transparent before: before:[clip-path:circle(50%_at_50%_50%)]":"bg-button-secondary text-secondary before:[clip-path:circle(0%_at_50%_50%)] ring-0"),children:(0,a.jsx)(m.Kpk,{size:20,className:"relative"})})})})]})},aX=e=>{let{images:t,selectedImage:s,title:n,inputValue:l,queryBarPosition:i="bottom",onInputValueChange:r,hideHeader:o=!1,hideQueryBar:u=!1,isAborting:m=!1,isSending:h=!1,isStreaming:x=!1,isWaitingForResponse:p=!1,onImageSelect:g,onSendQuery:v,onRegenerate:j,onAbort:y,onImageUpload:b,onClose:w}=e,{t:k}=(0,d.Bd)("base"),[N,I]=(0,tA.M)("image-editor-first-open",!0),[C,S]=(0,f.useState)(!1),[E,_]=(0,f.useState)(!1),[z,P]=(0,f.useState)(!1),M=(0,f.useMemo)(()=>(0,a.jsx)(aD,{selectedImage:s,isPeekingParent:C,setIsPeekingParent:S,isParentImageLoaded:E,isFinalImageLoaded:z,setIsFinalImageLoaded:P,setIsParentImageLoaded:_}),[s,C,E,z]),R=(0,f.useMemo)(()=>"center"===i&&!x&&!s&&!p&&!u,[i,x,s,p,u]);return(0,f.useEffect)(()=>{if(null==s?void 0:s.url){P(!1);let e=new Image;e.onload=()=>P(!0),e.src=s.url}},[null==s?void 0:s.url]),(0,f.useEffect)(()=>{if(null==s?void 0:s.parentImageUrl){_(!1);let e=new Image;e.onload=()=>_(!0),e.src=null==s?void 0:s.parentImageUrl}},[null==s?void 0:s.parentImageUrl]),(0,f.useEffect)(()=>{N&&(I(!1),tb.oR.message((0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-fg-primary font-bold",children:k("image-editor-welcome.title","Welcome to Image Editor")}),(0,a.jsx)("p",{className:"text-fg-secondary",children:k("image-editor-welcome.description","A focused space for you to transform images with Grok to anything you can imagine.")})]}),{duration:7e3}))},[N,I,k]),(0,a.jsxs)("div",{className:"flex flex-col items-center justify-between w-full h-full relative @container",children:[(0,a.jsxs)("div",{className:(0,c.cn)("flex flex-col gap-8 w-full mb-6 sm:mb-10",{"sm:mb-0":o&&!s}),children:[!o&&(0,a.jsx)(aG,{selectedImage:s,title:n,isSending:h,onRegenerate:j||(()=>{}),onClose:w}),s&&t.length>1&&(0,a.jsxs)("div",{className:"w-full h-[88px] @lg:h-auto relative @lg:absolute @lg:w-auto @lg:right-0 @lg:bottom-0 @lg:top-14 grid place-items-center @lg:mx-0",children:[(0,a.jsx)("div",{className:"absolute inset-y-0 -right-3 bg-gradient-to-l w-8 @lg:bottom-auto @lg:right-0 @lg:left-0 @lg:w-full @lg:-top-3 @lg:h-8 @lg:bg-gradient-to-b from-surface-l1 via-surface-l1 dark:from-surface-inset dark:via-surface-inset to-transparent z-40"}),(0,a.jsx)("div",{className:"absolute inset-y-0 -left-3 bg-gradient-to-r w-8 @lg:top-auto  @lg:right-0 @lg:left-0 @lg:w-full @lg:-bottom-3 @lg:h-8 @lg:bg-gradient-to-t from-surface-l1 via-surface-l1 dark:from-surface-inset dark:via-surface-inset to-transparent z-40"}),t.length>1&&(0,a.jsx)(aO,{images:t,selectedImageId:s.id,onSelect:g||(()=>{})})]})]}),p||x&&!s?(0,a.jsx)(aA.$,{}):s?M:(0,a.jsx)("div",{className:"w-full h-full max-w-7xl",children:(0,a.jsx)(aF,{onUploadImage:b||(()=>{}),children:R&&(0,a.jsx)("div",{className:"w-full max-w-xl",children:(0,a.jsx)(aQ,{selectedImage:s,isWaitingForResponse:p,isStreaming:x,isSending:h,isAborting:m,inputValue:l||"",onInputValueChange:r||(()=>{}),onSend:v||(()=>{}),onAbort:y||(()=>{})})})})}),!R&&(0,a.jsx)("footer",{className:"relative w-full max-w-2xl h-16 flex-shrink-0 mt-12 sm:mt-20",children:(0,a.jsxs)("div",{className:"absolute bottom-0 inset-x-0 flex flex-col gap-4",children:[!!s&&(0,a.jsx)(aV,{isStreaming:x,isSending:h,selectedImage:s,onSend:v||(()=>{})}),!u&&(0,a.jsx)(aQ,{selectedImage:s,isWaitingForResponse:p,isSending:h,isStreaming:x,isAborting:m,inputValue:l||"",onInputValueChange:r||(()=>{}),onSend:v||(()=>{}),onAbort:y||(()=>{})})]})})]})};var aJ=s(35501);let aZ=()=>{let{push:e}=(0,C.wK)(),{t}=(0,d.Bd)("base"),{ASSET_SERVER_URL:s}=(0,tr.v)(),n=(0,w.h)(),i=(0,eX._)(),r=(0,sQ.R)(e=>e.loadRecent),o=(0,l.aP)(L.A("streamedMessageId")),c=(0,l.aP)(L.A("setConversationId")),h=(0,l.aP)(L.A("setStreamedMessageId")),x=(0,eq.A3)(L.A("byId")),g=(0,eq.A3)(e=>e.byId[null!=o?o:""]),[v,j]=(0,f.useState)(!1),[y,b]=(0,f.useState)(!1),[k,N]=(0,f.useState)(""),[I,E]=(0,f.useState)([]),[_,z]=(0,f.useState)(null),[P,M]=(0,f.useState)(!1),[R,A]=(0,f.useState)(!1),[D,T]=(0,f.useState)(!1),B=(0,f.useMemo)(()=>I.find(e=>e.id===_)||null,[I,_]),F=(0,f.useCallback)(e=>{let a=eq.A3.getState().byId[e.parentResponseId||""],n="streaming"===e.state;return Object.entries(e.streamingImageById||{}).map(l=>{let[i,r]=l,o=Object.keys(r).map(Number),c=r[Math.max(...o)];return{id:i,url:(0,tx.sU)(s,null==c?void 0:c.imageUrl),state:n?"streaming":"completed",isModerated:!1,title:(null==a?void 0:a.imageEditUri)?t("image-editor.edited-image","Edited image"):t("image-editor.generated-image","Generated image"),description:null==a?void 0:a.message,regenResponseId:null==a?void 0:a.responseId,progressMap:n?o.map(e=>{var t;return{progress:e/100,imageUrl:(0,tx.sU)(s,null==(t=r[e])?void 0:t.imageUrl)}}):void 0,generatedImageWidth:n?e.generatedImageWidth:void 0,generatedImageHeight:n?e.generatedImageHeight:void 0}})},[s,t]),G=(0,f.useCallback)(e=>{e.length&&E(t=>{if(t.find(e=>e.id.includes("optimistic-streaming-image"))){let a=t.filter(e=>!e.id.includes("optimistic-streaming-image")).concat(e);if(!a.some(e=>e.id===_)){var s;z((null==(s=a[a.length-1])?void 0:s.id)||null)}return a}{let s=t.map(t=>e.find(e=>e.id===t.id)||t),a=e.filter(e=>!s.some(t=>t.id===e.id));return[...s,...a]}})},[E,_]),O=(0,f.useCallback)(t=>{var s;let{image:a,type:n}=t;return"upload"===n?i("image_editor_upload",void 0,{location:"empty-image-workbench"}):"draw"===n&&i("image_editor_draw",void 0,{location:"empty-image-workbench"}),e({page:"files",fileId:null!=(s=a.fileMetadataId)?s:null,emptyView:"default"}),r()},[e,r,i]),U=(0,f.useCallback)(()=>{e({page:"files",fileId:null,emptyView:"default"})},[e]),q=(0,f.useCallback)(e=>{let t=eW.C$.getState(),s=l.aP.getState();"none"!==s.reasoningMode&&s.setReasoningMode("none");let a={message:e,toolOverrides:{imageGen:!0},enableRetries:n.ENABLE_AUTO_STREAM_RETRY};return i("image_editor_generate",void 0,{location:"empty-image-workbench",message:e,messageLength:String(e.length)}),j(!0),A(!1),T(!0),N(""),s.establishNewConversation({...a,temporary:t.isIncognito,disableToolComposer:!0,toolOverrides:{imageGen:!0},ff:n})},[n,N,i]),W=(0,f.useCallback)(async e=>(b(!0),e().then(()=>{c(void 0),h(void 0),j(!1),E([]),z(null),M(!1)}).finally(()=>{b(!1)})),[c,h]),K=(0,aM.m)("empty-image-workbench:handleAbort",W),V=(0,f.useCallback)(()=>{D&&(T(!1),tb.oR.error(t("image-editor.failed-to-generate","Failed to generate image"))),c(void 0),j(!1),b(!1),E([]),z(null),M(!1)},[t,c,D]);return(0,f.useEffect)(()=>{if(!R)if(g&&"streaming"===g.state){let e=F(g);if(!g.imageAttachmentCount||e.length||P)(null==e?void 0:e.length)&&(G(e),j(!1));else{let e=Array.from({length:g.imageAttachmentCount}).map((e,s)=>({id:"optimistic-streaming-image-".concat(s),url:"",state:"streaming",isModerated:!1,title:t("image-editor.generated-image","Generated image"),description:g.message,progressMap:[],generatedImageWidth:g.generatedImageWidth,generatedImageHeight:g.generatedImageHeight}));E(t=>[...t,...e]),e[0]&&z(e[0].id),M(!0)}}else if(g&&("error"===g.state||g.error))V();else{M(!1);let t=[];if(g&&"closed"===g.state){var s,a,n,l,i;t=F(g);let o=null==(l=g.streamingImageById)||null==(a=l[null!=(i=null==(n=Object.keys(g.streamingImageById||{}))?void 0:n[0])?i:""])||null==(s=a[100])?void 0:s.assetId;t.length>0&&!R&&o&&(A(!0),r().then(()=>(c(void 0),h(void 0),e({page:"files",fileId:o}))).catch(V))}G(t)}},[g,F,G,E,t,v,P,_,x,R,V,e,r,c,h]),(0,a.jsx)(p.YZ,{direction:"horizontal",autoSaveId:"workbench",className:"bg-surface-l1 dark:bg-surface-inset",children:(0,a.jsx)(p.Zk,{order:1,minSize:50,defaultSize:100,className:"flex flex-col max-h-[100vh] h-[100vh]",children:(0,a.jsxs)("div",{className:"flex flex-col h-full max-h-full",children:[(0,a.jsx)("div",{className:"h-12 min-h-12 flex items-center justify-end px-4",children:(0,a.jsx)(S.$n,{"aria-label":t("image-editor.close","Close Image Editor"),shape:"square",variant:"tertiary",size:"sm",onClick:U,children:(0,a.jsx)(m.uv5,{className:"size-5"})})}),(0,a.jsx)("div",{className:"flex-1 relative overflow-hidden",children:(0,a.jsx)("div",{className:"w-full max-w-full relative h-full max-h-full",children:(0,a.jsx)(u.t,{fallbackRender:()=>(0,a.jsx)(aJ.f,{}),children:(0,a.jsx)("div",{className:"flex flex-col h-full max-h-full p-2 lg:p-6 pt-8 w-full bg-surface-l1 dark:bg-surface-inset",children:(0,a.jsx)(aX,{queryBarPosition:"center",isStreaming:!!g&&"streaming"===g.state,selectedImage:B,images:I,isWaitingForResponse:v,isAborting:y,inputValue:k,hideHeader:!0,onImageSelect:e=>z(e.id),onInputValueChange:N,onSendQuery:q,onImageUpload:O,onAbort:K,onClose:U})})})})})]})})})};var a0=s(15665),a1=s(77204),a2=s(97225),a5=s(1729),a4=s(52542),a3=s(56),a6=s(61079),a8=s(26676),a9=s(7658),a7=s(3683);function ne(e){let{asset:t,size:s="sm"}=e,{t:n}=(0,d.Bd)("files"),l=(0,a7.M)(e=>e.listStatus),i=(0,a7.M)(e=>e.loadFirstPage);(0,f.useEffect)(()=>{"ready"!==l&&i()},[l,i]);let r=(0,a7._)(),{add:o}=(0,a6.O)(),u=(0,f.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),o().catch((0,eO.HX)("add-to-workspace-button:create-workspace"))},[o]);return(0,a.jsxs)(tW.rI,{children:[(0,a.jsx)(tW.ty,{asChild:!0,children:(0,a.jsx)(S.gx,{variant:"tertiary",shape:"square",size:s,tooltipContent:n("add-to-project-button.tooltip","Add to Project"),children:(0,a.jsx)(m.XRf,{size:18})})}),(0,a.jsxs)(tW.SQ,{className:"w-[250px] p-2 rounded-3xl flex flex-col gap-0.5",sideOffset:0,children:[!(null==r?void 0:r.length)&&(0,a.jsx)(a3.C,{content:n("No projects yet","No projects yet"),ctaText:n("Create Project","Create Project"),onClickCta:u},"no-workspaces"),r.length&&(0,a.jsx)("div",{className:(0,c.cn)("py-1 pl-2 text-sm text-secondary font-semibold sticky top-0"),children:n("add-to-project-menu-item","Add to Project")}),r.map(e=>(0,a.jsx)(nt,{workspaceId:e.workspaceId,asset:t},e.workspaceId))]})]},"add-to-workspace-button")}function nt(e){var t;let{workspaceId:s,asset:n}=e,l=(0,eX._)(),i=(0,a7.M)(e=>{var t;return null==(t=e.byId[s])?void 0:t.data}),{mutate:r,error:o}=(0,a9.mT)(s);(0,sS.Y)("attach-dropdown:attachAsset",o);let{data:d}=(0,a9.UL)(s),u=null==d||null==(t=d.assets)?void 0:t.some(e=>e.assetId===n.assetId),m=(0,f.useCallback)(e=>{n.assetId&&(r({assetId:n.assetId}),l("add_to_workspace",void 0,{location:"add-to-workspace-button",workspaceId:s,assetId:n.assetId}))},[r,n,l,s]);return(0,a.jsxs)(S.$n,{className:(0,c.cn)(a2.mI,"rounded-2xl"),variant:"tertiary",size:"md",shape:"rectangle",onClick:m,disabled:u,children:[(0,a.jsx)(a8.n,{icon:null==i?void 0:i.icon,sizeClass:"size-4",rounded:!0,buttonSize:"iconXs",disabled:!0}),(0,a.jsx)("span",{className:(0,c.cn)("flex-1 select-none text-nowrap max-w-full overflow-hidden text-left"),style:{maskImage:e9.uU,WebkitMaskImage:e9.uU},children:null==i?void 0:i.name})]})}var ns=s(50672),na=s(42143),nn=s(48756),nl=s(93875),ni=s(62454),nr=s(30964),no=s(87549),nc=s(52371);function nd(e){let{mode:t,setMode:s}=e,{t:n}=(0,d.Bd)("chat");return(0,a.jsx)(nc.tU,{className:"flex-1 flex-row justify-start flex no-a11y-check",defaultValue:"code",value:t,onValueChange:e=>s(e),children:(0,a.jsxs)(nc.j7,{children:[(0,a.jsxs)(nc.Xi,{className:"gap-1",value:"code","aria-label":n("Code","Code"),children:[(0,a.jsx)(m.CyN,{className:"size-4"}),(0,a.jsx)("span",{className:"hidden md:inline",children:n("Code","Code")})]}),(0,a.jsx)(nc.Xi,{className:"gap-1",value:"preview","aria-label":n("Preview","Preview"),children:(0,a.jsx)("span",{className:"hidden md:inline",children:n("Preview","Preview")})})]})})}var nu=s(69580);let nm=e=>{let{mimetype:t,content:s}=e;if("text/html"===t)return(0,a.jsx)(nu.Z,{srcDoc:s,autofocus:!0})};var nh=s(8800);let nx=e=>{let{code:t,mimetype:s,consoleRef:a}=e,n=(0,f.useRef)([]),{t:l}=(0,d.Bd)(["chat"]),i=l("code-execution.done","Done"),r=(0,a5.I5)(s),{runCode:o,loading:c,result:u,codeExecutionAvailable:m}=(0,nh.P)(t,r);(0,f.useEffect)(()=>{var e;null==(e=a.current)||e.reset()},[a,t]);let h=(0,f.useCallback)(()=>{var e;null==(e=a.current)||e.reset(),n.current=[],o()},[a,o]);return(0,f.useEffect)(()=>{var e,t,s,l,r,o,c,d;if(!u)return;let{stdout:m,stderr:h,outputFiles:x,success:f}=u;m&&!n.current.includes(m)&&(null==(e=a.current)||e.open(),n.current.push(m),null==(t=a.current)||t.addMessage({type:"log",message:m})),h&&!n.current.includes(h)&&(null==(s=a.current)||s.open(),n.current.push(h),null==(l=a.current)||l.addMessage({type:"error",message:h,disableFixButton:!0}));let p=Object.values(x).join(",");x&&Object.values(x).length>0&&!n.current.includes(p)&&(null==(r=a.current)||r.open(),n.current.push(p),null==(o=a.current)||o.addMessage({type:"log",files:x})),f&&!n.current.includes(i)&&0===n.current.length&&(null==(c=a.current)||c.open(),n.current.push(i),null==(d=a.current)||d.addMessage({type:"system",message:i}))},[a,u,i]),{runCode:h,isCodeRunning:c,codeExecutionResult:u,isCodeExecutionAvailable:m()}},nf=e=>{let{mimetype:t,isCodeExecutionAvailable:s}=e;return s?"run":["text/html"].includes(t)?"preview":"none"};var np=s(71865);let ng={size:18,strokeWidth:2};var nv=s(87853),nj=s(33018),ny=s(66408),nb=s(14990);function nw(e){return null!=e}var nk=s(4357),nN=s(57137),nI=s(48085);let nC={size:18,strokeWidth:2};var nS=s(1451);s(23332);var nE=s(58192),n_=s(36889),nz=s(52265);let nP=e=>{let{file:t,content:s}=e,a=(0,eX._)(),{ASSET_SERVER_URL:n}=(0,tr.v)(),l=(0,tx.sU)(n,t.fileUri);return{handleDownload:(0,f.useCallback)(()=>{if(l||s)if(a("file_content_download_click","",{location:"spreadsheet-workbench:useFileActions:handleDownload",contentType:t.fileMimeType}),s){let e=new Blob([s],{type:t.fileMimeType});(0,nz.W)(e,t.fileName)}else l&&(0,nz.z)(l,t.fileName)},[a,l,s,t.fileName,t.fileMimeType])}},nM={size:18,strokeWidth:2};var nR=s(61884),nA=s(47934);function nD(e){let{asset:t}=e,s=(0,s$.B)(t),{t:n}=(0,d.Bd)("files"),{ASSET_SERVER_URL:l}=(0,tr.v)(),i=(0,eX._)(),r=(0,f.useCallback)(()=>{var e,s,a,n,r;i("file_content_download_click",void 0,{location:"unknown-workbench",contentType:null!=(s=t.mimeType)?s:"unknown",assetId:null!=(a=t.assetId)?a:"",assetName:null!=(n=t.name)?n:"",assetSize:null!=(r=null==(e=t.sizeBytes)?void 0:e.toString())?r:""});let o=(0,tx.sU)(l,t.key);if(!o)return;let c=document.createElement("a");c.href=o,c.download="file",document.body.appendChild(c),c.click(),document.body.removeChild(c),window.URL.revokeObjectURL(o)},[i,l,t]),o=n("read-only-indicator-tooltip","Grok can't edit this type of file but can still answer questions about it");return(0,a.jsx)(nr.U,{editor:(0,a.jsx)(nj.H,{hideEdit:!0,fileMetadata:s,onClose:()=>{},className:"border-none shadow-none max-w-none"}),assetId:t.assetId,conversationId:t.currentConversationId,editorHeader:(0,a.jsx)(na.F,{asset:t}),headerButtons:[(0,a.jsx)(h.gx,{tooltipContent:n("Download to file","Download to file"),tooltipContentProps:{className:"text-xs"},tooltipProps:{delayDuration:300},onClick:r,rounded:!0,variant:"ghost",size:"iconSm","aria-label":n("Download to file","Download to file"),children:(0,a.jsx)(m.s3U,{strokeWidth:2,size:18})},"download-button")],chat:(0,a.jsx)(nA.s,{asset:t}),chatHeader:(0,a.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,a.jsx)("div",{className:"text-secondary",children:n("files-tab-conversation-header","File Chat")}),(0,a.jsxs)(nR.m_,{children:[(0,a.jsx)(nR.k$,{asChild:!0,children:(0,a.jsx)("span",{"aria-label":o,children:(0,a.jsx)(m.hED,{className:"w-4 h-4"})})}),(0,a.jsx)(nR.ZI,{children:o})]})]})})}let nT={markdown:function(e){var t;let{asset:s}=e,n=(0,w.h)(),{t:l}=(0,d.Bd)("files"),i=(0,np.n)(),[r,o]=(0,f.useState)(!1),{content:u,setContent:h,error:x,isEditing:p,refetch:g}=(0,ns.W)(s,r),{handleCopy:v,copyPressed:j,handleDownload:y,shareLoading:b,handleShare:k,sharePressed:N}=(0,nl.H)({assetId:s.assetId,content:null!=u?u:"",filename:null!=(t=s.name)?t:"file"}),{activeArtifact:I,isEditing:C,onSetActiveArtifact:E}=(0,ni.a)({content:null!=u?u:void 0});(0,f.useEffect)(()=>{o(C)},[C]);let _=(0,nN.l)({content:u,isEditable:!0,onUpdate:h});return null==u?(0,a.jsxs)("div",{className:"flex flex-col w-full h-full p-4",children:[(0,a.jsx)(th.E,{className:"w-[30%] h-6"}),(0,a.jsxs)("div",{className:"flex gap-2 mt-2",children:[(0,a.jsx)(th.E,{className:"w-24 h-6"}),(0,a.jsx)(th.E,{className:"w-6 h-6"}),(0,a.jsx)(th.E,{className:"w-6 h-6"}),(0,a.jsx)(th.E,{className:"w-6 h-6"}),(0,a.jsx)(th.E,{className:"w-6 h-6"}),(0,a.jsx)(th.E,{className:"w-6 h-6"}),(0,a.jsx)(th.E,{className:"w-6 h-6"})]}),(0,a.jsx)("div",{className:"flex flex-col gap-4 w-full h-full justify-center items-center py-[10%]",children:(0,a.jsxs)("div",{className:"flex flex-col h-full w-full max-w-3xl gap-2",children:[(0,a.jsx)(th.E,{className:"w-full max-w-xl mb-2 h-8"}),(0,a.jsx)(th.E,{className:"w-full max-w-3xl h-6"}),(0,a.jsx)(th.E,{className:"w-full max-w-2xl h-6"}),(0,a.jsx)(th.E,{className:"w-full max-w-xl h-6"}),(0,a.jsx)(th.E,{className:"w-full max-w-3xl h-6"}),(0,a.jsx)(th.E,{className:"w-full max-w-2xl h-6"}),(0,a.jsx)(th.E,{className:"w-full max-w-3xl h-6"}),(0,a.jsx)(th.E,{className:"w-full max-w-2xl h-6"}),(0,a.jsx)(th.E,{className:"w-full max-w-3xl h-6"}),(0,a.jsx)(th.E,{className:"w-full max-w-xl h-6"}),(0,a.jsx)(th.E,{className:"w-full max-w-xl h-6"}),(0,a.jsx)(th.E,{className:"w-full max-w-sm h-6"})]})})]}):x?(0,a.jsx)(aJ.f,{onRetryRequested:g}):(0,a.jsx)(nr.U,{editor:(0,a.jsxs)("div",{className:(0,c.cn)("no-a11y-check h-full overflow-auto max-w-full relative prose bg-surface-l1 dark:bg-surface-inset","\n  [&_.tiptap_h1.is-editor-empty:first-child::before]:text-primary/20\n  [&_.tiptap_h1.is-editor-empty:first-child::before]:text-3xl\n  [&_.tiptap_h1.is-editor-empty:first-child::before]:font-bold\n  [&_.tiptap_h1.is-editor-empty:first-child::before]:content-[attr(data-placeholder)]\n  [&_.tiptap_h1.is-editor-empty:first-child::before]:float-left\n  [&_.tiptap_h1.is-editor-empty:first-child::before]:h-0\n  [&_.tiptap_h1.is-editor-empty:first-child::before]:pointer-events-none\n"),children:[_&&null!==u?(0,a.jsx)(nk.n,{editor:_,content:u,editable:!p,className:"max-w-3xl h-full justify-self-center"}):null,p?(0,a.jsx)("div",{className:"sticky overflow-visible bottom-4 start-0 w-full flex items-center justify-center",children:(0,a.jsxs)("div",{className:"flex items-center gap-2 text-primary bg-surface-l1 px-4 py-2 rounded-full h-10 border border-border",children:[(0,a.jsx)(sl.y,{size:"sm"}),(0,a.jsx)("span",{children:l("files.editing-by-model","Editing...")})]})}):null]}),assetId:s.assetId,conversationId:s.currentConversationId,editorHeader:(0,a.jsx)(na.F,{asset:s}),editorSubheader:_?(0,a.jsx)(nI.n,{editable:!0,editor:_}):null,headerButtons:[(0,a.jsx)(S.gx,{tooltipContent:l("Copy Contents","Copy Contents"),tooltipContentProps:{className:"text-xs"},tooltipProps:{delayDuration:300},onClick:v,shape:"square",variant:"tertiary",size:"sm","aria-label":l("Copy Contents","Copy Contents"),children:(0,a.jsx)(aL.p,{children:j?(0,a.jsx)(m.Srz,{size:18}):(0,a.jsx)(m.TdU,{size:18})},j?"copied":"copy")},"copy-button"),(0,a.jsx)(S.gx,{tooltipContent:l("Download to file","Download to file"),tooltipContentProps:{className:"text-xs"},tooltipProps:{delayDuration:300},onClick:y,shape:"square",variant:"tertiary",size:"sm","aria-label":l("Download to file","Download to file"),children:(0,a.jsx)(m.KXi,{...nC,size:18})},"download-button"),n.ENABLE_FILE_SHARING&&!i?(0,a.jsx)(S.gx,{tooltipContent:l("Share file","Share file"),onClick:k,tooltipContentProps:{className:"text-xs"},shape:"square",variant:"tertiary",size:"sm","aria-label":l("Share file","Share file"),children:(0,a.jsx)(aL.p,{children:b?(0,a.jsx)(sl.y,{size:"xs"}):N?(0,a.jsx)(m.Srz,{size:18}):(0,a.jsx)(m.liv,{...nC,size:18})},b?"share-loading":N?"shared":"share")},"share-button"):null],chat:(0,a.jsx)(nn.s,{asset:s,activeArtifact:I,onArtifactSelected:E})})},csv:nv.s1,spreadsheet:function(e){var t;let{asset:s}=e,{t:n}=(0,d.Bd)("files"),l=(0,w.h)(),i=(0,s$.B)(s),{ASSET_SERVER_URL:r}=(0,tr.v)(),o=(0,sQ.R)(e=>e.setAssetContent),c=(0,sQ.fh)(null!=(t=s.assetId)?t:"","binary"),u=(0,sQ.R)(e=>e.fetchBinaryContent);(0,f.useEffect)(()=>{null==c&&s.assetId&&u(s.assetId,r)},[r,s.assetId,c,u]);let h=(0,f.useCallback)(e=>{var t;o(null!=(t=s.assetId)?t:"",e)},[s.assetId,o]),{handleDownload:x}=nP({file:i,content:c});if(!s.assetId)return(0,a.jsx)(aJ.f,{});let p=s.rootAssetId||s.assetId;return(0,a.jsx)(nr.U,{editor:(0,a.jsx)("div",{className:"flex flex-col h-full overflow-hidden",children:(0,a.jsx)(n_.bs,{id:p,initialState:{name:s.name||"Workbook"},content:c,readOnly:!l.ENABLE_XLSX_EDITING,children:void 0!==c?(0,a.jsx)(nS.y,{readOnly:!l.ENABLE_XLSX_EDITING,onContentUpdate:h,className:"border-t border-border-l1",autoFocus:!0}):null},p)}),assetId:s.assetId,conversationId:s.currentConversationId,editorHeader:(0,a.jsx)(na.F,{asset:s}),headerButtons:[(0,a.jsx)(S.gx,{tooltipContent:n("Download to file","Download to file"),tooltipContentProps:{className:"text-xs"},tooltipProps:{delayDuration:300},onClick:x,shape:"square",variant:"tertiary",size:"sm","aria-label":n("Download to file","Download to file"),disabled:!c,children:(0,a.jsx)(m.s3U,{...nM,size:18})},"download-button")],chat:(0,a.jsx)(nn.s,{asset:s,restrictedModel:nE.E8})})},image:function(e){let{asset:t}=e,{t:s}=(0,d.Bd)("base"),{ASSET_SERVER_URL:n}=(0,tr.v)(),i=(0,w.h)(),[r]=(0,tA.M)("files-tab-is-chat-open",!0),o=(0,eX._)(),{handleEditorOpen:c,consumeEditorTimeMs:u}=(0,ny.Q)(),{editImagePresets:h}=(0,aU.F)(),x=(0,sQ.R)(e=>e.loadRecent),p=(0,sQ.R)((0,al.k)(e=>e.assetsById)),g=(0,sQ.R)((0,al.k)(e=>e.listStatus)),y=(0,eq.A3)(L.A("byId")),b=(0,l.aP)(L.A("conversationId")),k=(0,l.aP)(L.A("streamedMessageId")),N=(0,l.aP)(L.A("queryByConversationId")),I=(0,l.aP)(L.A("idsetQueryByConversationId")),[C,E]=(0,f.useState)(!1),[_,z]=(0,f.useState)(!1),[P,M]=(0,f.useState)(!1),[R,A]=(0,f.useState)(!1),[D,T]=(0,f.useState)(null),[B,F]=(0,f.useState)(null),[G,O]=(0,f.useState)([]),[U,q]=(0,f.useState)(null),[W,K]=(0,f.useState)(null),V=(0,f.useRef)(null),$=(0,f.useMemo)(()=>(0,s$.B)(t),[t]),H=(0,f.useMemo)(()=>{if(!t.currentConversationId)return[];let e=[];return Object.values(p).map(e=>null==e?void 0:e.data).filter(nw).forEach(s=>{var a;(null==(a=s.mimeType)?void 0:a.startsWith("image/"))&&s.sourceConversationId===t.currentConversationId&&e.push(s)}),e.sort((e,t)=>new Date(e.createTime||"").getTime()-new Date(t.createTime||"").getTime())},[t,p]),Y=b||"no_conversation_id",Q=N[Y],X=(0,f.useCallback)(e=>I(e,Y),[Y,I]),J=(0,f.useMemo)(()=>G.find(e=>e.id===B)||null,[G,B]),Z=(0,f.useMemo)(()=>{let e=H.find(e=>e.assetId===D);return e||t},[t,D,H]),ee=(0,eq.A3)(e=>e.byId[null!=k?k:""]),et=(0,f.useCallback)(e=>{let t="streaming"===e.state;return Object.entries(e.streamingImageById||{}).map(s=>{let[a,l]=s,i=Object.keys(l).map(Number),r=l[Math.max(...i)];return{id:a,url:(0,tx.sU)(n,null==r?void 0:r.imageUrl),state:t?"streaming":"completed",isModerated:!1,responseId:e.responseId,progressMap:t?i.map(e=>{var t;return{progress:e/100,imageUrl:(0,tx.sU)(n,null==(t=l[e])?void 0:t.imageUrl)}}):void 0,generatedImageWidth:t?e.generatedImageWidth:void 0,generatedImageHeight:t?e.generatedImageHeight:void 0}})},[n]),es=(0,f.useCallback)(e=>{e.length&&O(t=>{if(t.find(e=>e.id.includes("optimistic-streaming-image"))){let a=t.filter(e=>!e.id.includes("optimistic-streaming-image")).concat(e);if(!a.some(e=>e.id===B)){var s;F((null==(s=a[a.length-1])?void 0:s.id)||null)}return a}{let s=t.map(t=>e.find(e=>e.id===t.id)||t),a=e.filter(e=>!s.some(t=>t.id===e.id));return[...s,...a]}})},[O,B]),ea=(0,f.useCallback)(e=>{if(!J)return;let t=eq.A3.getState(),s=eW.C$.getState(),a=l.aP.getState(),n=a.lastMessageId?t.byId[a.lastMessageId]:void 0;if(a.lastMessageId&&!n)throw Error("Last message is missing");"none"!==a.reasoningMode&&a.setReasoningMode("none");let r={message:e,toolOverrides:{imageGen:!0},imageEditUri:J.url?J.url.replace(/^https?:\/\/[^/]+\/?/,""):void 0,enableRetries:i.ENABLE_AUTO_STREAM_RETRY};if(J.url){let t=h.flatMap(e=>e.presets).find(t=>t.prompt===e);o("edit_image_start",(0,ny.r)(J.url),{queryType:t?"preset":"manual",location:"image-workbench",presetId:(null==t?void 0:t.presetId)||"",message:e,messageLength:String(e.length)})}return z(!0),X(""),a.conversationId?a.sendResponse({...r,parentResponseId:a.lastMessageId,conversationId:a.conversationId,webpageUrls:[],setOpimisticUserResponse:!0,setUserResponse:!0,disableToolComposer:!0,isFromGrokFiles:!0,fileAttachmentIds:[Z.assetId],ff:i}):a.establishNewConversation({...r,temporary:s.isIncognito,disableToolComposer:!0,isFromGrokFiles:!0,fileAttachmentIds:[Z.assetId],ff:i})},[J,i,X,Z.assetId,o,h]),en=(0,f.useCallback)(async e=>(M(!0),e().finally(()=>{M(!1)})),[]),el=(0,aM.m)("image-workbench:handleAbort",en),ei=(0,f.useCallback)(()=>{var e;!C&&(null==J?void 0:J.url)&&(E(!0),(0,tK.G)(J.url,null==(e=J.url)?void 0:e.split("/").pop()).catch((0,eO.HX)("image-editor:handleDownload")).finally(()=>E(!1)))},[C,J]),er=(0,f.useCallback)(()=>{V.current&&i.ENABLE_IMAGE_EDITOR_IN_FILES&&(o("image_editor_close",void 0,{timeInEditorMs:String(u()),location:"image-workbench"}),V.current=null)},[u,o,i.ENABLE_IMAGE_EDITOR_IN_FILES]);(0,f.useEffect)(()=>{if(ee&&"streaming"===ee.state&&ee.conversationId===b){let e=et(ee);if(!ee.imageAttachmentCount||e.length||R)(null==e?void 0:e.length)&&(es(e),z(!1));else{let e=Array.from({length:ee.imageAttachmentCount}).map((e,t)=>({id:"optimistic-streaming-image-".concat(t),url:"",state:"streaming",isModerated:!1,responseId:ee.responseId,progressMap:[],generatedImageWidth:ee.generatedImageWidth,generatedImageHeight:ee.generatedImageHeight}));O(t=>[...t,...e]),e[0]&&F(e[0].id),A(!0)}}else{z(!1),A(!1);let e=[];ee&&"closed"===ee.state&&!ee.error&&ee.conversationId===b&&(e=et(ee),U!==ee.responseId&&(q(ee.responseId),x().catch((0,eO.HX)("image-editor:loadRecent")))),ee&&("error"===ee.state||ee.error)||!ee?O(e=>{if(!e.find(e=>e.id.includes("optimistic-streaming-image")))return e;{let s=e.filter(e=>!e.id.includes("optimistic-streaming-image"));if(!s.some(e=>e.id===B)){var t;F((null==(t=s[s.length-1])?void 0:t.id)||null)}return s}}):es(e)}},[ee,et,es,O,s,_,R,y,B,x,U,t.assetId,H,b]);let eo=(0,f.useCallback)(async()=>{let e=eq.A3.getState();if(t.currentConversationId){let s=[null==t?void 0:t.responseId,...H.map(e=>null==e?void 0:e.responseId)].filter(nb.A(String)),a=await e.loadResponses(t.currentConversationId,s),l=a.find(e=>(null==e?void 0:e.responseId)===(null==t?void 0:t.responseId)),i=l?e.byId[l.parentResponseId||""]:void 0,r=(0,s$.B)(t);return[{id:t.assetId||"",state:"completed",isModerated:!1,url:(0,tx.sU)(n,r.fileUri||""),responseId:t.responseId,parentImageUrl:(null==i?void 0:i.imageEditUri)?(0,tx.sU)(n,i.imageEditUri):void 0},...H.sort((e,t)=>new Date(e.createTime||"").getTime()-new Date(t.createTime||"").getTime()).map(e=>{let t=(0,s$.B)(e),s=a.find(t=>(null==t?void 0:t.responseId)===(null==e?void 0:e.responseId)),l=s?a.find(e=>(null==e?void 0:e.responseId)===(null==s?void 0:s.parentResponseId)):void 0;return{id:e.assetId||"",state:"completed",isModerated:!1,url:(0,tx.sU)(n,t.fileUri||""),responseId:e.responseId,parentImageUrl:(null==l?void 0:l.imageEditUri)?(0,tx.sU)(n,l.imageEditUri):void 0}})]}if(t.sourceConversationId){let s=[null==t?void 0:t.responseId].filter(nb.A(String)),a=await e.loadResponses(t.sourceConversationId,s),l=(0,s$.B)(t),i=a.find(e=>(null==e?void 0:e.responseId)===(null==t?void 0:t.responseId)),r=i?a.find(e=>(null==e?void 0:e.responseId)===(null==i?void 0:i.parentResponseId)):void 0;return[{id:t.assetId||"",state:"completed",isModerated:!1,url:(0,tx.sU)(n,l.fileUri||""),responseId:t.responseId,parentImageUrl:(null==r?void 0:r.imageEditUri)?(0,tx.sU)(n,r.imageEditUri):void 0}]}{let e=(0,s$.B)(t);return[{id:t.assetId||"",state:"completed",isModerated:!1,url:(0,tx.sU)(n,e.fileUri||""),responseId:t.responseId}]}},[n,t,H]),ec=(0,f.useCallback)(e=>{var t;if(G.some(t=>t.id===B&&t.responseId===e))return;let s=null==(t=G.find(t=>t.responseId===e))?void 0:t.id;s&&F(s)},[G,B]);return(0,f.useEffect)(()=>{t.assetId&&t.assetId!==W&&"ready"===g&&(V.current&&V.current!==t.assetId&&er(),K(t.assetId),eo().then(e=>{O(e),F(t.assetId),q(null),A(!1),z(!1),M(!1),V.current=t.assetId,c(),i.ENABLE_IMAGE_EDITOR_IN_FILES&&o("image_editor_open",t.assetId,{location:"image-workbench"})}).catch((0,eO.HX)("image-editor:getInitialImages")))},[t.assetId,g,W,eo,c,er,o,i.ENABLE_IMAGE_EDITOR_IN_FILES]),(0,f.useEffect)(()=>{if(B&&B!==D){if(B===t.assetId||H.some(e=>e.assetId===B))T(B);else if(null==J?void 0:J.responseId){var e,s,a;let t=y[(null==J?void 0:J.responseId)||""],n=null==t||null==(a=t.streamingImageById)||null==(s=a[B])||null==(e=s[100])?void 0:e.assetId;n&&T(n)}}},[B,D,t.assetId,H,y,J]),(0,f.useEffect)(()=>()=>{er()},[er]),i.ENABLE_IMAGE_EDITOR_IN_FILES?(0,a.jsx)(nr.U,{editor:(0,a.jsx)("div",{className:"flex flex-col h-full max-h-full p-2 lg:p-6 pt-8 w-full",children:(0,a.jsx)(aX,{hideHeader:!0,hideQueryBar:r,isStreaming:ee&&"streaming"===ee.state,selectedImage:J,images:G,isWaitingForResponse:_||!J,isAborting:P,inputValue:Q,onInputValueChange:X,onImageSelect:e=>F(e.id),onSendQuery:ea,onAbort:el})}),assetId:t.assetId,disableClear:!0,conversationId:t.currentConversationId,editorHeader:(0,a.jsx)(v.N,{mode:"popLayout",children:(null==J?void 0:J.state)==="streaming"?(0,a.jsx)(j.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{ease:"easeInOut"},className:"text-lg font-semibold text-primary animate-pulse",children:s("image-editor.generating","Generating")},"streaming-title"):(0,a.jsx)(j.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{ease:"easeInOut"},className:"flex-grow",children:(0,a.jsx)(na.F,{asset:Z,className:"text-lg font-semibold text-primary truncate min-w-0 overflow-hidden"})},ee&&"streaming"===ee.state?B:Z.assetId)}),headerButtons:[J&&(0,a.jsx)(S.gx,{shape:"square",variant:"tertiary",size:"sm","aria-label":s("image-editor.download-image","Download Image"),tooltipContent:s("image-editor.download-image","Download Image"),tooltipContentProps:{side:"bottom"},disabled:"streaming"===J.state||!J.url||C,onClick:ei,children:(0,a.jsx)(aL.p,{children:C?(0,a.jsx)(sl.y,{size:"xs"}):(0,a.jsx)(m.KXi,{className:"size-5"})},C?"is-downloading":"download-icon")})],chat:(0,a.jsx)(nn.s,{asset:t,viewedAssetId:D||void 0,onResponseImagesOpen:ec,responseImagesView:"status-card"},t.assetId)}):(0,a.jsx)("div",{className:"flex flex-col max-h-[100vh] h-[100vh]",children:(0,a.jsx)("div",{className:"flex items-center justify-center h-full bg-surface-base",children:(0,a.jsx)(nj.H,{hideEdit:!0,fileMetadata:$,onClose:()=>{},className:"border-none shadow-none max-w-none"})})})},code:function(e){var t,s,n;let{asset:l}=e,i=(0,w.h)(),{t:r}=(0,d.Bd)("files"),o=(0,eX._)(),c=(0,np.n)(),[u,h]=(0,f.useState)(!1),{content:x,setContent:p,error:g,isEditing:v,refetch:j}=(0,ns.W)(l,u),y=(0,f.useRef)(null),b=(0,s$.B)(l),{activeArtifact:k,isEditing:N,onSetActiveArtifact:I}=(0,ni.a)({content:null!=x?x:void 0});(0,f.useEffect)(()=>{h(N)},[N]);let{runCode:C,isCodeRunning:E,isCodeExecutionAvailable:_}=nx({code:null!=x?x:"",mimetype:null!=(t=b.fileMimeType)?t:"",consoleRef:y}),z=(0,f.useCallback)(()=>{C(),o("files.workbench.run-code","",{location:"code-workbench:onRunCode"})},[C,o]),P=(0,f.useCallback)(e=>{p(null!=e?e:"")},[p]),M=nf({content:null!=x?x:"",mimetype:b.fileMimeType,isCodeExecutionAvailable:_}),{handleCopy:R,copyPressed:A,handleDownload:D,handleShare:T,sharePressed:B,shareLoading:F}=(0,nl.H)({assetId:l.assetId,content:null!=x?x:"",filename:null!=(s=l.name)?s:"file"}),L=(0,a5.I5)(b.fileMimeType),[G,O]=(0,f.useState)("code"),U=(0,f.useCallback)(e=>{O(e),o("files.workbench.set-mode",e,{location:"code-workbench:onSetMode"})},[o]);return((0,f.useEffect)(()=>{O("code")},[l.assetId]),null==x)?(0,a.jsxs)("div",{className:"flex flex-col w-full h-full p-4",children:[(0,a.jsxs)("div",{className:"flex gap-2 items-center justify-between",children:[(0,a.jsx)(th.E,{className:"w-[30%] h-6"}),(0,a.jsxs)("div",{className:"flex gap-6 me-4",children:[(0,a.jsx)(th.E,{className:"w-6 h-6"}),(0,a.jsx)(th.E,{className:"w-6 h-6"}),(0,a.jsx)(th.E,{className:"w-6 h-6"}),(0,a.jsx)(th.E,{className:"w-6 h-6"})]})]}),(0,a.jsxs)("div",{className:"flex mt-6 flex-col h-full w-full max-w-3xl gap-3",children:[(0,a.jsx)(th.E,{className:"w-full max-w-xl h-5"}),(0,a.jsx)(th.E,{className:"w-full max-w-3xl h-5"}),(0,a.jsx)(th.E,{className:"w-full max-w-2xl h-5"}),(0,a.jsx)(th.E,{className:"w-full max-w-xl h-5"}),(0,a.jsx)(th.E,{className:"w-full max-w-3xl h-5"}),(0,a.jsx)(th.E,{className:"w-full max-w-2xl h-5"}),(0,a.jsx)(th.E,{className:"w-full max-w-3xl h-5"}),(0,a.jsx)(th.E,{className:"w-full max-w-2xl h-5"}),(0,a.jsx)(th.E,{className:"w-full max-w-3xl h-5"}),(0,a.jsx)(th.E,{className:"w-full max-w-xl h-5"}),(0,a.jsx)(th.E,{className:"w-full max-w-xl h-5"}),(0,a.jsx)(th.E,{className:"w-full max-w-sm h-5"})]})]}):g?(0,a.jsx)(aJ.f,{onRetryRequested:j}):(0,a.jsx)(nr.U,{editor:"code"===G?(0,a.jsxs)("div",{className:"flex flex-col h-full overflow-hidden bg-surface-inset",children:[(0,a.jsx)("div",{className:"relative flex-1 h-full overflow-hidden",children:(0,a.jsx)(no.B,{editable:!0,onContentUpdate:P,isStreaming:v,value:null!=x?x:"",syntax:L})}),(0,a.jsx)(a4.C,{ref:y}),v?(0,a.jsx)("div",{className:"sticky overflow-visible bottom-4 start-0 w-full flex items-center justify-center",children:(0,a.jsxs)("div",{className:"flex items-center gap-2 text-primary bg-surface-l1 px-4 py-2 rounded-full h-10 border border-border",children:[(0,a.jsx)(sl.y,{size:"sm"}),(0,a.jsx)("span",{children:r("files.editing-by-model","Editing...")})]})}):null]}):(0,a.jsx)(nm,{mimetype:null!=(n=l.mimeType)?n:"unknown",content:null!=x?x:""}),chat:(0,a.jsx)(nn.s,{asset:l,activeArtifact:k,onArtifactSelected:I}),editorHeader:(0,a.jsx)(na.F,{asset:l}),assetId:l.assetId,conversationId:l.currentConversationId,headerButtons:["preview"===M?(0,a.jsx)(nd,{mode:G,setMode:U}):null,"run"===M?(0,a.jsx)("div",{className:"py-1",children:(0,a.jsxs)(S.$n,{variant:"secondary",shape:"rectangle",size:"sm",onClick:z,disabled:E,children:[E?(0,a.jsx)(sl.y,{size:"xs"}):(0,a.jsx)(m.udU,{...ng,size:18}),r("code-execution.run","Run")]})}):null,(0,a.jsx)(ne,{asset:l},"add-to-workspace-button"),(0,a.jsx)(S.gx,{tooltipContent:r("Copy Contents","Copy Contents"),tooltipContentProps:{className:"text-xs"},tooltipProps:{delayDuration:300},onClick:R,variant:"tertiary",shape:"square",size:"sm","aria-label":r("Copy Contents","Copy Contents"),children:(0,a.jsx)(aL.p,{children:A?(0,a.jsx)(m.Srz,{size:18}):(0,a.jsx)(m.TdU,{size:18})},A?"copied":"copy")},"copy-button"),(0,a.jsx)(S.gx,{tooltipContent:r("Download to file","Download to file"),tooltipContentProps:{className:"text-xs"},tooltipProps:{delayDuration:300},onClick:D,variant:"tertiary",shape:"square",size:"sm","aria-label":r("Download to file","Download to file"),children:(0,a.jsx)(m.KXi,{...ng,size:18})},"download-button"),i.ENABLE_FILE_SHARING&&!c?(0,a.jsx)(S.gx,{tooltipContent:r("Share file","Share file"),onClick:T,tooltipContentProps:{className:"text-xs"},variant:"tertiary",shape:"square",size:"sm","aria-label":r("Share file","Share file"),children:(0,a.jsx)(aL.p,{children:F?(0,a.jsx)(sl.y,{size:"xs"}):B?(0,a.jsx)(m.Srz,{size:16}):(0,a.jsx)(m.liv,{...ng,size:18})},F?"share-loading":B?"shared":"share")},"share-button"):null]})},unknown:nD},nB=e=>null===e.selection?{activeSheetId:e.activeSheet}:{selection:{type:"sheet",sheetId:e.activeSheet,range:(0,a1.Hj)(e.selection).text}};function nF(e){var t;let{rootAssetId:s}=e,{t:n}=(0,d.Bd)("files"),{setOpen:i}=(0,a2.cL)(),r=(0,sQ.R)((0,al.k)(e=>e.fetchVersions)),o=(0,sQ.R)(e=>{var t;return null==(t=e.assetsById[s])?void 0:t.status}),c=(0,sQ.F7)(s),u=(0,a0.F$)();(0,f.useEffect)(function(){return u.updateState(e=>({...e,activeId:s})),()=>{u.updateState(e=>({...e,activeId:null}))}},[s,u]);let m=(0,l.aP)(L.A("setMetadata")),h=u.useState(e=>e.nodes[s]);if((0,f.useEffect)(function(){h&&"sheet"===h.type&&m(nB(h))},[h,m]),(0,f.useEffect)(()=>{r(s)},[s,r]),(0,f.useEffect)(()=>{i(!1)},[]),!c&&"success"===o)return(0,a.jsx)(aJ.f,{title:n("file-not-found.title","File not found"),message:n("file-not-found.message","We couldn't find the document. Please verify the link you entered and try again. You can also browse for your files in the Files panel.")});if(!c&&"error"===o)return(0,a.jsx)(aJ.f,{});if(!c)return(0,a.jsx)(av.P,{delayMs:500,children:(0,a.jsx)("div",{className:"flex w-full h-full justify-center items-center",children:(0,a.jsx)(sl.y,{})})});let x=null!=(t=nT[(0,s8.qW)(c)])?t:nD;return(0,a.jsx)(x,{asset:c})}function nL(){var e;let t=(0,eX._)(),{t:s}=(0,d.Bd)("files"),{ENABLE_IMAGE_EDITOR_IN_FILES:n}=(0,w.h)(),{route:l,push:i}=(0,C.wK)(),r=(0,tT.Di)(),{user:o}=(0,sa.wV)(),c="files"===l.page&&null!=(e=l.fileId)?e:void 0,u=(0,sQ.R)(e=>{var t,s;return c&&e.currentVersion[c]?null==(s=e.assetsById[e.currentVersion[c]])||null==(t=s.data)?void 0:t.name:""}),m=(0,sQ.R)(e=>e.isFileExplorerCollapsed),h=(0,sQ.R)(e=>e.setIsFileExplorerCollapsed);if((0,f.useEffect)(()=>{t("files.open",c,{location:"files-page-content:useEffect"})},[c,t]),(0,si.r)(u||s("files-page-title","Files")),(0,eY.v)(eQ.Ib,e=>{e.preventDefault(),e.stopPropagation(),i({page:"main"}),t("pressed_cmd_j",void 0,{location:"files-page-content:useHotkeys"})},[t,i]),!o||"files"!==l.page)return(0,a.jsx)(st.default,{});if(r)return(0,a.jsx)(s2,{});let{fileId:x,emptyView:p}=l;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(aI.K,{collapsed:m,onCollapsedChange:h,sideContent:(0,a.jsx)(aN,{className:"h-full"}),autoSaveId:"files-page-layout",style:{height:"100vh"},direction:"horizontal",className:"w-full h-[100vh] overflow-hidden",tagName:"main",children:x?(0,a.jsx)(nF,{rootAssetId:x}):"image"===p&&n?(0,a.jsx)(aZ,{}):(0,a.jsx)(a_,{})}),(0,a.jsx)(ss.CommandMenu,{})]})}var nG=s(17035),nO=s(24429);let nU=()=>{let{t:e}=(0,d.Bd)(),{isSuperGrokUser:t,isSuperGrokProUser:s,isEnterpriseUser:n}=(0,nO.Q2)(),l=(0,nO.hd)(),{push:i}=(0,C.wK)();return(0,a.jsxs)("div",{className:(0,c.cn)("fixed z-50 bg-background grid inset-0 place-items-center gap-4 duration-200 w-[100vw] min-h-[100vh] overflow-x-hidden","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 p-6"),children:[(0,a.jsx)("meta",{name:"description",content:"Unlock advanced AI capabilities with SuperGrok. With SuperGrok you get signifcantly more access to our premium models and early access to new features."})," ",(0,a.jsx)("meta",{name:"keywords",content:"Grok, Supergrok, Subscription, xAI, AI, Models, Context, Images, Generation, Tools, Features"}),(0,a.jsx)(h.$n,{asChild:!0,variant:"secondary",size:"pill",className:"absolute top-8 z-10 h-10 pr-5",children:(0,a.jsxs)(C.N_,{route:{page:"main"},children:[(0,a.jsx)(m.JGc,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"-mt-px",children:e("Go to","Go to")}),(0,a.jsx)("div",{className:"-mx-0.5 -mt-px",children:(0,a.jsx)(s3.r1,{className:"h-3"})})]})}),(0,a.jsx)(nG.W,{isSubscribed:t||s||n||!1,isSuccessful:l,onSuccess:()=>i({page:"main"})})]})};var nq=s(39890),nW=s(32171),nK=s.n(nW),nV=s(625),n$=s(98579);let nH=e=>{var t;let{shareLink:s,conversation:n}=e,{t:l}=(0,d.Bd)("base"),{deleteShareLink:i,isPending:r}=(0,nq.Y)(),o=(0,n$.o)();return(0,a.jsxs)(j.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},className:"flex justify-between items-center py-2 px-4 border rounded-xl bg-card gap-2",children:[(0,a.jsx)(nK(),{href:o(null!=(t=s.publicId)?t:""),className:"group cursor-pointer relative text-sm flex-1 min-w-0",children:(0,a.jsx)("span",{className:"flex flex-row items-center gap-1",children:(0,a.jsx)("span",{className:"line-clamp-1 font-semibold",children:n?n.title:l("share-links.unknown-conversation","Untitled")})})}),(0,a.jsx)(h.$n,{onClick:()=>s.shareLinkId&&i(s.shareLinkId),variant:"outline",rounded:!0,disabled:r,children:l("share-links.remove","Unshare")})]})};function nY(){let{t:e}=(0,d.Bd)("base"),{user:t}=(0,o.useSession)(),{currentTeam:s}=(0,nV.hd)(),{shareLinks:n,isLoading:l,error:i,refetch:u,loadMoreRef:x,historyContainerRef:f}=(0,nq.m)();return t?(0,a.jsxs)("main",{className:(0,c.cn)("h-dvh w-full relative flex flex-col items-center"),children:[(0,a.jsx)(tD.hx,{hideIncognito:!0}),(0,a.jsx)(ss.CommandMenu,{}),(0,a.jsxs)("div",{className:"max-w-[50rem] px-5 pt-16 pb-8 @sm:pt-18 mx-auto w-full flex flex-col h-full",ref:f,children:[(0,a.jsx)("div",{className:"flex justify-between align-center min-h-[42px] w-full",children:(0,a.jsx)("h1",{className:"text-2xl flex gap-2 items-center font-semibold",children:e("share-links.title","Shared Conversations")})}),(0,a.jsx)("div",{className:"flex flex-col w-full items-start text-muted-foreground",children:(null==s?void 0:s.teamId)?e("share-links.description.team","Shared links can be viewed by team members with access."):e("share-links.description.personal","Shared links can be viewed by anyone with the link.")}),(0,a.jsxs)(sk.D,{className:"gap-2 pt-6",children:[(0,a.jsxs)(v.N,{children:[null==n?void 0:n.map(e=>{var t;return(0,a.jsx)(nH,{shareLink:e,conversation:null==e||null==(t=e.sharedLink)?void 0:t.conversation},e.shareLinkId)}),(null==n?void 0:n.length)===0&&!l&&(0,a.jsx)(j.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},children:(0,a.jsx)("div",{className:"text-center h-40 flex items-center justify-center w-full py-8 border rounded-3xl flex-col gap-4 p-4 sm:p-6 select-none",children:(0,a.jsx)("div",{className:"font-semibold",children:e("share-links.no-share-links-found","Nothing shared yet")})})},"no-share-links-found"),l&&(0,a.jsx)("div",{className:"flex justify-center items-center w-full h-full max-h-[150px]",children:(0,a.jsx)(j.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},children:(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)(m.krw,{className:"animate-spin"})})})},"share-links-loading"),i&&(0,a.jsxs)("div",{className:"flex justify-center items-center w-full h-full max-h-[150px] flex-col gap-4",children:[(0,a.jsx)("div",{className:"text-center",children:e("share-links.error.description","Can't load shared conversations")}),(0,a.jsx)(h.$n,{variant:"filledSecondary",onClick:()=>u(),children:e("Retry","Try Again")})]},"share-links-error")]}),(0,a.jsx)("div",{ref:x})]})]})]}):(0,a.jsx)("main",{className:(0,c.cn)("w-screen h-dvh relative"),children:(0,a.jsx)(r.J,{title:e("deleted-conversations.error.title","Sign In Required"),description:e("deleted-conversations.error.anonymous-user","Sign in to view your shared conversations"),cta:e("share-links-page-error.cta","Return home")})})}var nQ=s(58939),nX=s(73459),nJ=s(14609);let nZ=e=>{let{items:t,selectedId:s,setSelectedId:a,onSelect:n,getId:l,enabled:i=!0,containerRef:r,scrollIntoViewOptions:o={behavior:"smooth",block:"nearest"}}=e,c=(0,f.useRef)(!1),d=(0,f.useRef)(null),u=(0,f.useRef)(null),m=(0,f.useCallback)(()=>{c.current=!0,d.current&&clearTimeout(d.current),d.current=setTimeout(()=>{c.current=!1},300)},[]),h=(0,f.useCallback)(e=>{i&&!c.current&&(a(e),u.current="mouse")},[i,a]),x=(0,f.useCallback)(()=>{i&&!c.current&&"mouse"===u.current&&(a(null),u.current=null)},[i,a]),p=(0,f.useCallback)(()=>{if(!s||!(null==r?void 0:r.current))return;let e=r.current.querySelector("[data-selected=true]");e&&e.scrollIntoView(o)},[s,r,o]);return(0,f.useEffect)(()=>{if(i&&0!==t.length)return window.addEventListener("keydown",e),window.addEventListener("mousemove",r),()=>{window.removeEventListener("keydown",e),window.removeEventListener("mousemove",r),d.current&&clearTimeout(d.current)};function e(e){"ArrowDown"===e.key||"ArrowUp"===e.key?(e.preventDefault(),m(),a(s=>{let a=s?t.findIndex(e=>l(e)===s):-1;if("ArrowDown"===e.key){if(e.metaKey||e.ctrlKey){let e=t[t.length-1];return t.length>0&&void 0!==e?l(e):null}let s=-1===a?0:(a+1)%t.length,n=t[s];return void 0!==n?l(n):null}{if(e.metaKey||e.ctrlKey){let e=t[0];return t.length>0&&void 0!==e?l(e):null}let s=-1===a?t.length-1:(a-1+t.length)%t.length,n=t[s];return void 0!==n?l(n):null}}),setTimeout(p,100),u.current="keyboard"):"Enter"===e.key&&s?(e.preventDefault(),n(s)):"Escape"===e.key&&(e.preventDefault(),a(null),u.current=null)}function r(){d.current&&clearTimeout(d.current),c.current=!1}},[t,n,s,i,l,a,m,p]),(0,f.useEffect)(()=>{s&&t.length>0?t.some(e=>l(e)===s)||(a(null),u.current=null):s&&0===t.length&&(a(null),u.current=null)},[t,s,l,a]),{handleMouseEnter:h,handleMouseLeave:x}};var n0=s(4169);let n1=e=>{let{title:t,description:s,cta:n,onClick:l}=e;return(0,a.jsxs)("div",{className:"py-12 px-3 flex flex-col justify-center items-center gap-4",children:[(0,a.jsx)("div",{className:"size-10 bg-surface-l1 rounded-full flex justify-center items-center",children:(0,a.jsx)(n0.u,{className:"size-5 text-fg-tertiary"})}),(0,a.jsxs)("div",{className:"flex flex-col items-center gap-1",children:[(0,a.jsx)("span",{className:"text-fg-primary text-sm font-semibold",children:t}),(0,a.jsx)("span",{className:"text-fg-secondary text-sm",children:s})]}),n&&(0,a.jsx)(S.$n,{size:"sm",shape:"rectangle",variant:"secondary",onClick:l,children:n})]})},n2=e=>{let{title:t,description:s,onClick:n}=e,{t:l}=(0,d.Bd)("base");return(0,a.jsxs)("div",{className:"py-12 px-3 flex flex-col justify-center items-center gap-4",children:[(0,a.jsx)("div",{className:"size-10 bg-surface-l1 rounded-full flex justify-center items-center",children:(0,a.jsx)(m.lW3,{className:"size-5 text-fg-tertiary"})}),(0,a.jsxs)("div",{className:"flex flex-col items-center gap-1",children:[(0,a.jsx)("span",{className:"text-fg-primary text-sm font-semibold",children:t}),(0,a.jsx)("span",{className:"text-fg-secondary text-sm",children:s})]}),(0,a.jsx)(S.$n,{size:"sm",shape:"rectangle",variant:"secondary",onClick:n,children:l("history.retry","Retry")})]})},n5=()=>{let{t:e}=(0,d.Bd)("base"),[t,s]=(0,f.useState)(""),[n,l]=(0,f.useState)(null),[i,r]=(0,f.useState)(null),[o,u]=(0,f.useState)(""),[h,x]=(0,f.useState)(null),{routeToConversation:p}=(0,sI.o)(),g=(0,eX._)(),y=(0,sS.K)(),b=(0,f.useMemo)(()=>{var e;return null!=(e=null==t?void 0:t.trim())?e:""},[t]),{results:w,refetch:k,loadMoreRef:N,historyContainerRef:I,isLoading:C,isFetching:S,isError:E,isDebouncing:_}=(0,nJ.Y)({query:b}),z=(0,f.useCallback)(e=>{if(n||i)return;p(e,!1,!0);let t=eU.w1.getState().byId[e];g("select_conversation",e,{conversationCreateTime:(null==t?void 0:t.createTime)||"",location:"command-menu"})},[n,i,p,g]),P=(0,f.useCallback)(e=>{var t;let s=w.find(t=>t.conversation.conversationId===e);u((null==s||null==(t=s.conversation)?void 0:t.title)||""),l(e)},[w]),M=(0,f.useCallback)(async e=>{var t;if(n!==e)return;let s=o.trim();if(""===s)return;let a=w.find(t=>t.conversation.conversationId===e);g("update_conversation",e,{location:"search-dialog"}),l(null);let{fetchUpdateConversation:i}=eU.w1.getState();await i(e,{title:s,starred:null==a||null==(t=a.conversation)?void 0:t.starred}).catch(e=>{y("command-menu:handleEditSave",e)}),await k()},[w,y,n,o,k,g]),R=(0,f.useCallback)(async e=>{if(i!==e)return;g("delete_conversation",e,{location:"search-dialog"}),r(null);let{fetchSoftDeleteConversation:t}=eU.w1.getState();await t(e).catch(e=>{y("command-menu:handleDeleteConfirm",e)}),await k()},[i,g,k,y]),A=(0,f.useCallback)(()=>{l(null),r(null),u("")},[]),D=(0,f.useCallback)(async e=>{var t;let s=w.find(t=>t.conversation.conversationId===e);g("favorite_conversation",e,{value:(null==s?void 0:s.conversation.starred)?"true":"false",location:"search-dialog"});let{fetchUpdateConversation:a}=eU.w1.getState();await a(e,{starred:!(null==s||null==(t=s.conversation)?void 0:t.starred)}).catch(e=>{y("command-menu:handleToggleFavorite",e)}),await k()},[w,y,k,g]),{handleMouseEnter:T,handleMouseLeave:B}=nZ({items:w,selectedId:h,setSelectedId:x,onSelect:z,getId:e=>e.conversation.conversationId,enabled:!n&&!i,containerRef:I});return(0,a.jsx)("div",{className:"flex flex-col h-full min-h-0",children:(0,a.jsxs)("div",{className:"flex flex-col h-full overflow-hidden",children:[(0,a.jsx)("div",{className:"px-0.5 pt-0.5 flex-shrink-0",children:(0,a.jsxs)("div",{className:"relative z-20",children:[(0,a.jsx)(sJ.p,{autoFocus:!0,value:t,onChange:e=>{s(e.target.value)},className:"bg-surface-l1 rounded-full h-11 pl-9 text-base",placeholder:e("history.search-conversations","Search")}),(0,a.jsx)(m.WIv,{className:"absolute left-3 top-1/2 -translate-y-1/2 size-4 text-fg-secondary"}),(0,a.jsx)(v.N,{children:(C||S||_)&&b&&(0,a.jsx)(j.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15},className:"absolute right-3 top-1/2 -translate-y-1/2",children:(0,a.jsx)(sl.y,{size:"xs"})},"spinner")})]})}),(0,a.jsx)(v.N,{mode:"wait",initial:!1,children:E?(0,a.jsx)(j.P.div,{variants:{visible:{opacity:1},hidden:{opacity:0}},initial:"hidden",animate:"visible",exit:"hidden",transition:{duration:.1},children:(0,a.jsx)(n2,{title:e("history.failed-to-load-history.title","Failed to load history"),description:e("history.failed-to-load-history.description","We encountered an issue while loading your conversation history"),onClick:()=>k()})},"error"):w.length>0?(0,a.jsxs)("div",{className:"flex-1 overflow-hidden relative",children:[(0,a.jsx)("div",{className:"absolute inset-x-0 bottom-0 h-6 bg-gradient-to-t from-background to-transparent z-10"}),(0,a.jsx)("div",{className:"absolute inset-x-0 top-0 h-6 bg-gradient-to-b from-background to-transparent z-10"}),(0,a.jsxs)("div",{ref:I,style:{scrollPaddingBlock:"1rem"},className:(0,c.cn)("flex flex-col gap-1 h-full overflow-y-auto py-4"),children:[null==w?void 0:w.map(e=>{let{conversation:t,matchedWords:s,matchType:l,highlight:c}=e;return(0,a.jsx)("div",{"data-selected":h===t.conversationId,onMouseEnter:()=>T(t.conversationId),onMouseLeave:B,className:"relative z-0",children:(0,a.jsx)(n4,{conversation:t,matchedWords:s,matchType:l,highlight:c,isSelected:h===t.conversationId,isEditing:n===t.conversationId,isDeleting:i===t.conversationId,newTitle:o,onNewTitleChange:u,onSelect:z,onEditStart:P,onDeleteStart:r,onToggleFavorite:D,onEditSave:M,onDeleteConfirm:R,onCancel:A})},t.conversationId)}),(0,a.jsx)("div",{ref:N,className:"h-[1px] flex justify-center !m-0 !p-0"})]})]}):C&&!b?(0,a.jsx)(j.P.div,{variants:{visible:{opacity:1},hidden:{opacity:0}},initial:"hidden",animate:"visible",exit:"hidden",transition:{duration:.1},className:"flex flex-col gap-1 py-4",children:Array.from({length:3}).map((e,t)=>(0,a.jsx)(th.E,{className:"h-[48px] w-full rounded-2xl"},t))},"skeletons"):!C&&!_&&(b?(0,a.jsx)(j.P.div,{variants:{visible:{opacity:1},hidden:{opacity:0}},initial:"hidden",animate:"visible",exit:"hidden",transition:{duration:.1},className:"flex flex-col gap-1 pt-20",children:(0,a.jsx)("div",{className:"text-center text-fg-secondary px-4",children:e("history.no-conversations-found","No conversations found")})},"no-results"):(0,a.jsx)(j.P.div,{variants:{visible:{opacity:1},hidden:{opacity:0}},initial:"hidden",animate:"visible",exit:"hidden",transition:{duration:.1},children:(0,a.jsx)(n1,{title:e("history.empty-history.title","No conversations yet"),description:e("history.empty-history.description","Start a conversation to see your history here"),cta:e("history.empty-history.new-chat","New Chat"),onClick:()=>p()})},"empty"))})]})})},n4=(0,f.memo)(e=>(0,a.jsx)("div",{className:(0,c.cn)("h-[48px] rounded-2xl grid grid-cols-1 grid-rows-1 flex-shrink-0",e.isSelected&&"bg-button-ghost-hover","MATCH_MESSAGE"===e.matchType&&!!e.highlight&&"h-[64px]"),children:(0,a.jsx)(nX.w,{...e,isSelected:e.isSelected,isHovered:e.isSelected,isCurrent:!1})}));var n3=s(19841),n6=s(68217);let n8=()=>{let{t:e}=(0,d.Bd)("base"),{routeToConversation:t}=(0,sI.o)(),s=(0,sS.K)(),[n,l]=(0,f.useState)(null),[i,r]=(0,f.useState)(null),[o,u]=(0,tA.M)("history.shared-with-me.order-by","createTime"),[h,x]=(0,f.useState)(!1),{results:p,isLoading:g,refetch:w,isError:k,containerRef:N,loadMoreRef:I,isLoadingTeamMembers:C,getShareLinkHref:E,handleNavigateToSharedConversation:_}=(0,n6.K)({pageSize:60,orderBy:o}),{mutate:z,isPending:P}=(0,b.n_)({mutationKey:["cloneConversation"],mutationFn:async e=>y.chatApi.chatCloneConversation({shareLinkId:e,body:{}}),onSuccess:e=>{e.conversation&&t(e.conversation.conversationId)},onError:e=>{s("history-shared-with-me:cloneConversation",e)},onSettled:()=>{r(null)}}),M=(0,f.useCallback)(async e=>{let t=p.find(t=>t.shareLinkId===e);if((null==t?void 0:t.shareLinkId)&&(null==t?void 0:t.publicId)&&!P)return r(t.shareLinkId),z(t.publicId)},[P,z,p]),R=(0,f.useCallback)(e=>{window.open(E(e),"_blank")},[E]),{handleMouseEnter:A,handleMouseLeave:D}=nZ({items:p,selectedId:n,setSelectedId:l,onSelect:_,containerRef:N,getId:e=>e.shareLinkId});return(0,a.jsx)("div",{className:"flex flex-col h-full min-h-0",children:(0,a.jsx)(v.N,{mode:"wait",initial:!1,children:k?(0,a.jsx)(j.P.div,{variants:{visible:{opacity:1},hidden:{opacity:0}},initial:"hidden",animate:"visible",exit:"hidden",transition:{duration:.1},children:(0,a.jsx)(n2,{title:e("history.failed-to-load-shared.title","Failed to load shared conversations"),description:e("history.failed-to-load-shared.description","We encountered an issue while loading your shared conversations"),onClick:()=>w()})},"error"):g||p.length?(0,a.jsxs)("div",{className:"flex flex-col h-full overflow-hidden",children:[(0,a.jsx)("div",{className:"px-0.5 pt-0.5 flex-shrink-0",children:(0,a.jsx)("div",{className:"relative z-20",children:(0,a.jsxs)(tW.rI,{open:h,onOpenChange:x,children:[(0,a.jsx)(tW.ty,{asChild:!0,children:(0,a.jsxs)(S.$n,{shape:"pill",size:"md",variant:"secondary",className:"h-11",children:[(0,a.jsx)("span",{children:"createTime"===o?e("history.shared-with-me.order-by.create-time","Most recent"):e("history.shared-with-me.order-by.view-count","Most popular")}),(0,a.jsx)(m.D3D,{className:(0,c.cn)("size-3 text-fg-tertiary transition-transform",{"rotate-180":h})})]})}),(0,a.jsxs)(tW.SQ,{children:[(0,a.jsx)(tW._2,{onSelect:()=>u("createTime"),children:(0,a.jsxs)("div",{className:"flex items-center justify-between gap-3 w-full",children:[(0,a.jsx)("span",{children:e("history.shared-with-me.order-by.create-time","Most recent")}),"createTime"===o&&(0,a.jsx)(m.Srz,{className:"text-fg-primary size-4"})]})}),(0,a.jsx)(tW._2,{onSelect:()=>u("viewCount"),children:(0,a.jsxs)("div",{className:"flex items-center justify-between gap-3 w-full",children:[(0,a.jsx)("span",{children:e("history.shared-with-me.order-by.view-count","Most popular")}),"viewCount"===o&&(0,a.jsx)(m.Srz,{className:"text-fg-primary size-4"})]})})]})]})})}),(0,a.jsx)(v.N,{mode:"wait",children:p.length>0?(0,a.jsxs)("div",{className:"flex-1 overflow-hidden relative",children:[(0,a.jsx)("div",{className:"absolute inset-x-0 bottom-0 h-6 bg-gradient-to-t from-background to-transparent z-10"}),(0,a.jsx)("div",{className:"absolute inset-x-0 top-0 h-6 bg-gradient-to-b from-background to-transparent z-10"}),(0,a.jsxs)("div",{ref:N,style:{scrollPaddingBlock:"1rem"},className:(0,c.cn)("flex flex-col gap-1 h-full overflow-y-auto py-4"),children:[null==p?void 0:p.map(e=>(0,a.jsx)("div",{"data-selected":n===e.shareLinkId,onMouseEnter:()=>A(e.shareLinkId),onMouseLeave:D,children:(0,a.jsx)(n9,{isSelected:n===e.shareLinkId,shareLink:e,orderBy:o,isLoading:i===e.shareLinkId,onOpenShareLink:_,onStartNewConversation:M,onOpenInNewTab:R,isLoadingTeamMembers:C})},e.shareLinkId)),(0,a.jsx)("div",{ref:I,className:"h-[1px] flex justify-center !m-0 !p-0"})]})]}):g&&(0,a.jsx)(j.P.div,{variants:{visible:{opacity:1},hidden:{opacity:0}},initial:"hidden",animate:"visible",exit:"hidden",transition:{duration:.1},className:"flex flex-col gap-1 py-4",children:Array.from({length:3}).map((e,t)=>(0,a.jsx)(th.E,{className:"h-[48px] w-full rounded-2xl"},t))},"skeletons")})]}):(0,a.jsx)(j.P.div,{variants:{visible:{opacity:1},hidden:{opacity:0}},initial:"hidden",animate:"visible",exit:"hidden",transition:{duration:.1},children:(0,a.jsx)(n1,{title:e("history.empty-share-list.title","No shared conversations yet"),description:e("history.empty-share-list.description","Shared conversations will appear here"),onClick:()=>t()})},"no-results")})})},n9=(0,f.memo)(e=>{var t,s,n,l,i;let{isSelected:r,shareLink:o,isLoading:u,isLoadingTeamMembers:h,orderBy:x,onOpenShareLink:f,onOpenInNewTab:p,onStartNewConversation:g}=e,v=(0,tT.Di)(),{t:j}=(0,d.Bd)("base");return(0,a.jsx)("div",{className:(0,c.cn)("h-[48px] rounded-2xl grid grid-cols-1 grid-rows-1 flex-shrink-0",r&&"bg-button-ghost-hover"),onClick:()=>f(o.shareLinkId),children:(0,a.jsxs)("div",{className:(0,c.cn)("flex cursor-pointer items-center px-3 col-start-1 col-end-2 row-start-1 row-end-2"),children:[(0,a.jsx)("div",{className:"flex-grow min-w-0",children:(0,a.jsx)("div",{className:"flex items-center w-full",children:(0,a.jsx)("div",{className:"truncate text-primary",children:(null==(t=o.conversation)?void 0:t.title)||"Untitled Conversation"})})}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"w-32 flex justify-start items-center",children:!v&&(0,a.jsxs)(nR.m_,{children:[(0,a.jsx)(nR.k$,{disabled:h,asChild:!0,children:(0,a.jsx)("div",{className:"flex items-center gap-2 w-full",children:!h||(null==o?void 0:o.user)?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s6.e,{user:null==o?void 0:o.user,className:"size-6",textClassName:"text-[12px]"}),(0,a.jsx)("span",{className:"text-fg-secondary text-sm truncate",children:"".concat((null==o||null==(s=o.user)?void 0:s.givenName)||""," ").concat((null==o||null==(n=o.user)?void 0:n.familyName)||"")})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(th.E,{className:"size-6 rounded-full flex-shrink-0"}),(0,a.jsx)(th.E,{className:"w-full h-[16px] flex-shrink-0 flex-grow"})]})})}),(null==o?void 0:o.user)&&(0,a.jsx)(nR.ZI,{side:"top",align:"center",children:"".concat((null==o||null==(l=o.user)?void 0:l.givenName)||""," ").concat((null==o||null==(i=o.user)?void 0:i.familyName)||"")})]})}),(0,a.jsx)("div",{className:"z-20 w-".concat(28," text-right"),children:u?(0,a.jsx)("div",{className:"flex items-center w-full justify-end",children:(0,a.jsx)(sl.y,{size:"xs",className:"mx-2"})}):v||r?(0,a.jsxs)("div",{className:"flex items-center gap-2 justify-end w-full",children:[(0,a.jsx)(S.gx,{tabIndex:-1,variant:"tertiary",size:"sm",shape:"square",onClick:e=>{e.stopPropagation(),p(o.shareLinkId)},tooltipContent:j("New Tab","New Tab"),"aria-label":j("New Tab","New Tab"),children:(0,a.jsx)(m.k0t,{size:16,className:"text-primary"})}),(0,a.jsx)(S.gx,{tabIndex:-1,variant:"tertiary",size:"sm",shape:"square",onClick:e=>{e.stopPropagation(),g(o.shareLinkId)},tooltipContent:j("history.start-conversation","Start new converation"),"aria-label":j("history.start-conversation","Start new converation"),children:(0,a.jsx)(m.flY,{size:16,className:"text-primary"})})]}):"createTime"===x?o.createTime&&(0,a.jsx)(n3.D,{conversation:{createTime:o.createTime,modifyTime:o.createTime}}):"viewCount"===x&&(0,a.jsx)("span",{className:"text-fg-secondary text-sm",children:j("history.shared-with-me.views",{count:parseInt(o.viewCount||"0"),defaultValue_one:"{{count}} view",defaultValue_other:"{{count}} views"})})})]})]})})});function n7(){let{t:e}=(0,d.Bd)("base"),{currentTeam:t}=(0,nV.hd)(),{route:s}=(0,C.wK)(),n="history"===s.page&&s.tab||"conversations";return t||"shared-with-me"!==n||(n="conversations"),(0,a.jsxs)("main",{className:(0,c.cn)("h-dvh w-full relative flex flex-col items-center"),children:[(0,a.jsx)(tD.hx,{hideIncognito:!0}),(0,a.jsx)(ss.CommandMenu,{}),(0,a.jsx)("div",{className:"max-w-[50rem] px-6 @lg:px-2 pt-16 @sm:pt-18 mx-auto w-full flex flex-col h-full items-center pb-4",children:(0,a.jsxs)("div",{className:"flex flex-col gap-4 w-full flex-1 min-h-0",children:[(0,a.jsx)("span",{className:"text-2xl font-semibold px-2.5",children:e("history.title","History")}),(0,a.jsxs)(nc.tU,{value:n,className:"flex flex-col flex-1 min-h-0",children:[(0,a.jsx)(np.d,{requireSelectedTeam:!0,children:(0,a.jsxs)(nc.j7,{className:"bg-transparent border-none relative w-full justify-start p-0 px-1 mt-4",children:[(0,a.jsx)(nc.Xi,{value:"conversations",variant:"underline",className:"px-2",asChild:!0,children:(0,a.jsx)(C.N_,{route:{page:"history",tab:"conversations"},className:"font-semibold",children:e("history.my-conversations","My Conversations")})}),(0,a.jsx)(nc.Xi,{value:"shared-with-me",variant:"underline",className:"px-2",asChild:!0,children:(0,a.jsx)(C.N_,{route:{page:"history",tab:"shared-with-me"},className:"font-semibold",children:e("history.shared-with-me","Shared with me")})}),(0,a.jsx)("div",{className:"absolute inset-x-1 bottom-0 border-b border-border-l2"})]})}),(0,a.jsx)(nc.av,{value:"conversations",className:"mt-4 flex-1 min-h-0 focus-visible:ring-0",children:(0,a.jsx)(n5,{})}),(0,a.jsx)(np.d,{requireSelectedTeam:!0,children:(0,a.jsx)(nc.av,{value:"shared-with-me",className:"mt-4 flex-1 min-h-0 focus-visible:ring-0",children:(0,a.jsx)(n8,{})})})]})]})})]})}function le(){(function(){let{route:e,push:t}=(0,C.wK)(),{user:s}=(0,o.useSession)();(0,f.useEffect)(()=>l.aP.subscribe((a,n)=>{if(!a.conversationId||a.conversationId===n.conversationId||"chat"===e.page&&e.conversationId!==a.conversationId||"main"!==e.page)return;let l=eW.C$.getState().isIncognito||!s;t({page:"chat",conversationId:l?null:a.conversationId,temporary:l})}),[t,e,s])})(),function(){let{route:e}=(0,C.wK)();(0,f.useEffect)(()=>{let{conversationMode:t,voiceConnectionStatus:s,exitVoiceMode:a}=l.aP.getState();"voice"!==t||"disconnecting"===s||["main","chat"].includes(e.page)||a("navigation").catch(e=>(0,eO.vV)("page:handleVoiceModeExit",e))},[e.page])}(),(0,sD.YT)();let{SHOW_FINANCIAL_PAGE:e}=(0,w.h)(),{user:t}=(0,o.useSession)(),{route:s}=(0,C.wK)();switch((0,f.useEffect)(()=>{let e=(0,C.KQ)(s,window.location.origin),t=document.querySelector("head link[rel='canonical']");return t||((t=document.createElement("link")).rel="canonical",document.head.appendChild(t)),t.href=e,()=>{let e=document.querySelector("head link[rel='canonical']");e&&document.head.removeChild(e)}},[s]),s.page){case"main":case"chat":return(0,a.jsx)(n.A,{});case"history":if(t)return(0,a.jsx)(n7,{});return(0,a.jsx)(st.default,{});case"workspace":return(0,a.jsx)(nQ.w8,{workspaceId:s.workspaceId});case"workspaces":return(0,a.jsx)(nQ.TP,{});case"files":return(0,a.jsx)(nL,{});case"tasks":return(0,a.jsx)(sg,{});case"images":case"unknown":default:return(0,a.jsx)(st.default,{});case"plans":return(0,a.jsx)(nU,{});case"finance":if(e)return(0,a.jsx)(e0,{});return(0,a.jsx)(st.default,{});case"faq":return(0,a.jsx)(sL,{});case"changelog":return(0,a.jsx)(sK,{});case"share-links":return(0,a.jsx)(nY,{});case"deleted-conversations":return(0,a.jsx)(sR,{});case"imagine":return(0,a.jsx)(tF,{});case"imagine-favorites":return(0,a.jsx)(tF,{variant:"favorites"});case"imagine-post":return(0,a.jsx)(t4,{});case"clear-cache":return(0,a.jsx)(i.ClearCachePage,{})}}},59886:(e,t,s)=>{s.d(t,{t:()=>n});var a=s(79342);s(88382);let n=e=>{let{trackClassName:t,progressClassName:s,size:n,thickness:l,progressPercentage:i,offsetDegrees:r=0}=e,o=100/n*l,c=50-o/2,d=2*Math.PI*c,u=1-i/100,m=d*u,h=l/2;m+=h*(1-u*u);let x=-90+h/d*180+r;return(0,a.jsx)("svg",{width:n,height:n,viewBox:"0 0 100 100",children:(0,a.jsxs)("g",{transform:"rotate("+x+" 50 50)",children:[(0,a.jsx)("circle",{cx:"50",cy:"50",r:c,strokeWidth:o,fill:"none",className:t}),i>=100?(0,a.jsx)("circle",{cx:"50",cy:"50",r:c,strokeWidth:o,fill:"none",className:s}):i>0?(0,a.jsx)("circle",{opacity:function(e,t,s){return Math.min(Math.max((s-0)/(1.5-e),0),1)}(0,1.5,i),cx:"50",cy:"50",r:c,strokeWidth:o,fill:"none",className:s,strokeDasharray:"".concat(d," ").concat(d),strokeDashoffset:m,strokeLinecap:"round"}):null]})})}},62227:(e,t,s)=>{s.d(t,{N:()=>c});var a=s(79342),n=s(11750),l=s(27636),i=s(88382),r=s(65146);let o=e=>{let{task:t,iconPosition:s="left"}=e,{getScheduleLabel:r}=(0,l.Ay)(),o=i.useMemo(()=>t&&t.taskCadence&&t.timeOfDay&&t.timezone?r(t.taskCadence,t.timeOfDay,t.timezone,t.dayOfWeek,t.dayOfMonth,t.dayOfYear):"",[t,r]);return(0,a.jsxs)("h1",{className:"text-sm font-semibold text-fg-primary flex items-center gap-1 line-clamp-1",children:["left"===s&&(0,a.jsx)(n.kM6,{size:14}),(0,a.jsx)("p",{className:"text-sm font-medium line-clamp-1",children:o}),"right"===s&&(0,a.jsx)(n.kM6,{size:14})]})},c=e=>{let{task:t,isScheduled:s,iconPosition:l="left"}=e,{t:i}=(0,r.Bd)("tasks");return s?(0,a.jsx)(o,{task:t,iconPosition:l}):(0,a.jsxs)("p",{className:"flex items-center gap-1 text-sm font-medium text-yellow-200",children:[(0,a.jsx)(n.J0U,{size:14})," ",i("task-card.not-scheduled","Paused")]})}},87549:(e,t,s)=>{s.d(t,{B:()=>o});var a=s(79342),n=s(16538),l=s(34323),i=s(16506),r=s(88382);let o=e=>{let{syntax:t,value:s,isStreaming:o,editable:c,autofocus:d,onContentUpdate:u}=e,m=(0,r.useRef)(void 0),[h,x]=(0,r.useState)(!1),f=(0,r.useRef)(null),{resolvedTheme:p}=(0,i.D)();(0,r.useEffect)(()=>{(0,n.q)()},[]);let g=(0,r.useCallback)((e,t)=>{t.isFlush||u(e)},[u]),v=(0,r.useCallback)(e=>{f.current=e,x(!0)},[]);(0,r.useEffect)(()=>{let e=f.current;if(h&&e&&c&&d){var t,s;let a={lineNumber:1,column:(null!=(s=null==(t=e.getModel())?void 0:t.getLineLength(1))?s:0)+1};e.setPosition(a),e.focus()}},[h,d]),(0,r.useEffect)(()=>{let e=f.current;if(!e||!n.x||!o)return;let t=e.getValue(),a=e.getModel();if(!a)return;if(!s.includes(t))return void e.setValue(s);let l=s.substring(t.length),i=a.getPositionAt(t.length);e.executeEdits("stream-update",[{range:new n.x.Range(i.lineNumber,i.column,i.lineNumber,i.column),forceMoveMarkers:!0,text:l}])},[h,s,o]);let j=(0,r.useCallback)(()=>{m.current&&m.current();let e=null===n.x||void 0===n.x?void 0:n.x.editor.getEditors()[0];if(e){var t;let s=e.getSelection();if(!s)return;if(null==(t=e.getModel())?void 0:t.getValueInRange(s)){let t=document.createElement("div"),a={getId:()=>"selected-text.widget",getDomNode:()=>t,getPosition:()=>n.x?{position:{lineNumber:s.endLineNumber,column:s.startColumn},preference:[n.x.editor.ContentWidgetPositionPreference.BELOW,n.x.editor.ContentWidgetPositionPreference.ABOVE]}:{position:{lineNumber:s.endLineNumber,column:s.startColumn},preference:[]}};e.addContentWidget(a),m.current=()=>e.removeContentWidget(a)}}},[]),y=(0,r.useMemo)(()=>({contextmenu:!1,suggestOnTriggerCharacters:!1,acceptSuggestionOnEnter:"off",lineNumbers:"on",readOnly:!c,quickSuggestions:!1,fontFamily:"var(--font-ibm-plex-mono)",fontSize:14,stickyScroll:{enabled:!1},wordBasedSuggestions:"off",wordWrap:"on",automaticLayout:!0,parameterHints:{enabled:!1},hover:{enabled:!1},minimap:{enabled:!1},scrollbar:{useShadows:!1},scrollBeyondLastLine:!1,padding:{bottom:30}}),[c]),b=(0,r.useCallback)(e=>{e.languages.register({id:"latex"}),e.languages.setMonarchTokensProvider("latex",{tokenizer:{root:[[/[\\][a-zA-Z]+/,"keyword"],[/\$[^$]*\$/,"string"],[/\\[\(\[][^{}]*\\[\)\]]/,"string"],[/%.*$/,"comment"],[/[{}]/,"delimiter"],[/\\(begin|end)\{[a-zA-Z]*\}/,"keyword"],[/[\[\]()]/,"delimiter"]]}})},[]);return(0,a.jsx)("div",{className:"w-full h-full max-h-full",onMouseUp:j,children:(0,a.jsx)(l.Ay,{height:"100%",width:"100%",onMount:v,value:o?void 0:s,language:t,onChange:g,beforeMount:b,theme:"dark"===p?"dark":"light",options:y})})}},93875:(e,t,s)=>{s.d(t,{H:()=>f});var a=s(42419),n=s(23232),l=s(52265),i=s(77232),r=s(87891),o=s(88382),c=s(65146),d=s(14908),u=s(3353),m=s(56907),h=s(61349),x=s(71865);let f=e=>{let{assetId:t,content:s,filename:f}=e,p=(0,n._)(),g=(0,r.R)(e=>e.shareAsset),v=(0,r.R)(e=>e.cloneAsset),[j,y]=(0,o.useState)(!1),[b,w]=(0,o.useState)(!1),[k,N]=(0,o.useState)(!1),I=(0,x.n)(),{t:C}=(0,c.Bd)("files"),S=(0,o.useCallback)(async()=>{p("file_content_copy_click",void 0,{location:"files:useFileActions:handleCopy",contentType:"text/markdown"}),s&&(await (0,a.L)(s),setTimeout(()=>{y(!1)},1e3),y(!0),d.oR.success(C("files.content.copied","Copied")))},[s,p,C]),E=(0,o.useCallback)(()=>{p("file_content_download_click",void 0,{location:"files:useFileActions:handleDownload",contentType:"text/markdown"});let e=new Blob([s],{type:"text/markdown"});(0,l.W)(e,f)},[p,s,f]);return{handleCopy:S,copyPressed:j,handleDownload:E,handleShare:(0,o.useCallback)(async()=>{if(p("file_content_share_click",void 0,{location:"files:useFileActions:handleShare",contentType:"text/markdown"}),!t)return;if(I)return void function(e){let{assetId:t,title:s}=e,a=["share-asset",t];u.Q.getState().openShareDialog({title:s,onSave:async()=>Promise.resolve().then(()=>{(0,h.SX)().invalidateQueries({queryKey:a})}).catch(e=>{throw e}),useFetchData:()=>(0,m.IT)({queryKey:a,queryFn:async()=>({sharedWithTeam:!1,sharedWithUserIds:[]})})})}({assetId:t,title:"".concat(C("share-asset.title","Share")," ").concat(f)});w(!0);let e=!1;try{await g(t),e=!0}catch(e){d.oR.error(C("Failed to share file.","Failed to share file."))}finally{w(!1)}if(!e)return;setTimeout(()=>{N(!1)},1e3),N(!0);let s=window.location.origin+"/shared-file/"+t;(0,i.g)(s,C("Copied share link to clipboard.","Copied share link to clipboard."))},[p,t,g,C,f,I]),sharePressed:k,shareLoading:b,handleClone:(0,o.useCallback)(async()=>{if(p("file_content_clone_click",void 0,{location:"files:useFileActions:handleClone",contentType:"text/markdown"}),!t)return;let{assetId:e}=await v(t);e&&(window.location.href="/files/?file=".concat(e))},[p,t,v])}}},99983:(e,t,s)=>{s.r(t),s.d(t,{ClearCachePage:()=>d,default:()=>u});var a=s(79342),n=s(10953),l=s(11750),i=s(91733),r=s(39116),o=s(88382),c=s(65146);function d(){let{t:e}=(0,c.Bd)("base"),t=(0,r.useRouter)(),s=(0,o.useCallback)(()=>{let e=[i.Jt,i.X$];Object.keys(localStorage).forEach(t=>{e.includes(t)||localStorage.removeItem(t)}),sessionStorage.clear()},[]),d=(0,o.useCallback)(()=>{for(let e of document.cookie.split(";")){let t=e.indexOf("="),s=t>-1?e.substring(0,t).trim():e.trim();document.cookie="".concat(s,"=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/")}},[]);return(0,o.useEffect)(()=>{s(),d(),t.push("/clear-cookies")},[s,d,t]),(0,a.jsx)("div",{className:"w-full h-dvh flex justify-center items-center align-middle",children:(0,a.jsxs)("div",{className:"w-full max-w-lg text-center flex flex-col items-center",children:[(0,a.jsx)("div",{className:"mb-6 flex justify-center",children:(0,a.jsx)(n.kk,{className:"w-24 text-primary"})}),(0,a.jsxs)("div",{className:"flex flex-row gap-2 items-center",children:[(0,a.jsx)("p",{className:"text-lg text-primary animate-pulse",children:e("redirecting","Redirecting")}),(0,a.jsx)(l.krw,{className:"w-4 h-4 animate-spin"})]})]})})}let u=d}}]);